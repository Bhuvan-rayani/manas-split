(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function A1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wm={exports:{}},Pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function KS(){if(kb)return Pl;kb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var d in o)d!=="key"&&(u[d]=o[d])}else u=o;return o=u.ref,{$$typeof:n,type:r,key:c,ref:o!==void 0?o:null,props:u}}return Pl.Fragment=t,Pl.jsx=s,Pl.jsxs=s,Pl}var Ob;function QS(){return Ob||(Ob=1,wm.exports=KS()),wm.exports}var p=QS(),Sm={exports:{}},Nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb;function XS(){if(Pb)return Nt;Pb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function j(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,U={};function G(O,it,ht){this.props=O,this.context=it,this.refs=U,this.updater=ht||k}G.prototype.isReactComponent={},G.prototype.setState=function(O,it){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,it,"setState")},G.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function W(){}W.prototype=G.prototype;function Q(O,it,ht){this.props=O,this.context=it,this.refs=U,this.updater=ht||k}var at=Q.prototype=new W;at.constructor=Q,L(at,G.prototype),at.isPureReactComponent=!0;var tt=Array.isArray;function Z(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function S(O,it,ht){var mt=ht.ref;return{$$typeof:n,type:O,key:it,ref:mt!==void 0?mt:null,props:ht}}function A(O,it){return S(O.type,it,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function R(O){var it={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ht){return it[ht]})}var M=/\/+/g;function lt(O,it){return typeof O=="object"&&O!==null&&O.key!=null?R(""+O.key):it.toString(36)}function vt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Z,Z):(O.status="pending",O.then(function(it){O.status==="pending"&&(O.status="fulfilled",O.value=it)},function(it){O.status==="pending"&&(O.status="rejected",O.reason=it)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function B(O,it,ht,mt,St){var jt=typeof O;(jt==="undefined"||jt==="boolean")&&(O=null);var zt=!1;if(O===null)zt=!0;else switch(jt){case"bigint":case"string":case"number":zt=!0;break;case"object":switch(O.$$typeof){case n:case t:zt=!0;break;case b:return zt=O._init,B(zt(O._payload),it,ht,mt,St)}}if(zt)return St=St(O),zt=mt===""?"."+lt(O,0):mt,tt(St)?(ht="",zt!=null&&(ht=zt.replace(M,"$&/")+"/"),B(St,it,ht,"",function(_r){return _r})):St!=null&&(V(St)&&(St=A(St,ht+(St.key==null||O&&O.key===St.key?"":(""+St.key).replace(M,"$&/")+"/")+zt)),it.push(St)),1;zt=0;var Oe=mt===""?".":mt+":";if(tt(O))for(var le=0;le<O.length;le++)mt=O[le],jt=Oe+lt(mt,le),zt+=B(mt,it,ht,jt,St);else if(le=j(O),typeof le=="function")for(O=le.call(O),le=0;!(mt=O.next()).done;)mt=mt.value,jt=Oe+lt(mt,le++),zt+=B(mt,it,ht,jt,St);else if(jt==="object"){if(typeof O.then=="function")return B(vt(O),it,ht,mt,St);throw it=String(O),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return zt}function ot(O,it,ht){if(O==null)return O;var mt=[],St=0;return B(O,mt,"","",function(jt){return it.call(ht,jt,St++)}),mt}function ct(O){if(O._status===-1){var it=O._result;it=it(),it.then(function(ht){(O._status===0||O._status===-1)&&(O._status=1,O._result=ht)},function(ht){(O._status===0||O._status===-1)&&(O._status=2,O._result=ht)}),O._status===-1&&(O._status=0,O._result=it)}if(O._status===1)return O._result.default;throw O._result}var wt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},bt={map:ot,forEach:function(O,it,ht){ot(O,function(){it.apply(this,arguments)},ht)},count:function(O){var it=0;return ot(O,function(){it++}),it},toArray:function(O){return ot(O,function(it){return it})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Nt.Activity=_,Nt.Children=bt,Nt.Component=G,Nt.Fragment=s,Nt.Profiler=o,Nt.PureComponent=Q,Nt.StrictMode=r,Nt.Suspense=g,Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Nt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},Nt.cache=function(O){return function(){return O.apply(null,arguments)}},Nt.cacheSignal=function(){return null},Nt.cloneElement=function(O,it,ht){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var mt=L({},O.props),St=O.key;if(it!=null)for(jt in it.key!==void 0&&(St=""+it.key),it)!N.call(it,jt)||jt==="key"||jt==="__self"||jt==="__source"||jt==="ref"&&it.ref===void 0||(mt[jt]=it[jt]);var jt=arguments.length-2;if(jt===1)mt.children=ht;else if(1<jt){for(var zt=Array(jt),Oe=0;Oe<jt;Oe++)zt[Oe]=arguments[Oe+2];mt.children=zt}return S(O.type,St,mt)},Nt.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Nt.createElement=function(O,it,ht){var mt,St={},jt=null;if(it!=null)for(mt in it.key!==void 0&&(jt=""+it.key),it)N.call(it,mt)&&mt!=="key"&&mt!=="__self"&&mt!=="__source"&&(St[mt]=it[mt]);var zt=arguments.length-2;if(zt===1)St.children=ht;else if(1<zt){for(var Oe=Array(zt),le=0;le<zt;le++)Oe[le]=arguments[le+2];St.children=Oe}if(O&&O.defaultProps)for(mt in zt=O.defaultProps,zt)St[mt]===void 0&&(St[mt]=zt[mt]);return S(O,jt,St)},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(O){return{$$typeof:d,render:O}},Nt.isValidElement=V,Nt.lazy=function(O){return{$$typeof:b,_payload:{_status:-1,_result:O},_init:ct}},Nt.memo=function(O,it){return{$$typeof:y,type:O,compare:it===void 0?null:it}},Nt.startTransition=function(O){var it=D.T,ht={};D.T=ht;try{var mt=O(),St=D.S;St!==null&&St(ht,mt),typeof mt=="object"&&mt!==null&&typeof mt.then=="function"&&mt.then(Z,wt)}catch(jt){wt(jt)}finally{it!==null&&ht.types!==null&&(it.types=ht.types),D.T=it}},Nt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Nt.use=function(O){return D.H.use(O)},Nt.useActionState=function(O,it,ht){return D.H.useActionState(O,it,ht)},Nt.useCallback=function(O,it){return D.H.useCallback(O,it)},Nt.useContext=function(O){return D.H.useContext(O)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(O,it){return D.H.useDeferredValue(O,it)},Nt.useEffect=function(O,it){return D.H.useEffect(O,it)},Nt.useEffectEvent=function(O){return D.H.useEffectEvent(O)},Nt.useId=function(){return D.H.useId()},Nt.useImperativeHandle=function(O,it,ht){return D.H.useImperativeHandle(O,it,ht)},Nt.useInsertionEffect=function(O,it){return D.H.useInsertionEffect(O,it)},Nt.useLayoutEffect=function(O,it){return D.H.useLayoutEffect(O,it)},Nt.useMemo=function(O,it){return D.H.useMemo(O,it)},Nt.useOptimistic=function(O,it){return D.H.useOptimistic(O,it)},Nt.useReducer=function(O,it,ht){return D.H.useReducer(O,it,ht)},Nt.useRef=function(O){return D.H.useRef(O)},Nt.useState=function(O){return D.H.useState(O)},Nt.useSyncExternalStore=function(O,it,ht){return D.H.useSyncExternalStore(O,it,ht)},Nt.useTransition=function(){return D.H.useTransition()},Nt.version="19.2.3",Nt}var Lb;function Xp(){return Lb||(Lb=1,Sm.exports=XS()),Sm.exports}var K=Xp();const $p=A1(K);var Am={exports:{}},Ll={},Nm={exports:{}},Cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function $S(){return Ub||(Ub=1,(function(n){function t(B,ot){var ct=B.length;B.push(ot);t:for(;0<ct;){var wt=ct-1>>>1,bt=B[wt];if(0<o(bt,ot))B[wt]=ot,B[ct]=bt,ct=wt;else break t}}function s(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var ot=B[0],ct=B.pop();if(ct!==ot){B[0]=ct;t:for(var wt=0,bt=B.length,O=bt>>>1;wt<O;){var it=2*(wt+1)-1,ht=B[it],mt=it+1,St=B[mt];if(0>o(ht,ct))mt<bt&&0>o(St,ht)?(B[wt]=St,B[mt]=ct,wt=mt):(B[wt]=ht,B[it]=ct,wt=it);else if(mt<bt&&0>o(St,ct))B[wt]=St,B[mt]=ct,wt=mt;else break t}}return ot}function o(B,ot){var ct=B.sortIndex-ot.sortIndex;return ct!==0?ct:B.id-ot.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var g=[],y=[],b=1,_=null,T=3,j=!1,k=!1,L=!1,U=!1,G=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function at(B){for(var ot=s(y);ot!==null;){if(ot.callback===null)r(y);else if(ot.startTime<=B)r(y),ot.sortIndex=ot.expirationTime,t(g,ot);else break;ot=s(y)}}function tt(B){if(L=!1,at(B),!k)if(s(g)!==null)k=!0,Z||(Z=!0,R());else{var ot=s(y);ot!==null&&vt(tt,ot.startTime-B)}}var Z=!1,D=-1,N=5,S=-1;function A(){return U?!0:!(n.unstable_now()-S<N)}function V(){if(U=!1,Z){var B=n.unstable_now();S=B;var ot=!0;try{t:{k=!1,L&&(L=!1,W(D),D=-1),j=!0;var ct=T;try{e:{for(at(B),_=s(g);_!==null&&!(_.expirationTime>B&&A());){var wt=_.callback;if(typeof wt=="function"){_.callback=null,T=_.priorityLevel;var bt=wt(_.expirationTime<=B);if(B=n.unstable_now(),typeof bt=="function"){_.callback=bt,at(B),ot=!0;break e}_===s(g)&&r(g),at(B)}else r(g);_=s(g)}if(_!==null)ot=!0;else{var O=s(y);O!==null&&vt(tt,O.startTime-B),ot=!1}}break t}finally{_=null,T=ct,j=!1}ot=void 0}}finally{ot?R():Z=!1}}}var R;if(typeof Q=="function")R=function(){Q(V)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,lt=M.port2;M.port1.onmessage=V,R=function(){lt.postMessage(null)}}else R=function(){G(V,0)};function vt(B,ot){D=G(function(){B(n.unstable_now())},ot)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(B){switch(T){case 1:case 2:case 3:var ot=3;break;default:ot=T}var ct=T;T=ot;try{return B()}finally{T=ct}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(B,ot){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ct=T;T=B;try{return ot()}finally{T=ct}},n.unstable_scheduleCallback=function(B,ot,ct){var wt=n.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?wt+ct:wt):ct=wt,B){case 1:var bt=-1;break;case 2:bt=250;break;case 5:bt=1073741823;break;case 4:bt=1e4;break;default:bt=5e3}return bt=ct+bt,B={id:b++,callback:ot,priorityLevel:B,startTime:ct,expirationTime:bt,sortIndex:-1},ct>wt?(B.sortIndex=ct,t(y,B),s(g)===null&&B===s(y)&&(L?(W(D),D=-1):L=!0,vt(tt,ct-wt))):(B.sortIndex=bt,t(g,B),k||j||(k=!0,Z||(Z=!0,R()))),B},n.unstable_shouldYield=A,n.unstable_wrapCallback=function(B){var ot=T;return function(){var ct=T;T=ot;try{return B.apply(this,arguments)}finally{T=ct}}}})(Cm)),Cm}var Bb;function ZS(){return Bb||(Bb=1,Nm.exports=$S()),Nm.exports}var Rm={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function WS(){if(zb)return sn;zb=1;var n=Xp();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:g,containerInfo:y,implementation:b}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(g,y,null,b)},sn.flushSync=function(g){var y=c.T,b=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=y,r.p=b,r.d.f()}},sn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},sn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},sn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,_=d(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:j}):b==="script"&&r.d.X(g,{crossOrigin:_,integrity:T,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},sn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=d(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},sn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,_=d(b,y.crossOrigin);r.d.L(g,b,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},sn.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=d(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},sn.requestFormReset=function(g){r.d.r(g)},sn.unstable_batchedUpdates=function(g,y){return g(y)},sn.useFormState=function(g,y,b){return c.H.useFormState(g,y,b)},sn.useFormStatus=function(){return c.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var Fb;function JS(){if(Fb)return Rm.exports;Fb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Rm.exports=WS(),Rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qb;function tA(){if(qb)return Ll;qb=1;var n=ZS(),t=Xp(),s=JS();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function c(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function d(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(r(188))}function y(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,l=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),e;if(m===l)return g(f),i;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=m;else{for(var x=!1,w=f.child;w;){if(w===a){x=!0,a=f,l=m;break}if(w===l){x=!0,l=f,a=m;break}w=w.sibling}if(!x){for(w=m.child;w;){if(w===a){x=!0,a=m,l=f;break}if(w===l){x=!0,l=m,a=f;break}w=w.sibling}if(!x)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function b(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=b(e),i!==null)return i;e=e.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),at=Symbol.for("react.forward_ref"),tt=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),A=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function R(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var M=Symbol.for("react.client.reference");function lt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===M?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case G:return"Profiler";case U:return"StrictMode";case tt:return"Suspense";case Z:return"SuspenseList";case S:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case Q:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case at:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return i=e.displayName||null,i!==null?i:lt(e.type)||"Memo";case N:i=e._payload,e=e._init;try{return lt(e(i))}catch{}}return null}var vt=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},wt=[],bt=-1;function O(e){return{current:e}}function it(e){0>bt||(e.current=wt[bt],wt[bt]=null,bt--)}function ht(e,i){bt++,wt[bt]=e.current,e.current=i}var mt=O(null),St=O(null),jt=O(null),zt=O(null);function Oe(e,i){switch(ht(jt,i),ht(St,e),ht(mt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?ib(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=ib(i),e=rb(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(mt),ht(mt,e)}function le(){it(mt),it(St),it(jt)}function _r(e){e.memoizedState!==null&&ht(zt,e);var i=mt.current,a=rb(i,e.type);i!==a&&(ht(St,e),ht(mt,a))}function ma(e){St.current===e&&(it(mt),it(St)),zt.current===e&&(it(zt),Ml._currentValue=ct)}var pa,ga;function gs(e){if(pa===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);pa=i&&i[1]||"",ga=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pa+e+ga}var Mo=!1;function Tr(e,i){if(!e||Mo)return"";Mo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch($){var Y=$}Reflect.construct(e,[],nt)}else{try{nt.call()}catch($){Y=$}e.call(nt.prototype)}}else{try{throw Error()}catch($){Y=$}(nt=e())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch($){if($&&Y&&typeof $.stack=="string")return[$.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],w=m[1];if(x&&w){var I=x.split(`
`),H=w.split(`
`);for(f=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(l===I.length||f===H.length)for(l=I.length-1,f=H.length-1;1<=l&&0<=f&&I[l]!==H[f];)f--;for(;1<=l&&0<=f;l--,f--)if(I[l]!==H[f]){if(l!==1||f!==1)do if(l--,f--,0>f||I[l]!==H[f]){var J=`
`+I[l].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=l&&0<=f);break}}}finally{Mo=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?gs(a):""}function Io(e,i){switch(e.tag){case 26:case 27:case 5:return gs(e.type);case 16:return gs("Lazy");case 13:return e.child!==i&&i!==null?gs("Suspense Fallback"):gs("Suspense");case 19:return gs("SuspenseList");case 0:case 15:return Tr(e.type,!1);case 11:return Tr(e.type.render,!1);case 1:return Tr(e.type,!0);case 31:return gs("Activity");default:return""}}function ko(e){try{var i="",a=null;do i+=Io(e,a),a=e,e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ee=Object.prototype.hasOwnProperty,Pe=n.unstable_scheduleCallback,wi=n.unstable_cancelCallback,Af=n.unstable_shouldYield,ju=n.unstable_requestPaint,un=n.unstable_now,Er=n.unstable_getCurrentPriorityLevel,Oo=n.unstable_ImmediatePriority,Po=n.unstable_UserBlockingPriority,Si=n.unstable_NormalPriority,Nf=n.unstable_LowPriority,Vu=n.unstable_IdlePriority,Mu=n.log,Iu=n.unstable_setDisableYieldValue,Jn=null,Ye=null;function On(e){if(typeof Mu=="function"&&Iu(e),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Jn,e)}catch{}}var ve=Math.clz32?Math.clz32:Ou,ku=Math.log,ya=Math.LN2;function Ou(e){return e>>>=0,e===0?32:31-(ku(e)/ya|0)|0}var ys=256,wr=262144,we=4194304;function vs(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function bs(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,m=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?f=vs(l):(x&=w,x!==0?f=vs(x):a||(a=w&~e,a!==0&&(f=vs(a))))):(w=l&~m,w!==0?f=vs(w):x!==0?f=vs(x):a||(a=l&~e,a!==0&&(f=vs(a)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:f}function ts(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Cf(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pu(){var e=we;return we<<=1,(we&62914560)===0&&(we=4194304),e}function xs(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Sr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Rf(e,i,a,l,f,m){var x=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var w=e.entanglements,I=e.expirationTimes,H=e.hiddenUpdates;for(a=x&~a;0<a;){var J=31-ve(a),nt=1<<J;w[J]=0,I[J]=-1;var Y=H[J];if(Y!==null)for(H[J]=null,J=0;J<Y.length;J++){var $=Y[J];$!==null&&($.lane&=-536870913)}a&=~nt}l!==0&&Ar(e,l,0),m!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=m&~(x&~i))}function Ar(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-ve(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Lo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-ve(a),f=1<<l;f&i|e[l]&i&&(e[l]|=i),a&=~f}}function Uo(e,i){var a=i&-i;return a=(a&42)!==0?1:Nr(a),(a&(e.suspendedLanes|i))!==0?0:a}function Nr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Js(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Lu(){var e=ot.p;return e!==0?e:(e=window.event,e===void 0?32:Cb(e.type))}function es(e,i){var a=ot.p;try{return ot.p=e,i()}finally{ot.p=a}}var ns=Math.random().toString(36).slice(2),Se="__reactFiber$"+ns,ze="__reactProps$"+ns,_s="__reactContainer$"+ns,va="__reactEvents$"+ns,Df="__reactListeners$"+ns,Uu="__reactHandles$"+ns,Bu="__reactResources$"+ns,Ts="__reactMarker$"+ns;function ba(e){delete e[Se],delete e[ze],delete e[va],delete e[Df],delete e[Uu]}function Es(e){var i=e[Se];if(i)return i;for(var a=e.parentNode;a;){if(i=a[_s]||a[Se]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=fb(e);e!==null;){if(a=e[Se])return a;e=fb(e)}return i}e=a,a=e.parentNode}return null}function Pn(e){if(e=e[Se]||e[_s]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function An(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function ws(e){var i=e[Bu];return i||(i=e[Bu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ae(e){e[Ts]=!0}var Bo=new Set,zo={};function Ss(e,i){As(e,i),As(e+"Capture",i)}function As(e,i){for(zo[e]=i,e=0;e<i.length;e++)Bo.add(i[e])}var Fo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qo={},Ho={};function zu(e){return Ee.call(Ho,e)?!0:Ee.call(qo,e)?!1:Fo.test(e)?Ho[e]=!0:(qo[e]=!0,!1)}function xa(e,i,a){if(zu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Nn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Ne(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function Fe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ai(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Go(e,i,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(x){a=""+x,m.call(this,x)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Xt(e){if(!e._valueTracker){var i=Ai(e)?"checked":"value";e._valueTracker=Go(e,i,""+e[i])}}function Cr(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=Ai(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function Ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Rr=/[\n"\\]/g;function dn(e){return e.replace(Rr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function _a(e,i,a,l,f,m,x,w){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),i!=null?x==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Fe(i)):e.value!==""+Fe(i)&&(e.value=""+Fe(i)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),i!=null?Yo(e,x,Fe(i)):a!=null?Yo(e,x,Fe(a)):l!=null&&e.removeAttribute("value"),f==null&&m!=null&&(e.defaultChecked=!!m),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Fe(w):e.removeAttribute("name")}function Fu(e,i,a,l,f,m,x,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Xt(e);return}a=a!=null?""+Fe(a):"",i=i!=null?""+Fe(i):a,w||i===e.value||(e.value=i),e.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),Xt(e)}function Yo(e,i,a){i==="number"&&Ns(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ni(e,i,a,l){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function qu(e,i,a){if(i!=null&&(i=""+Fe(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Fe(a):""}function Ci(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(vt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Fe(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Xt(e)}function mn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Hu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ko(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||Hu.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Qo(e,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Ko(e,f,l)}else for(var m in i)i.hasOwnProperty(m)&&Ko(e,m,i[m])}function Ta(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ri=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ea(e){return Ri.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ss(){}var Xo=null;function Ln(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Di=null,Cs=null;function Dr(e){var i=Pn(e);if(i&&(e=i.stateNode)){var a=e[ze]||null;t:switch(e=i.stateNode,i.type){case"input":if(_a(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var f=l[ze]||null;if(!f)throw Error(r(90));_a(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&Cr(l)}break t;case"textarea":qu(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ni(e,!!a.multiple,i,!1)}}}var wa=!1;function ji(e,i,a){if(wa)return e(i,a);wa=!0;try{var l=e(i);return l}finally{if(wa=!1,(Di!==null||Cs!==null)&&(Lc(),Di&&(i=Di,e=Cs,Cs=Di=null,Dr(i),e)))for(i=0;i<e.length;i++)Dr(e[i])}}function is(e,i){var a=e.stateNode;if(a===null)return null;var l=a[ze]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jr=!1;if(Un)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){jr=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{jr=!1}var Rs=null,$o=null,Vr=null;function Zo(){if(Vr)return Vr;var e,i=$o,a=i.length,l,f="value"in Rs?Rs.value:Rs.textContent,m=f.length;for(e=0;e<a&&i[e]===f[e];e++);var x=a-e;for(l=1;l<=x&&i[a-l]===f[m-l];l++);return Vr=f.slice(e,1<l?1-l:void 0)}function Mr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function rs(){return!1}function Ke(e){function i(a,l,f,m,x){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(a=e[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ti:rs,this.isPropagationStopped=rs,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=Ke(ei),Vi=_({},ei,{view:0,detail:0}),Wo=Ke(Vi),Mi,Sa,js,Aa=_({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ii,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==js&&(js&&e.type==="mousemove"?(Mi=e.screenX-js.screenX,Sa=e.screenY-js.screenY):Sa=Mi=0,js=e),Mi)},movementY:function(e){return"movementY"in e?e.movementY:Sa}}),Jo=Ke(Aa),Ir=_({},Aa,{dataTransfer:0}),Yu=Ke(Ir),Ku=_({},Vi,{relatedTarget:0}),kr=Ke(Ku),tl=_({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=Ke(tl),Na=_({},ei,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xu=Ke(Na),$u=_({},ei,{data:0}),Vs=Ke($u),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Ju[e])?!!i[e]:!1}function Ii(){return tc}var cn=_({},Vi,{key:function(e){if(e.key){var i=Zu[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Mr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ii,charCode:function(e){return e.type==="keypress"?Mr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ec=Ke(cn),nc=_({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ni=Ke(nc),h=_({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ii}),v=Ke(h),E=_({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=Ke(E),F=_({},Aa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Ke(F),ut=_({},ei,{newState:0,oldState:0}),Rt=Ke(ut),be=[9,13,27,32],Yt=Un&&"CompositionEvent"in window,ue=null;Un&&"documentMode"in document&&(ue=document.documentMode);var Bn=Un&&"TextEvent"in window&&!ue,Ms=Un&&(!Yt||ue&&8<ue&&11>=ue),as=" ",os=!1;function Or(e,i){switch(e){case"keyup":return be.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ca(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ra=!1;function yw(e,i){switch(e){case"compositionend":return Ca(i);case"keypress":return i.which!==32?null:(os=!0,as);case"textInput":return e=i.data,e===as&&os?null:e;default:return null}}function vw(e,i){if(Ra)return e==="compositionend"||!Yt&&Or(e,i)?(e=Zo(),Vr=$o=Rs=null,Ra=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ms&&i.locale!=="ko"?null:i.data;default:return null}}var bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function py(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!bw[e.type]:i==="textarea"}function gy(e,i,a,l){Di?Cs?Cs.push(l):Cs=[l]:Di=l,i=Gc(i,"onChange"),0<i.length&&(a=new Ds("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var el=null,nl=null;function xw(e){Wv(e,0)}function sc(e){var i=An(e);if(Cr(i))return e}function yy(e,i){if(e==="change")return i}var vy=!1;if(Un){var jf;if(Un){var Vf="oninput"in document;if(!Vf){var by=document.createElement("div");by.setAttribute("oninput","return;"),Vf=typeof by.oninput=="function"}jf=Vf}else jf=!1;vy=jf&&(!document.documentMode||9<document.documentMode)}function xy(){el&&(el.detachEvent("onpropertychange",_y),nl=el=null)}function _y(e){if(e.propertyName==="value"&&sc(nl)){var i=[];gy(i,nl,e,Ln(e)),ji(xw,i)}}function _w(e,i,a){e==="focusin"?(xy(),el=i,nl=a,el.attachEvent("onpropertychange",_y)):e==="focusout"&&xy()}function Tw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sc(nl)}function Ew(e,i){if(e==="click")return sc(i)}function ww(e,i){if(e==="input"||e==="change")return sc(i)}function Sw(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Cn=typeof Object.is=="function"?Object.is:Sw;function sl(e,i){if(Cn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Ee.call(i,f)||!Cn(e[f],i[f]))return!1}return!0}function Ty(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ey(e,i){var a=Ty(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ty(a)}}function wy(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?wy(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Sy(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Ns(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Ns(e.document)}return i}function Mf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Aw=Un&&"documentMode"in document&&11>=document.documentMode,Da=null,If=null,il=null,kf=!1;function Ay(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kf||Da==null||Da!==Ns(l)||(l=Da,"selectionStart"in l&&Mf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),il&&sl(il,l)||(il=l,l=Gc(If,"onSelect"),0<l.length&&(i=new Ds("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=Da)))}function Pr(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ja={animationend:Pr("Animation","AnimationEnd"),animationiteration:Pr("Animation","AnimationIteration"),animationstart:Pr("Animation","AnimationStart"),transitionrun:Pr("Transition","TransitionRun"),transitionstart:Pr("Transition","TransitionStart"),transitioncancel:Pr("Transition","TransitionCancel"),transitionend:Pr("Transition","TransitionEnd")},Of={},Ny={};Un&&(Ny=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function Lr(e){if(Of[e])return Of[e];if(!ja[e])return e;var i=ja[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ny)return Of[e]=i[a];return e}var Cy=Lr("animationend"),Ry=Lr("animationiteration"),Dy=Lr("animationstart"),Nw=Lr("transitionrun"),Cw=Lr("transitionstart"),Rw=Lr("transitioncancel"),jy=Lr("transitionend"),Vy=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function ls(e,i){Vy.set(e,i),Ss(i,[e])}var ic=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},zn=[],Va=0,Lf=0;function rc(){for(var e=Va,i=Lf=Va=0;i<e;){var a=zn[i];zn[i++]=null;var l=zn[i];zn[i++]=null;var f=zn[i];zn[i++]=null;var m=zn[i];if(zn[i++]=null,l!==null&&f!==null){var x=l.pending;x===null?f.next=f:(f.next=x.next,x.next=f),l.pending=f}m!==0&&My(a,f,m)}}function ac(e,i,a,l){zn[Va++]=e,zn[Va++]=i,zn[Va++]=a,zn[Va++]=l,Lf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Uf(e,i,a,l){return ac(e,i,a,l),oc(e)}function Ur(e,i){return ac(e,null,null,i),oc(e)}function My(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=e.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(f=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,f&&i!==null&&(f=31-ve(a),e=m.hiddenUpdates,l=e[f],l===null?e[f]=[i]:l.push(i),i.lane=a|536870912),m):null}function oc(e){if(50<Al)throw Al=0,Qd=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ma={};function Dw(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(e,i,a,l){return new Dw(e,i,a,l)}function Bf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function si(e,i){var a=e.alternate;return a===null?(a=Rn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Iy(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function lc(e,i,a,l,f,m){var x=0;if(l=e,typeof e=="function")Bf(e)&&(x=1);else if(typeof e=="string")x=kS(e,a,mt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case S:return e=Rn(31,a,i,f),e.elementType=S,e.lanes=m,e;case L:return Br(a.children,f,m,i);case U:x=8,f|=24;break;case G:return e=Rn(12,a,i,f|2),e.elementType=G,e.lanes=m,e;case tt:return e=Rn(13,a,i,f),e.elementType=tt,e.lanes=m,e;case Z:return e=Rn(19,a,i,f),e.elementType=Z,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:x=10;break t;case W:x=9;break t;case at:x=11;break t;case D:x=14;break t;case N:x=16,l=null;break t}x=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return i=Rn(x,a,i,f),i.elementType=e,i.type=l,i.lanes=m,i}function Br(e,i,a,l){return e=Rn(7,e,l,i),e.lanes=a,e}function zf(e,i,a){return e=Rn(6,e,null,i),e.lanes=a,e}function ky(e){var i=Rn(18,null,null,0);return i.stateNode=e,i}function Ff(e,i,a){return i=Rn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Oy=new WeakMap;function Fn(e,i){if(typeof e=="object"&&e!==null){var a=Oy.get(e);return a!==void 0?a:(i={value:e,source:i,stack:ko(i)},Oy.set(e,i),i)}return{value:e,source:i,stack:ko(i)}}var Ia=[],ka=0,uc=null,rl=0,qn=[],Hn=0,ki=null,Is=1,ks="";function ii(e,i){Ia[ka++]=rl,Ia[ka++]=uc,uc=e,rl=i}function Py(e,i,a){qn[Hn++]=Is,qn[Hn++]=ks,qn[Hn++]=ki,ki=e;var l=Is;e=ks;var f=32-ve(l)-1;l&=~(1<<f),a+=1;var m=32-ve(i)+f;if(30<m){var x=f-f%5;m=(l&(1<<x)-1).toString(32),l>>=x,f-=x,Is=1<<32-ve(i)+f|a<<f|l,ks=m+e}else Is=1<<m|a<<f|l,ks=e}function qf(e){e.return!==null&&(ii(e,1),Py(e,1,0))}function Hf(e){for(;e===uc;)uc=Ia[--ka],Ia[ka]=null,rl=Ia[--ka],Ia[ka]=null;for(;e===ki;)ki=qn[--Hn],qn[Hn]=null,ks=qn[--Hn],qn[Hn]=null,Is=qn[--Hn],qn[Hn]=null}function Ly(e,i){qn[Hn++]=Is,qn[Hn++]=ks,qn[Hn++]=ki,Is=i.id,ks=i.overflow,ki=e}var Qe=null,re=null,Bt=!1,Oi=null,Gn=!1,Gf=Error(r(519));function Pi(e){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw al(Fn(i,e)),Gf}function Uy(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Se]=e,i[ze]=l,a){case"dialog":It("cancel",i),It("close",i);break;case"iframe":case"object":case"embed":It("load",i);break;case"video":case"audio":for(a=0;a<Cl.length;a++)It(Cl[a],i);break;case"source":It("error",i);break;case"img":case"image":case"link":It("error",i),It("load",i);break;case"details":It("toggle",i);break;case"input":It("invalid",i),Fu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":It("invalid",i);break;case"textarea":It("invalid",i),Ci(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||nb(i.textContent,a)?(l.popover!=null&&(It("beforetoggle",i),It("toggle",i)),l.onScroll!=null&&It("scroll",i),l.onScrollEnd!=null&&It("scrollend",i),l.onClick!=null&&(i.onclick=ss),i=!0):i=!1,i||Pi(e,!0)}function By(e){for(Qe=e.return;Qe;)switch(Qe.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Qe=Qe.return}}function Oa(e){if(e!==Qe)return!1;if(!Bt)return By(e),Bt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||um(e.type,e.memoizedProps)),a=!a),a&&re&&Pi(e),By(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));re=hb(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));re=hb(e)}else i===27?(i=re,Zi(e.type)?(e=mm,mm=null,re=e):re=i):re=Qe?Kn(e.stateNode.nextSibling):null;return!0}function zr(){re=Qe=null,Bt=!1}function Yf(){var e=Oi;return e!==null&&(vn===null?vn=e:vn.push.apply(vn,e),Oi=null),e}function al(e){Oi===null?Oi=[e]:Oi.push(e)}var Kf=O(null),Fr=null,ri=null;function Li(e,i,a){ht(Kf,i._currentValue),i._currentValue=a}function ai(e){e._currentValue=Kf.current,it(Kf)}function Qf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function Xf(e,i,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;t:for(;m!==null;){var w=m;m=f;for(var I=0;I<i.length;I++)if(w.context===i[I]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Qf(m.return,a,e),l||(x=null);break t}m=w.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(r(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Qf(x,a,e),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===e){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Pa(e,i,a,l){e=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var w=f.type;Cn(f.pendingProps.value,x.value)||(e!==null?e.push(w):e=[w])}}else if(f===zt.current){if(x=f.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Ml):e=[Ml])}f=f.return}e!==null&&Xf(i,e,a,l),i.flags|=262144}function cc(e){for(e=e.firstContext;e!==null;){if(!Cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function qr(e){Fr=e,ri=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xe(e){return zy(Fr,e)}function hc(e,i){return Fr===null&&qr(e),zy(e,i)}function zy(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ri===null){if(e===null)throw Error(r(308));ri=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else ri=ri.next=i;return a}var jw=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},Vw=n.unstable_scheduleCallback,Mw=n.unstable_NormalPriority,Ce={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $f(){return{controller:new jw,data:new Map,refCount:0}}function ol(e){e.refCount--,e.refCount===0&&Vw(Mw,function(){e.controller.abort()})}var ll=null,Zf=0,La=0,Ua=null;function Iw(e,i){if(ll===null){var a=ll=[];Zf=0,La=tm(),Ua={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Zf++,i.then(Fy,Fy),i}function Fy(){if(--Zf===0&&ll!==null){Ua!==null&&(Ua.status="fulfilled");var e=ll;ll=null,La=0,Ua=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function kw(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var qy=B.S;B.S=function(e,i){Av=un(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Iw(e,i),qy!==null&&qy(e,i)};var Hr=O(null);function Wf(){var e=Hr.current;return e!==null?e:se.pooledCache}function fc(e,i){i===null?ht(Hr,Hr.current):ht(Hr,i.pool)}function Hy(){var e=Wf();return e===null?null:{parent:Ce._currentValue,pool:e}}var Ba=Error(r(460)),Jf=Error(r(474)),dc=Error(r(542)),mc={then:function(){}};function Gy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Yy(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(ss,ss),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Qy(e),e;default:if(typeof i.status=="string")i.then(ss,ss);else{if(e=se,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Qy(e),e}throw Yr=i,Ba}}function Gr(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Yr=a,Ba):a}}var Yr=null;function Ky(){if(Yr===null)throw Error(r(459));var e=Yr;return Yr=null,e}function Qy(e){if(e===Ba||e===dc)throw Error(r(483))}var za=null,ul=0;function pc(e){var i=ul;return ul+=1,za===null&&(za=[]),Yy(za,e,i)}function cl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function gc(e,i){throw i.$$typeof===T?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Xy(e){function i(z,P){if(e){var q=z.deletions;q===null?(z.deletions=[P],z.flags|=16):q.push(P)}}function a(z,P){if(!e)return null;for(;P!==null;)i(z,P),P=P.sibling;return null}function l(z){for(var P=new Map;z!==null;)z.key!==null?P.set(z.key,z):P.set(z.index,z),z=z.sibling;return P}function f(z,P){return z=si(z,P),z.index=0,z.sibling=null,z}function m(z,P,q){return z.index=q,e?(q=z.alternate,q!==null?(q=q.index,q<P?(z.flags|=67108866,P):q):(z.flags|=67108866,P)):(z.flags|=1048576,P)}function x(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function w(z,P,q,et){return P===null||P.tag!==6?(P=zf(q,z.mode,et),P.return=z,P):(P=f(P,q),P.return=z,P)}function I(z,P,q,et){var xt=q.type;return xt===L?J(z,P,q.props.children,et,q.key):P!==null&&(P.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===N&&Gr(xt)===P.type)?(P=f(P,q.props),cl(P,q),P.return=z,P):(P=lc(q.type,q.key,q.props,null,z.mode,et),cl(P,q),P.return=z,P)}function H(z,P,q,et){return P===null||P.tag!==4||P.stateNode.containerInfo!==q.containerInfo||P.stateNode.implementation!==q.implementation?(P=Ff(q,z.mode,et),P.return=z,P):(P=f(P,q.children||[]),P.return=z,P)}function J(z,P,q,et,xt){return P===null||P.tag!==7?(P=Br(q,z.mode,et,xt),P.return=z,P):(P=f(P,q),P.return=z,P)}function nt(z,P,q){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=zf(""+P,z.mode,q),P.return=z,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case j:return q=lc(P.type,P.key,P.props,null,z.mode,q),cl(q,P),q.return=z,q;case k:return P=Ff(P,z.mode,q),P.return=z,P;case N:return P=Gr(P),nt(z,P,q)}if(vt(P)||R(P))return P=Br(P,z.mode,q,null),P.return=z,P;if(typeof P.then=="function")return nt(z,pc(P),q);if(P.$$typeof===Q)return nt(z,hc(z,P),q);gc(z,P)}return null}function Y(z,P,q,et){var xt=P!==null?P.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return xt!==null?null:w(z,P,""+q,et);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case j:return q.key===xt?I(z,P,q,et):null;case k:return q.key===xt?H(z,P,q,et):null;case N:return q=Gr(q),Y(z,P,q,et)}if(vt(q)||R(q))return xt!==null?null:J(z,P,q,et,null);if(typeof q.then=="function")return Y(z,P,pc(q),et);if(q.$$typeof===Q)return Y(z,P,hc(z,q),et);gc(z,q)}return null}function $(z,P,q,et,xt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return z=z.get(q)||null,w(P,z,""+et,xt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case j:return z=z.get(et.key===null?q:et.key)||null,I(P,z,et,xt);case k:return z=z.get(et.key===null?q:et.key)||null,H(P,z,et,xt);case N:return et=Gr(et),$(z,P,q,et,xt)}if(vt(et)||R(et))return z=z.get(q)||null,J(P,z,et,xt,null);if(typeof et.then=="function")return $(z,P,q,pc(et),xt);if(et.$$typeof===Q)return $(z,P,q,hc(P,et),xt);gc(P,et)}return null}function gt(z,P,q,et){for(var xt=null,Ht=null,yt=P,Vt=P=0,Pt=null;yt!==null&&Vt<q.length;Vt++){yt.index>Vt?(Pt=yt,yt=null):Pt=yt.sibling;var Gt=Y(z,yt,q[Vt],et);if(Gt===null){yt===null&&(yt=Pt);break}e&&yt&&Gt.alternate===null&&i(z,yt),P=m(Gt,P,Vt),Ht===null?xt=Gt:Ht.sibling=Gt,Ht=Gt,yt=Pt}if(Vt===q.length)return a(z,yt),Bt&&ii(z,Vt),xt;if(yt===null){for(;Vt<q.length;Vt++)yt=nt(z,q[Vt],et),yt!==null&&(P=m(yt,P,Vt),Ht===null?xt=yt:Ht.sibling=yt,Ht=yt);return Bt&&ii(z,Vt),xt}for(yt=l(yt);Vt<q.length;Vt++)Pt=$(yt,z,Vt,q[Vt],et),Pt!==null&&(e&&Pt.alternate!==null&&yt.delete(Pt.key===null?Vt:Pt.key),P=m(Pt,P,Vt),Ht===null?xt=Pt:Ht.sibling=Pt,Ht=Pt);return e&&yt.forEach(function(nr){return i(z,nr)}),Bt&&ii(z,Vt),xt}function Tt(z,P,q,et){if(q==null)throw Error(r(151));for(var xt=null,Ht=null,yt=P,Vt=P=0,Pt=null,Gt=q.next();yt!==null&&!Gt.done;Vt++,Gt=q.next()){yt.index>Vt?(Pt=yt,yt=null):Pt=yt.sibling;var nr=Y(z,yt,Gt.value,et);if(nr===null){yt===null&&(yt=Pt);break}e&&yt&&nr.alternate===null&&i(z,yt),P=m(nr,P,Vt),Ht===null?xt=nr:Ht.sibling=nr,Ht=nr,yt=Pt}if(Gt.done)return a(z,yt),Bt&&ii(z,Vt),xt;if(yt===null){for(;!Gt.done;Vt++,Gt=q.next())Gt=nt(z,Gt.value,et),Gt!==null&&(P=m(Gt,P,Vt),Ht===null?xt=Gt:Ht.sibling=Gt,Ht=Gt);return Bt&&ii(z,Vt),xt}for(yt=l(yt);!Gt.done;Vt++,Gt=q.next())Gt=$(yt,z,Vt,Gt.value,et),Gt!==null&&(e&&Gt.alternate!==null&&yt.delete(Gt.key===null?Vt:Gt.key),P=m(Gt,P,Vt),Ht===null?xt=Gt:Ht.sibling=Gt,Ht=Gt);return e&&yt.forEach(function(YS){return i(z,YS)}),Bt&&ii(z,Vt),xt}function ee(z,P,q,et){if(typeof q=="object"&&q!==null&&q.type===L&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case j:t:{for(var xt=q.key;P!==null;){if(P.key===xt){if(xt=q.type,xt===L){if(P.tag===7){a(z,P.sibling),et=f(P,q.props.children),et.return=z,z=et;break t}}else if(P.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===N&&Gr(xt)===P.type){a(z,P.sibling),et=f(P,q.props),cl(et,q),et.return=z,z=et;break t}a(z,P);break}else i(z,P);P=P.sibling}q.type===L?(et=Br(q.props.children,z.mode,et,q.key),et.return=z,z=et):(et=lc(q.type,q.key,q.props,null,z.mode,et),cl(et,q),et.return=z,z=et)}return x(z);case k:t:{for(xt=q.key;P!==null;){if(P.key===xt)if(P.tag===4&&P.stateNode.containerInfo===q.containerInfo&&P.stateNode.implementation===q.implementation){a(z,P.sibling),et=f(P,q.children||[]),et.return=z,z=et;break t}else{a(z,P);break}else i(z,P);P=P.sibling}et=Ff(q,z.mode,et),et.return=z,z=et}return x(z);case N:return q=Gr(q),ee(z,P,q,et)}if(vt(q))return gt(z,P,q,et);if(R(q)){if(xt=R(q),typeof xt!="function")throw Error(r(150));return q=xt.call(q),Tt(z,P,q,et)}if(typeof q.then=="function")return ee(z,P,pc(q),et);if(q.$$typeof===Q)return ee(z,P,hc(z,q),et);gc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,P!==null&&P.tag===6?(a(z,P.sibling),et=f(P,q),et.return=z,z=et):(a(z,P),et=zf(q,z.mode,et),et.return=z,z=et),x(z)):a(z,P)}return function(z,P,q,et){try{ul=0;var xt=ee(z,P,q,et);return za=null,xt}catch(yt){if(yt===Ba||yt===dc)throw yt;var Ht=Rn(29,yt,null,z.mode);return Ht.lanes=et,Ht.return=z,Ht}finally{}}}var Kr=Xy(!0),$y=Xy(!1),Ui=!1;function td(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ed(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Bi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function zi(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Kt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=oc(e),My(e,null,a),i}return ac(e,l,i,a),oc(e)}function hl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Lo(e,a)}}function nd(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var sd=!1;function fl(){if(sd){var e=Ua;if(e!==null)throw e}}function dl(e,i,a,l){sd=!1;var f=e.updateQueue;Ui=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var I=w,H=I.next;I.next=null,x===null?m=H:x.next=H,x=I;var J=e.alternate;J!==null&&(J=J.updateQueue,w=J.lastBaseUpdate,w!==x&&(w===null?J.firstBaseUpdate=H:w.next=H,J.lastBaseUpdate=I))}if(m!==null){var nt=f.baseState;x=0,J=H=I=null,w=m;do{var Y=w.lane&-536870913,$=Y!==w.lane;if($?(Ot&Y)===Y:(l&Y)===Y){Y!==0&&Y===La&&(sd=!0),J!==null&&(J=J.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var gt=e,Tt=w;Y=i;var ee=a;switch(Tt.tag){case 1:if(gt=Tt.payload,typeof gt=="function"){nt=gt.call(ee,nt,Y);break t}nt=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=Tt.payload,Y=typeof gt=="function"?gt.call(ee,nt,Y):gt,Y==null)break t;nt=_({},nt,Y);break t;case 2:Ui=!0}}Y=w.callback,Y!==null&&(e.flags|=64,$&&(e.flags|=8192),$=f.callbacks,$===null?f.callbacks=[Y]:$.push(Y))}else $={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},J===null?(H=J=$,I=nt):J=J.next=$,x|=Y;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;$=w,w=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);J===null&&(I=nt),f.baseState=I,f.firstBaseUpdate=H,f.lastBaseUpdate=J,m===null&&(f.shared.lanes=0),Yi|=x,e.lanes=x,e.memoizedState=nt}}function Zy(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function Wy(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Zy(a[e],i)}var Fa=O(null),yc=O(0);function Jy(e,i){e=pi,ht(yc,e),ht(Fa,i),pi=e|i.baseLanes}function id(){ht(yc,pi),ht(Fa,Fa.current)}function rd(){pi=yc.current,it(Fa),it(yc)}var Dn=O(null),Yn=null;function Fi(e){var i=e.alternate;ht(xe,xe.current&1),ht(Dn,e),Yn===null&&(i===null||Fa.current!==null||i.memoizedState!==null)&&(Yn=e)}function ad(e){ht(xe,xe.current),ht(Dn,e),Yn===null&&(Yn=e)}function t0(e){e.tag===22?(ht(xe,xe.current),ht(Dn,e),Yn===null&&(Yn=e)):qi()}function qi(){ht(xe,xe.current),ht(Dn,Dn.current)}function jn(e){it(Dn),Yn===e&&(Yn=null),it(xe)}var xe=O(0);function vc(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||fm(a)||dm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var oi=0,Dt=null,Jt=null,Re=null,bc=!1,qa=!1,Qr=!1,xc=0,ml=0,Ha=null,Ow=0;function me(){throw Error(r(321))}function od(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!Cn(e[a],i[a]))return!1;return!0}function ld(e,i,a,l,f,m){return oi=m,Dt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=e===null||e.memoizedState===null?P0:Ed,Qr=!1,m=a(l,f),Qr=!1,qa&&(m=n0(i,a,l,f)),e0(e),m}function e0(e){B.H=yl;var i=Jt!==null&&Jt.next!==null;if(oi=0,Re=Jt=Dt=null,bc=!1,ml=0,Ha=null,i)throw Error(r(300));e===null||De||(e=e.dependencies,e!==null&&cc(e)&&(De=!0))}function n0(e,i,a,l){Dt=e;var f=0;do{if(qa&&(Ha=null),ml=0,qa=!1,25<=f)throw Error(r(301));if(f+=1,Re=Jt=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=L0,m=i(a,l)}while(qa);return m}function Pw(){var e=B.H,i=e.useState()[0];return i=typeof i.then=="function"?pl(i):i,e=e.useState()[0],(Jt!==null?Jt.memoizedState:null)!==e&&(Dt.flags|=1024),i}function ud(){var e=xc!==0;return xc=0,e}function cd(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function hd(e){if(bc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}bc=!1}oi=0,Re=Jt=Dt=null,qa=!1,ml=xc=0,Ha=null}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?Dt.memoizedState=Re=e:Re=Re.next=e,Re}function _e(){if(Jt===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var i=Re===null?Dt.memoizedState:Re.next;if(i!==null)Re=i,Jt=e;else{if(e===null)throw Dt.alternate===null?Error(r(467)):Error(r(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Re===null?Dt.memoizedState=Re=e:Re=Re.next=e}return Re}function _c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(e){var i=ml;return ml+=1,Ha===null&&(Ha=[]),e=Yy(Ha,e,i),i=Dt,(Re===null?i.memoizedState:Re.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?P0:Ed),e}function Tc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return pl(e);if(e.$$typeof===Q)return Xe(e)}throw Error(r(438,String(e)))}function fd(e){var i=null,a=Dt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Dt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=_c(),Dt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=A;return i.index++,a}function li(e,i){return typeof i=="function"?i(e):i}function Ec(e){var i=_e();return dd(i,Jt,e)}function dd(e,i,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=e.baseQueue,m=l.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}i.baseQueue=f=m,l.pending=null}if(m=e.baseState,f===null)e.memoizedState=m;else{i=f.next;var w=x=null,I=null,H=i,J=!1;do{var nt=H.lane&-536870913;if(nt!==H.lane?(Ot&nt)===nt:(oi&nt)===nt){var Y=H.revertLane;if(Y===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),nt===La&&(J=!0);else if((oi&Y)===Y){H=H.next,Y===La&&(J=!0);continue}else nt={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(w=I=nt,x=m):I=I.next=nt,Dt.lanes|=Y,Yi|=Y;nt=H.action,Qr&&a(m,nt),m=H.hasEagerState?H.eagerState:a(m,nt)}else Y={lane:nt,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(w=I=Y,x=m):I=I.next=Y,Dt.lanes|=nt,Yi|=nt;H=H.next}while(H!==null&&H!==i);if(I===null?x=m:I.next=w,!Cn(m,e.memoizedState)&&(De=!0,J&&(a=Ua,a!==null)))throw a;e.memoizedState=m,e.baseState=x,e.baseQueue=I,l.lastRenderedState=m}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function md(e){var i=_e(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do m=e(m,x.action),x=x.next;while(x!==f);Cn(m,i.memoizedState)||(De=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,l]}function s0(e,i,a){var l=Dt,f=_e(),m=Bt;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=i();var x=!Cn((Jt||f).memoizedState,a);if(x&&(f.memoizedState=a,De=!0),f=f.queue,yd(a0.bind(null,l,f,e),[e]),f.getSnapshot!==i||x||Re!==null&&Re.memoizedState.tag&1){if(l.flags|=2048,Ga(9,{destroy:void 0},r0.bind(null,l,f,a,i),null),se===null)throw Error(r(349));m||(oi&127)!==0||i0(l,i,a)}return a}function i0(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Dt.updateQueue,i===null?(i=_c(),Dt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function r0(e,i,a,l){i.value=a,i.getSnapshot=l,o0(i)&&l0(e)}function a0(e,i,a){return a(function(){o0(i)&&l0(e)})}function o0(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!Cn(e,a)}catch{return!0}}function l0(e){var i=Ur(e,2);i!==null&&bn(i,e,2)}function pd(e){var i=hn();if(typeof e=="function"){var a=e;if(e=a(),Qr){On(!0);try{a()}finally{On(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:e},i}function u0(e,i,a,l){return e.baseState=a,dd(e,Jt,typeof l=="function"?l:li)}function Lw(e,i,a,l,f){if(Ac(e))throw Error(r(485));if(e=i.action,e!==null){var m={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};B.T!==null?a(!0):m.isTransition=!1,l(m),a=i.pending,a===null?(m.next=i.pending=m,c0(i,m)):(m.next=a.next,i.pending=a.next=m)}}function c0(e,i){var a=i.action,l=i.payload,f=e.state;if(i.isTransition){var m=B.T,x={};B.T=x;try{var w=a(f,l),I=B.S;I!==null&&I(x,w),h0(e,i,w)}catch(H){gd(e,i,H)}finally{m!==null&&x.types!==null&&(m.types=x.types),B.T=m}}else try{m=a(f,l),h0(e,i,m)}catch(H){gd(e,i,H)}}function h0(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){f0(e,i,l)},function(l){return gd(e,i,l)}):f0(e,i,a)}function f0(e,i,a){i.status="fulfilled",i.value=a,d0(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,c0(e,a)))}function gd(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,d0(i),i=i.next;while(i!==l)}e.action=null}function d0(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function m0(e,i){return i}function p0(e,i){if(Bt){var a=se.formState;if(a!==null){t:{var l=Dt;if(Bt){if(re){e:{for(var f=re,m=Gn;f.nodeType!==8;){if(!m){f=null;break e}if(f=Kn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){re=Kn(f.nextSibling),l=f.data==="F!";break t}}Pi(l)}l=!1}l&&(i=a[0])}}return a=hn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m0,lastRenderedState:i},a.queue=l,a=I0.bind(null,Dt,l),l.dispatch=a,l=pd(!1),m=Td.bind(null,Dt,!1,l.queue),l=hn(),f={state:i,dispatch:null,action:e,pending:null},l.queue=f,a=Lw.bind(null,Dt,f,m,a),f.dispatch=a,l.memoizedState=e,[i,a,!1]}function g0(e){var i=_e();return y0(i,Jt,e)}function y0(e,i,a){if(i=dd(e,i,m0)[0],e=Ec(li)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=pl(i)}catch(x){throw x===Ba?dc:x}else l=i;i=_e();var f=i.queue,m=f.dispatch;return a!==i.memoizedState&&(Dt.flags|=2048,Ga(9,{destroy:void 0},Uw.bind(null,f,a),null)),[l,m,e]}function Uw(e,i){e.action=i}function v0(e){var i=_e(),a=Jt;if(a!==null)return y0(i,a,e);_e(),i=i.memoizedState,a=_e();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Ga(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=Dt.updateQueue,i===null&&(i=_c(),Dt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function b0(){return _e().memoizedState}function wc(e,i,a,l){var f=hn();Dt.flags|=e,f.memoizedState=Ga(1|i,{destroy:void 0},a,l===void 0?null:l)}function Sc(e,i,a,l){var f=_e();l=l===void 0?null:l;var m=f.memoizedState.inst;Jt!==null&&l!==null&&od(l,Jt.memoizedState.deps)?f.memoizedState=Ga(i,m,a,l):(Dt.flags|=e,f.memoizedState=Ga(1|i,m,a,l))}function x0(e,i){wc(8390656,8,e,i)}function yd(e,i){Sc(2048,8,e,i)}function Bw(e){Dt.flags|=4;var i=Dt.updateQueue;if(i===null)i=_c(),Dt.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function _0(e){var i=_e().memoizedState;return Bw({ref:i,nextImpl:e}),function(){if((Kt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function T0(e,i){return Sc(4,2,e,i)}function E0(e,i){return Sc(4,4,e,i)}function w0(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function S0(e,i,a){a=a!=null?a.concat([e]):null,Sc(4,4,w0.bind(null,i,e),a)}function vd(){}function A0(e,i){var a=_e();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&od(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function N0(e,i){var a=_e();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&od(i,l[1]))return l[0];if(l=e(),Qr){On(!0);try{e()}finally{On(!1)}}return a.memoizedState=[l,i],l}function bd(e,i,a){return a===void 0||(oi&1073741824)!==0&&(Ot&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=Cv(),Dt.lanes|=e,Yi|=e,a)}function C0(e,i,a,l){return Cn(a,i)?a:Fa.current!==null?(e=bd(e,a,l),Cn(e,i)||(De=!0),e):(oi&42)===0||(oi&1073741824)!==0&&(Ot&261930)===0?(De=!0,e.memoizedState=a):(e=Cv(),Dt.lanes|=e,Yi|=e,i)}function R0(e,i,a,l,f){var m=ot.p;ot.p=m!==0&&8>m?m:8;var x=B.T,w={};B.T=w,Td(e,!1,i,a);try{var I=f(),H=B.S;if(H!==null&&H(w,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var J=kw(I,l);gl(e,i,J,In(e))}else gl(e,i,l,In(e))}catch(nt){gl(e,i,{then:function(){},status:"rejected",reason:nt},In())}finally{ot.p=m,x!==null&&w.types!==null&&(x.types=w.types),B.T=x}}function zw(){}function xd(e,i,a,l){if(e.tag!==5)throw Error(r(476));var f=D0(e).queue;R0(e,f,i,ct,a===null?zw:function(){return j0(e),a(l)})}function D0(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:ct},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function j0(e){var i=D0(e);i.next===null&&(i=e.alternate.memoizedState),gl(e,i.next.queue,{},In())}function _d(){return Xe(Ml)}function V0(){return _e().memoizedState}function M0(){return _e().memoizedState}function Fw(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=In();e=Bi(a);var l=zi(i,e,a);l!==null&&(bn(l,i,a),hl(l,i,a)),i={cache:$f()},e.payload=i;return}i=i.return}}function qw(e,i,a){var l=In();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ac(e)?k0(i,a):(a=Uf(e,i,a,l),a!==null&&(bn(a,e,l),O0(a,i,l)))}function I0(e,i,a){var l=In();gl(e,i,a,l)}function gl(e,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ac(e))k0(i,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var x=i.lastRenderedState,w=m(x,a);if(f.hasEagerState=!0,f.eagerState=w,Cn(w,x))return ac(e,i,f,0),se===null&&rc(),!1}catch{}finally{}if(a=Uf(e,i,f,l),a!==null)return bn(a,e,l),O0(a,i,l),!0}return!1}function Td(e,i,a,l){if(l={lane:2,revertLane:tm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ac(e)){if(i)throw Error(r(479))}else i=Uf(e,a,l,2),i!==null&&bn(i,e,2)}function Ac(e){var i=e.alternate;return e===Dt||i!==null&&i===Dt}function k0(e,i){qa=bc=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function O0(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Lo(e,a)}}var yl={readContext:Xe,use:Tc,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useLayoutEffect:me,useInsertionEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useSyncExternalStore:me,useId:me,useHostTransitionStatus:me,useFormState:me,useActionState:me,useOptimistic:me,useMemoCache:me,useCacheRefresh:me};yl.useEffectEvent=me;var P0={readContext:Xe,use:Tc,useCallback:function(e,i){return hn().memoizedState=[e,i===void 0?null:i],e},useContext:Xe,useEffect:x0,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,wc(4194308,4,w0.bind(null,i,e),a)},useLayoutEffect:function(e,i){return wc(4194308,4,e,i)},useInsertionEffect:function(e,i){wc(4,2,e,i)},useMemo:function(e,i){var a=hn();i=i===void 0?null:i;var l=e();if(Qr){On(!0);try{e()}finally{On(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=hn();if(a!==void 0){var f=a(i);if(Qr){On(!0);try{a(i)}finally{On(!1)}}}else f=i;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=qw.bind(null,Dt,e),[l.memoizedState,e]},useRef:function(e){var i=hn();return e={current:e},i.memoizedState=e},useState:function(e){e=pd(e);var i=e.queue,a=I0.bind(null,Dt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:vd,useDeferredValue:function(e,i){var a=hn();return bd(a,e,i)},useTransition:function(){var e=pd(!1);return e=R0.bind(null,Dt,e.queue,!0,!1),hn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=Dt,f=hn();if(Bt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),se===null)throw Error(r(349));(Ot&127)!==0||i0(l,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,x0(a0.bind(null,l,m,e),[e]),l.flags|=2048,Ga(9,{destroy:void 0},r0.bind(null,l,m,a,i),null),a},useId:function(){var e=hn(),i=se.identifierPrefix;if(Bt){var a=ks,l=Is;a=(l&~(1<<32-ve(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=xc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Ow++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:_d,useFormState:p0,useActionState:p0,useOptimistic:function(e){var i=hn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Td.bind(null,Dt,!0,a),a.dispatch=i,[e,i]},useMemoCache:fd,useCacheRefresh:function(){return hn().memoizedState=Fw.bind(null,Dt)},useEffectEvent:function(e){var i=hn(),a={impl:e};return i.memoizedState=a,function(){if((Kt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Ed={readContext:Xe,use:Tc,useCallback:A0,useContext:Xe,useEffect:yd,useImperativeHandle:S0,useInsertionEffect:T0,useLayoutEffect:E0,useMemo:N0,useReducer:Ec,useRef:b0,useState:function(){return Ec(li)},useDebugValue:vd,useDeferredValue:function(e,i){var a=_e();return C0(a,Jt.memoizedState,e,i)},useTransition:function(){var e=Ec(li)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:pl(e),i]},useSyncExternalStore:s0,useId:V0,useHostTransitionStatus:_d,useFormState:g0,useActionState:g0,useOptimistic:function(e,i){var a=_e();return u0(a,Jt,e,i)},useMemoCache:fd,useCacheRefresh:M0};Ed.useEffectEvent=_0;var L0={readContext:Xe,use:Tc,useCallback:A0,useContext:Xe,useEffect:yd,useImperativeHandle:S0,useInsertionEffect:T0,useLayoutEffect:E0,useMemo:N0,useReducer:md,useRef:b0,useState:function(){return md(li)},useDebugValue:vd,useDeferredValue:function(e,i){var a=_e();return Jt===null?bd(a,e,i):C0(a,Jt.memoizedState,e,i)},useTransition:function(){var e=md(li)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:pl(e),i]},useSyncExternalStore:s0,useId:V0,useHostTransitionStatus:_d,useFormState:v0,useActionState:v0,useOptimistic:function(e,i){var a=_e();return Jt!==null?u0(a,Jt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:fd,useCacheRefresh:M0};L0.useEffectEvent=_0;function wd(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:_({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Sd={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=In(),f=Bi(l);f.payload=i,a!=null&&(f.callback=a),i=zi(e,f,l),i!==null&&(bn(i,e,l),hl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=In(),f=Bi(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=zi(e,f,l),i!==null&&(bn(i,e,l),hl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=In(),l=Bi(a);l.tag=2,i!=null&&(l.callback=i),i=zi(e,l,a),i!==null&&(bn(i,e,a),hl(i,e,a))}};function U0(e,i,a,l,f,m,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,x):i.prototype&&i.prototype.isPureReactComponent?!sl(a,l)||!sl(f,m):!0}function B0(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Sd.enqueueReplaceState(i,i.state,null)}function Xr(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=_({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function z0(e){ic(e)}function F0(e){console.error(e)}function q0(e){ic(e)}function Nc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function H0(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Ad(e,i,a){return a=Bi(a),a.tag=3,a.payload={element:null},a.callback=function(){Nc(e,i)},a}function G0(e){return e=Bi(e),e.tag=3,e}function Y0(e,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;e.payload=function(){return f(m)},e.callback=function(){H0(i,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){H0(i,a,l),typeof f!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function Hw(e,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Pa(i,a,f,!0),a=Dn.current,a!==null){switch(a.tag){case 31:case 13:return Yn===null?Uc():a.alternate===null&&pe===0&&(pe=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===mc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Zd(e,l,f)),!1;case 22:return a.flags|=65536,l===mc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Zd(e,l,f)),!1}throw Error(r(435,a.tag))}return Zd(e,l,f),Uc(),!1}if(Bt)return i=Dn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Gf&&(e=Error(r(422),{cause:l}),al(Fn(e,a)))):(l!==Gf&&(i=Error(r(423),{cause:l}),al(Fn(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Fn(l,a),f=Ad(e.stateNode,l,f),nd(e,f),pe!==4&&(pe=2)),!1;var m=Error(r(520),{cause:l});if(m=Fn(m,a),Sl===null?Sl=[m]:Sl.push(m),pe!==4&&(pe=2),i===null)return!0;l=Fn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=Ad(a.stateNode,l,e),nd(a,e),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ki===null||!Ki.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=G0(f),Y0(f,e,a,l),nd(a,f),!1}a=a.return}while(a!==null);return!1}var Nd=Error(r(461)),De=!1;function $e(e,i,a,l){i.child=e===null?$y(i,null,a,l):Kr(i,e.child,a,l)}function K0(e,i,a,l,f){a=a.render;var m=i.ref;if("ref"in l){var x={};for(var w in l)w!=="ref"&&(x[w]=l[w])}else x=l;return qr(i),l=ld(e,i,a,x,m,f),w=ud(),e!==null&&!De?(cd(e,i,f),ui(e,i,f)):(Bt&&w&&qf(i),i.flags|=1,$e(e,i,l,f),i.child)}function Q0(e,i,a,l,f){if(e===null){var m=a.type;return typeof m=="function"&&!Bf(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,X0(e,i,m,l,f)):(e=lc(a.type,null,l,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(m=e.child,!kd(e,f)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(x,l)&&e.ref===i.ref)return ui(e,i,f)}return i.flags|=1,e=si(m,l),e.ref=i.ref,e.return=i,i.child=e}function X0(e,i,a,l,f){if(e!==null){var m=e.memoizedProps;if(sl(m,l)&&e.ref===i.ref)if(De=!1,i.pendingProps=l=m,kd(e,f))(e.flags&131072)!==0&&(De=!0);else return i.lanes=e.lanes,ui(e,i,f)}return Cd(e,i,a,l,f)}function $0(e,i,a,l){var f=l.children,m=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(l=i.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,i.child=null;return Z0(e,i,m,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&fc(i,m!==null?m.cachePool:null),m!==null?Jy(i,m):id(),t0(i);else return l=i.lanes=536870912,Z0(e,i,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(fc(i,m.cachePool),Jy(i,m),qi(),i.memoizedState=null):(e!==null&&fc(i,null),id(),qi());return $e(e,i,f,a),i.child}function vl(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Z0(e,i,a,l,f){var m=Wf();return m=m===null?null:{parent:Ce._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},e!==null&&fc(i,null),id(),t0(i),e!==null&&Pa(e,i,l,!0),i.childLanes=f,null}function Cc(e,i){return i=Dc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function W0(e,i,a){return Kr(i,e.child,null,a),e=Cc(i,i.pendingProps),e.flags|=2,jn(i),i.memoizedState=null,e}function Gw(e,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Bt){if(l.mode==="hidden")return e=Cc(i,l),i.lanes=536870912,vl(null,e);if(ad(i),(e=re)?(e=cb(e,Gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:ki!==null?{id:Is,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},a=ky(e),a.return=i,i.child=a,Qe=i,re=null)):e=null,e===null)throw Pi(i);return i.lanes=536870912,null}return Cc(i,l)}var m=e.memoizedState;if(m!==null){var x=m.dehydrated;if(ad(i),f)if(i.flags&256)i.flags&=-257,i=W0(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(r(558));else if(De||Pa(e,i,a,!1),f=(a&e.childLanes)!==0,De||f){if(l=se,l!==null&&(x=Uo(l,a),x!==0&&x!==m.retryLane))throw m.retryLane=x,Ur(e,x),bn(l,e,x),Nd;Uc(),i=W0(e,i,a)}else e=m.treeContext,re=Kn(x.nextSibling),Qe=i,Bt=!0,Oi=null,Gn=!1,e!==null&&Ly(i,e),i=Cc(i,l),i.flags|=4096;return i}return e=si(e.child,{mode:l.mode,children:l.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Rc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Cd(e,i,a,l,f){return qr(i),a=ld(e,i,a,l,void 0,f),l=ud(),e!==null&&!De?(cd(e,i,f),ui(e,i,f)):(Bt&&l&&qf(i),i.flags|=1,$e(e,i,a,f),i.child)}function J0(e,i,a,l,f,m){return qr(i),i.updateQueue=null,a=n0(i,l,a,f),e0(e),l=ud(),e!==null&&!De?(cd(e,i,m),ui(e,i,m)):(Bt&&l&&qf(i),i.flags|=1,$e(e,i,a,m),i.child)}function tv(e,i,a,l,f){if(qr(i),i.stateNode===null){var m=Ma,x=a.contextType;typeof x=="object"&&x!==null&&(m=Xe(x)),m=new a(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Sd,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},td(i),x=a.contextType,m.context=typeof x=="object"&&x!==null?Xe(x):Ma,m.state=i.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(wd(i,a,x,l),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&Sd.enqueueReplaceState(m,m.state,null),dl(i,l,m,f),fl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){m=i.stateNode;var w=i.memoizedProps,I=Xr(a,w);m.props=I;var H=m.context,J=a.contextType;x=Ma,typeof J=="object"&&J!==null&&(x=Xe(J));var nt=a.getDerivedStateFromProps;J=typeof nt=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,J||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||H!==x)&&B0(i,m,l,x),Ui=!1;var Y=i.memoizedState;m.state=Y,dl(i,l,m,f),fl(),H=i.memoizedState,w||Y!==H||Ui?(typeof nt=="function"&&(wd(i,a,nt,l),H=i.memoizedState),(I=Ui||U0(i,a,I,l,Y,H,x))?(J||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=H),m.props=l,m.state=H,m.context=x,l=I):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,ed(e,i),x=i.memoizedProps,J=Xr(a,x),m.props=J,nt=i.pendingProps,Y=m.context,H=a.contextType,I=Ma,typeof H=="object"&&H!==null&&(I=Xe(H)),w=a.getDerivedStateFromProps,(H=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==nt||Y!==I)&&B0(i,m,l,I),Ui=!1,Y=i.memoizedState,m.state=Y,dl(i,l,m,f),fl();var $=i.memoizedState;x!==nt||Y!==$||Ui||e!==null&&e.dependencies!==null&&cc(e.dependencies)?(typeof w=="function"&&(wd(i,a,w,l),$=i.memoizedState),(J=Ui||U0(i,a,J,l,Y,$,I)||e!==null&&e.dependencies!==null&&cc(e.dependencies))?(H||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,$,I),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,$,I)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&Y===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&Y===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=$),m.props=l,m.state=$,m.context=I,l=J):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&Y===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&Y===e.memoizedState||(i.flags|=1024),l=!1)}return m=l,Rc(e,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,e!==null&&l?(i.child=Kr(i,e.child,null,f),i.child=Kr(i,null,a,f)):$e(e,i,a,f),i.memoizedState=m.state,e=i.child):e=ui(e,i,f),e}function ev(e,i,a,l){return zr(),i.flags|=256,$e(e,i,a,l),i.child}var Rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dd(e){return{baseLanes:e,cachePool:Hy()}}function jd(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Mn),e}function nv(e,i,a){var l=i.pendingProps,f=!1,m=(i.flags&128)!==0,x;if((x=m)||(x=e!==null&&e.memoizedState===null?!1:(xe.current&2)!==0),x&&(f=!0,i.flags&=-129),x=(i.flags&32)!==0,i.flags&=-33,e===null){if(Bt){if(f?Fi(i):qi(),(e=re)?(e=cb(e,Gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:ki!==null?{id:Is,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},a=ky(e),a.return=i,i.child=a,Qe=i,re=null)):e=null,e===null)throw Pi(i);return dm(e)?i.lanes=32:i.lanes=536870912,null}var w=l.children;return l=l.fallback,f?(qi(),f=i.mode,w=Dc({mode:"hidden",children:w},f),l=Br(l,f,a,null),w.return=i,l.return=i,w.sibling=l,i.child=w,l=i.child,l.memoizedState=Dd(a),l.childLanes=jd(e,x,a),i.memoizedState=Rd,vl(null,l)):(Fi(i),Vd(i,w))}var I=e.memoizedState;if(I!==null&&(w=I.dehydrated,w!==null)){if(m)i.flags&256?(Fi(i),i.flags&=-257,i=Md(e,i,a)):i.memoizedState!==null?(qi(),i.child=e.child,i.flags|=128,i=null):(qi(),w=l.fallback,f=i.mode,l=Dc({mode:"visible",children:l.children},f),w=Br(w,f,a,null),w.flags|=2,l.return=i,w.return=i,l.sibling=w,i.child=l,Kr(i,e.child,null,a),l=i.child,l.memoizedState=Dd(a),l.childLanes=jd(e,x,a),i.memoizedState=Rd,i=vl(null,l));else if(Fi(i),dm(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var H=x.dgst;x=H,l=Error(r(419)),l.stack="",l.digest=x,al({value:l,source:null,stack:null}),i=Md(e,i,a)}else if(De||Pa(e,i,a,!1),x=(a&e.childLanes)!==0,De||x){if(x=se,x!==null&&(l=Uo(x,a),l!==0&&l!==I.retryLane))throw I.retryLane=l,Ur(e,l),bn(x,e,l),Nd;fm(w)||Uc(),i=Md(e,i,a)}else fm(w)?(i.flags|=192,i.child=e.child,i=null):(e=I.treeContext,re=Kn(w.nextSibling),Qe=i,Bt=!0,Oi=null,Gn=!1,e!==null&&Ly(i,e),i=Vd(i,l.children),i.flags|=4096);return i}return f?(qi(),w=l.fallback,f=i.mode,I=e.child,H=I.sibling,l=si(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,H!==null?w=si(H,w):(w=Br(w,f,a,null),w.flags|=2),w.return=i,l.return=i,l.sibling=w,i.child=l,vl(null,l),l=i.child,w=e.child.memoizedState,w===null?w=Dd(a):(f=w.cachePool,f!==null?(I=Ce._currentValue,f=f.parent!==I?{parent:I,pool:I}:f):f=Hy(),w={baseLanes:w.baseLanes|a,cachePool:f}),l.memoizedState=w,l.childLanes=jd(e,x,a),i.memoizedState=Rd,vl(e.child,l)):(Fi(i),a=e.child,e=a.sibling,a=si(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(x=i.deletions,x===null?(i.deletions=[e],i.flags|=16):x.push(e)),i.child=a,i.memoizedState=null,a)}function Vd(e,i){return i=Dc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Dc(e,i){return e=Rn(22,e,null,i),e.lanes=0,e}function Md(e,i,a){return Kr(i,e.child,null,a),e=Vd(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function sv(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Qf(e.return,i,a)}function Id(e,i,a,l,f,m){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:m}:(x.isBackwards=i,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=f,x.treeForkCount=m)}function iv(e,i,a){var l=i.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var x=xe.current,w=(x&2)!==0;if(w?(x=x&1|2,i.flags|=128):x&=1,ht(xe,x),$e(e,i,l,a),l=Bt?rl:0,!w&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sv(e,a,i);else if(e.tag===19)sv(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&vc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Id(i,!1,f,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&vc(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Id(i,!0,a,null,m,l);break;case"together":Id(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ui(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Yi|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Pa(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=si(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=si(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function kd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&cc(e)))}function Yw(e,i,a){switch(i.tag){case 3:Oe(i,i.stateNode.containerInfo),Li(i,Ce,e.memoizedState.cache),zr();break;case 27:case 5:_r(i);break;case 4:Oe(i,i.stateNode.containerInfo);break;case 10:Li(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,ad(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Fi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?nv(e,i,a):(Fi(i),e=ui(e,i,a),e!==null?e.sibling:null);Fi(i);break;case 19:var f=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Pa(e,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return iv(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ht(xe,xe.current),l)break;return null;case 22:return i.lanes=0,$0(e,i,a,i.pendingProps);case 24:Li(i,Ce,e.memoizedState.cache)}return ui(e,i,a)}function rv(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)De=!0;else{if(!kd(e,a)&&(i.flags&128)===0)return De=!1,Yw(e,i,a);De=(e.flags&131072)!==0}else De=!1,Bt&&(i.flags&1048576)!==0&&Py(i,rl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(e=Gr(i.elementType),i.type=e,typeof e=="function")Bf(e)?(l=Xr(e,l),i.tag=1,i=tv(null,i,e,l,a)):(i.tag=0,i=Cd(null,i,e,l,a));else{if(e!=null){var f=e.$$typeof;if(f===at){i.tag=11,i=K0(null,i,e,l,a);break t}else if(f===D){i.tag=14,i=Q0(null,i,e,l,a);break t}}throw i=lt(e)||e,Error(r(306,i,""))}}return i;case 0:return Cd(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Xr(l,i.pendingProps),tv(e,i,l,f,a);case 3:t:{if(Oe(i,i.stateNode.containerInfo),e===null)throw Error(r(387));l=i.pendingProps;var m=i.memoizedState;f=m.element,ed(e,i),dl(i,l,null,a);var x=i.memoizedState;if(l=x.cache,Li(i,Ce,l),l!==m.cache&&Xf(i,[Ce],a,!0),fl(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=ev(e,i,l,a);break t}else if(l!==f){f=Fn(Error(r(424)),i),al(f),i=ev(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(re=Kn(e.firstChild),Qe=i,Bt=!0,Oi=null,Gn=!0,a=$y(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(zr(),l===f){i=ui(e,i,a);break t}$e(e,i,l,a)}i=i.child}return i;case 26:return Rc(e,i),e===null?(a=gb(i.type,null,i.pendingProps,null))?i.memoizedState=a:Bt||(a=i.type,e=i.pendingProps,l=Yc(jt.current).createElement(a),l[Se]=i,l[ze]=e,Ze(l,a,e),Ae(l),i.stateNode=l):i.memoizedState=gb(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return _r(i),e===null&&Bt&&(l=i.stateNode=db(i.type,i.pendingProps,jt.current),Qe=i,Gn=!0,f=re,Zi(i.type)?(mm=f,re=Kn(l.firstChild)):re=f),$e(e,i,i.pendingProps.children,a),Rc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Bt&&((f=l=re)&&(l=TS(l,i.type,i.pendingProps,Gn),l!==null?(i.stateNode=l,Qe=i,re=Kn(l.firstChild),Gn=!1,f=!0):f=!1),f||Pi(i)),_r(i),f=i.type,m=i.pendingProps,x=e!==null?e.memoizedProps:null,l=m.children,um(f,m)?l=null:x!==null&&um(f,x)&&(i.flags|=32),i.memoizedState!==null&&(f=ld(e,i,Pw,null,null,a),Ml._currentValue=f),Rc(e,i),$e(e,i,l,a),i.child;case 6:return e===null&&Bt&&((e=a=re)&&(a=ES(a,i.pendingProps,Gn),a!==null?(i.stateNode=a,Qe=i,re=null,e=!0):e=!1),e||Pi(i)),null;case 13:return nv(e,i,a);case 4:return Oe(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Kr(i,null,l,a):$e(e,i,l,a),i.child;case 11:return K0(e,i,i.type,i.pendingProps,a);case 7:return $e(e,i,i.pendingProps,a),i.child;case 8:return $e(e,i,i.pendingProps.children,a),i.child;case 12:return $e(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Li(i,i.type,l.value),$e(e,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,qr(i),f=Xe(f),l=l(f),i.flags|=1,$e(e,i,l,a),i.child;case 14:return Q0(e,i,i.type,i.pendingProps,a);case 15:return X0(e,i,i.type,i.pendingProps,a);case 19:return iv(e,i,a);case 31:return Gw(e,i,a);case 22:return $0(e,i,a,i.pendingProps);case 24:return qr(i),l=Xe(Ce),e===null?(f=Wf(),f===null&&(f=se,m=$f(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:l,cache:f},td(i),Li(i,Ce,f)):((e.lanes&a)!==0&&(ed(e,i),dl(i,null,null,a),fl()),f=e.memoizedState,m=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Li(i,Ce,l)):(l=m.cache,Li(i,Ce,l),l!==f.cache&&Xf(i,[Ce],a,!0))),$e(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ci(e){e.flags|=4}function Od(e,i,a,l,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Vv())e.flags|=8192;else throw Yr=mc,Jf}else e.flags&=-16777217}function av(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!_b(i))if(Vv())e.flags|=8192;else throw Yr=mc,Jf}function jc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Pu():536870912,e.lanes|=i,Xa|=i)}function bl(e,i){if(!Bt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ae(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function Kw(e,i,a){var l=i.pendingProps;switch(Hf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ae(i),null;case 1:return ae(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ai(Ce),le(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Oa(i)?ci(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yf())),ae(i),null;case 26:var f=i.type,m=i.memoizedState;return e===null?(ci(i),m!==null?(ae(i),av(i,m)):(ae(i),Od(i,f,null,l,a))):m?m!==e.memoizedState?(ci(i),ae(i),av(i,m)):(ae(i),i.flags&=-16777217):(e=e.memoizedProps,e!==l&&ci(i),ae(i),Od(i,f,e,l,a)),null;case 27:if(ma(i),a=jt.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ci(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ae(i),null}e=mt.current,Oa(i)?Uy(i):(e=db(f,l,a),i.stateNode=e,ci(i))}return ae(i),null;case 5:if(ma(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ci(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ae(i),null}if(m=mt.current,Oa(i))Uy(i);else{var x=Yc(jt.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?x.createElement(f,{is:l.is}):x.createElement(f)}}m[Se]=i,m[ze]=l;t:for(x=i.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===i)break t;for(;x.sibling===null;){if(x.return===null||x.return===i)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}i.stateNode=m;t:switch(Ze(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&ci(i)}}return ae(i),Od(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&ci(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(e=jt.current,Oa(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,f=Qe,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Se]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||nb(e.nodeValue,a)),e||Pi(i,!0)}else e=Yc(e).createTextNode(l),e[Se]=i,i.stateNode=e}return ae(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(l=Oa(i),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Se]=i}else zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ae(i),e=!1}else a=Yf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(jn(i),i):(jn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ae(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Oa(i),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Se]=i}else zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ae(i),f=!1}else f=Yf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(jn(i),i):(jn(i),null)}return jn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),jc(i,i.updateQueue),ae(i),null);case 4:return le(),e===null&&im(i.stateNode.containerInfo),ae(i),null;case 10:return ai(i.type),ae(i),null;case 19:if(it(xe),l=i.memoizedState,l===null)return ae(i),null;if(f=(i.flags&128)!==0,m=l.rendering,m===null)if(f)bl(l,!1);else{if(pe!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(m=vc(e),m!==null){for(i.flags|=128,bl(l,!1),e=m.updateQueue,i.updateQueue=e,jc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Iy(a,e),a=a.sibling;return ht(xe,xe.current&1|2),Bt&&ii(i,l.treeForkCount),i.child}e=e.sibling}l.tail!==null&&un()>Oc&&(i.flags|=128,f=!0,bl(l,!1),i.lanes=4194304)}else{if(!f)if(e=vc(m),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,jc(i,e),bl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Bt)return ae(i),null}else 2*un()-l.renderingStartTime>Oc&&a!==536870912&&(i.flags|=128,f=!0,bl(l,!1),i.lanes=4194304);l.isBackwards?(m.sibling=i.child,i.child=m):(e=l.last,e!==null?e.sibling=m:i.child=m,l.last=m)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=un(),e.sibling=null,a=xe.current,ht(xe,f?a&1|2:a&1),Bt&&ii(i,l.treeForkCount),e):(ae(i),null);case 22:case 23:return jn(i),rd(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ae(i),i.subtreeFlags&6&&(i.flags|=8192)):ae(i),a=i.updateQueue,a!==null&&jc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&it(Hr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ai(Ce),ae(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Qw(e,i){switch(Hf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return ai(Ce),le(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return ma(i),null;case 31:if(i.memoizedState!==null){if(jn(i),i.alternate===null)throw Error(r(340));zr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(jn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));zr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return it(xe),null;case 4:return le(),null;case 10:return ai(i.type),null;case 22:case 23:return jn(i),rd(),e!==null&&it(Hr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return ai(Ce),null;case 25:return null;default:return null}}function ov(e,i){switch(Hf(i),i.tag){case 3:ai(Ce),le();break;case 26:case 27:case 5:ma(i);break;case 4:le();break;case 31:i.memoizedState!==null&&jn(i);break;case 13:jn(i);break;case 19:it(xe);break;case 10:ai(i.type);break;case 22:case 23:jn(i),rd(),e!==null&&it(Hr);break;case 24:ai(Ce)}}function xl(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var m=a.create,x=a.inst;l=m(),x.destroy=l}a=a.next}while(a!==f)}}catch(w){Zt(i,i.return,w)}}function Hi(e,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&e)===e){var x=l.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,f=i;var I=a,H=w;try{H()}catch(J){Zt(f,I,J)}}}l=l.next}while(l!==m)}}catch(J){Zt(i,i.return,J)}}function lv(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Wy(i,a)}catch(l){Zt(e,e.return,l)}}}function uv(e,i,a){a.props=Xr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Zt(e,i,l)}}function _l(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){Zt(e,i,f)}}function Os(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Zt(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Zt(e,i,f)}else a.current=null}function cv(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Zt(e,e.return,f)}}function Pd(e,i,a){try{var l=e.stateNode;gS(l,e.type,a,i),l[ze]=i}catch(f){Zt(e,e.return,f)}}function hv(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Zi(e.type)||e.tag===4}function Ld(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||hv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Zi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ud(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ss));else if(l!==4&&(l===27&&Zi(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Ud(e,i,a),e=e.sibling;e!==null;)Ud(e,i,a),e=e.sibling}function Vc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Zi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Vc(e,i,a),e=e.sibling;e!==null;)Vc(e,i,a),e=e.sibling}function fv(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Ze(i,l,a),i[Se]=e,i[ze]=a}catch(m){Zt(e,e.return,m)}}var hi=!1,je=!1,Bd=!1,dv=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Xw(e,i){if(e=e.containerInfo,om=Jc,e=Sy(e),Mf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var x=0,w=-1,I=-1,H=0,J=0,nt=e,Y=null;e:for(;;){for(var $;nt!==a||f!==0&&nt.nodeType!==3||(w=x+f),nt!==m||l!==0&&nt.nodeType!==3||(I=x+l),nt.nodeType===3&&(x+=nt.nodeValue.length),($=nt.firstChild)!==null;)Y=nt,nt=$;for(;;){if(nt===e)break e;if(Y===a&&++H===f&&(w=x),Y===m&&++J===l&&(I=x),($=nt.nextSibling)!==null)break;nt=Y,Y=nt.parentNode}nt=$}a=w===-1||I===-1?null:{start:w,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(lm={focusedElem:e,selectionRange:a},Jc=!1,qe=i;qe!==null;)if(i=qe,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,qe=e;else for(;qe!==null;){switch(i=qe,m=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var gt=Xr(a.type,f);e=l.getSnapshotBeforeUpdate(gt,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(Tt){Zt(a,a.return,Tt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)hm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,qe=e;break}qe=i.return}}function mv(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:di(e,a),l&4&&xl(5,a);break;case 1:if(di(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(x){Zt(a,a.return,x)}else{var f=Xr(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(x){Zt(a,a.return,x)}}l&64&&lv(a),l&512&&_l(a,a.return);break;case 3:if(di(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Wy(e,i)}catch(x){Zt(a,a.return,x)}}break;case 27:i===null&&l&4&&fv(a);case 26:case 5:di(e,a),i===null&&l&4&&cv(a),l&512&&_l(a,a.return);break;case 12:di(e,a);break;case 31:di(e,a),l&4&&yv(e,a);break;case 13:di(e,a),l&4&&vv(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=iS.bind(null,a),wS(e,a))));break;case 22:if(l=a.memoizedState!==null||hi,!l){i=i!==null&&i.memoizedState!==null||je,f=hi;var m=je;hi=l,(je=i)&&!m?mi(e,a,(a.subtreeFlags&8772)!==0):di(e,a),hi=f,je=m}break;case 30:break;default:di(e,a)}}function pv(e){var i=e.alternate;i!==null&&(e.alternate=null,pv(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ba(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ce=null,pn=!1;function fi(e,i,a){for(a=a.child;a!==null;)gv(e,i,a),a=a.sibling}function gv(e,i,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Jn,a)}catch{}switch(a.tag){case 26:je||Os(a,i),fi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:je||Os(a,i);var l=ce,f=pn;Zi(a.type)&&(ce=a.stateNode,pn=!1),fi(e,i,a),Dl(a.stateNode),ce=l,pn=f;break;case 5:je||Os(a,i);case 6:if(l=ce,f=pn,ce=null,fi(e,i,a),ce=l,pn=f,ce!==null)if(pn)try{(ce.nodeType===9?ce.body:ce.nodeName==="HTML"?ce.ownerDocument.body:ce).removeChild(a.stateNode)}catch(m){Zt(a,i,m)}else try{ce.removeChild(a.stateNode)}catch(m){Zt(a,i,m)}break;case 18:ce!==null&&(pn?(e=ce,lb(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),so(e)):lb(ce,a.stateNode));break;case 4:l=ce,f=pn,ce=a.stateNode.containerInfo,pn=!0,fi(e,i,a),ce=l,pn=f;break;case 0:case 11:case 14:case 15:Hi(2,a,i),je||Hi(4,a,i),fi(e,i,a);break;case 1:je||(Os(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&uv(a,i,l)),fi(e,i,a);break;case 21:fi(e,i,a);break;case 22:je=(l=je)||a.memoizedState!==null,fi(e,i,a),je=l;break;default:fi(e,i,a)}}function yv(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{so(e)}catch(a){Zt(i,i.return,a)}}}function vv(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{so(e)}catch(a){Zt(i,i.return,a)}}function $w(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new dv),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new dv),i;default:throw Error(r(435,e.tag))}}function Mc(e,i){var a=$w(e);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=rS.bind(null,e,l);l.then(f,f)}})}function gn(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=e,x=i,w=x;t:for(;w!==null;){switch(w.tag){case 27:if(Zi(w.type)){ce=w.stateNode,pn=!1;break t}break;case 5:ce=w.stateNode,pn=!1;break t;case 3:case 4:ce=w.stateNode.containerInfo,pn=!0;break t}w=w.return}if(ce===null)throw Error(r(160));gv(m,x,f),ce=null,pn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)bv(i,e),i=i.sibling}var us=null;function bv(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gn(i,e),yn(e),l&4&&(Hi(3,e,e.return),xl(3,e),Hi(5,e,e.return));break;case 1:gn(i,e),yn(e),l&512&&(je||a===null||Os(a,a.return)),l&64&&hi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=us;if(gn(i,e),yn(e),l&512&&(je||a===null||Os(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ts]||m[Se]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Ze(m,l,a),m[Se]=e,Ae(m),l=m;break t;case"link":var x=bb("link","href",f).get(l+(a.href||""));if(x){for(var w=0;w<x.length;w++)if(m=x[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(w,1);break e}}m=f.createElement(l),Ze(m,l,a),f.head.appendChild(m);break;case"meta":if(x=bb("meta","content",f).get(l+(a.content||""))){for(w=0;w<x.length;w++)if(m=x[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(w,1);break e}}m=f.createElement(l),Ze(m,l,a),f.head.appendChild(m);break;default:throw Error(r(468,l))}m[Se]=e,Ae(m),l=m}e.stateNode=l}else xb(f,e.type,e.stateNode);else e.stateNode=vb(f,l,e.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?xb(f,e.type,e.stateNode):vb(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Pd(e,e.memoizedProps,a.memoizedProps)}break;case 27:gn(i,e),yn(e),l&512&&(je||a===null||Os(a,a.return)),a!==null&&l&4&&Pd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(gn(i,e),yn(e),l&512&&(je||a===null||Os(a,a.return)),e.flags&32){f=e.stateNode;try{mn(f,"")}catch(gt){Zt(e,e.return,gt)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,Pd(e,f,a!==null?a.memoizedProps:f)),l&1024&&(Bd=!0);break;case 6:if(gn(i,e),yn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(gt){Zt(e,e.return,gt)}}break;case 3:if(Xc=null,f=us,us=Kc(i.containerInfo),gn(i,e),us=f,yn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{so(i.containerInfo)}catch(gt){Zt(e,e.return,gt)}Bd&&(Bd=!1,xv(e));break;case 4:l=us,us=Kc(e.stateNode.containerInfo),gn(i,e),yn(e),us=l;break;case 12:gn(i,e),yn(e);break;case 31:gn(i,e),yn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mc(e,l)));break;case 13:gn(i,e),yn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kc=un()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mc(e,l)));break;case 22:f=e.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,H=hi,J=je;if(hi=H||f,je=J||I,gn(i,e),je=J,hi=H,yn(e),l&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||I||hi||je||$r(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(m=I.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=I.stateNode;var nt=I.memoizedProps.style,Y=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(gt){Zt(I,I.return,gt)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(gt){Zt(I,I.return,gt)}}}else if(i.tag===18){if(a===null){I=i;try{var $=I.stateNode;f?ub($,!0):ub(I.stateNode,!1)}catch(gt){Zt(I,I.return,gt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Mc(e,a))));break;case 19:gn(i,e),yn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mc(e,l)));break;case 30:break;case 21:break;default:gn(i,e),yn(e)}}function yn(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(hv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,m=Ld(e);Vc(e,m,f);break;case 5:var x=a.stateNode;a.flags&32&&(mn(x,""),a.flags&=-33);var w=Ld(e);Vc(e,w,x);break;case 3:case 4:var I=a.stateNode.containerInfo,H=Ld(e);Ud(e,H,I);break;default:throw Error(r(161))}}catch(J){Zt(e,e.return,J)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function xv(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;xv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function di(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)mv(e,i.alternate,i),i=i.sibling}function $r(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Hi(4,i,i.return),$r(i);break;case 1:Os(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&uv(i,i.return,a),$r(i);break;case 27:Dl(i.stateNode);case 26:case 5:Os(i,i.return),$r(i);break;case 22:i.memoizedState===null&&$r(i);break;case 30:$r(i);break;default:$r(i)}e=e.sibling}}function mi(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=e,m=i,x=m.flags;switch(m.tag){case 0:case 11:case 15:mi(f,m,a),xl(4,m);break;case 1:if(mi(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){Zt(l,l.return,H)}if(l=m,f=l.updateQueue,f!==null){var w=l.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)Zy(I[f],w)}catch(H){Zt(l,l.return,H)}}a&&x&64&&lv(m),_l(m,m.return);break;case 27:fv(m);case 26:case 5:mi(f,m,a),a&&l===null&&x&4&&cv(m),_l(m,m.return);break;case 12:mi(f,m,a);break;case 31:mi(f,m,a),a&&x&4&&yv(f,m);break;case 13:mi(f,m,a),a&&x&4&&vv(f,m);break;case 22:m.memoizedState===null&&mi(f,m,a),_l(m,m.return);break;case 30:break;default:mi(f,m,a)}i=i.sibling}}function zd(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ol(a))}function Fd(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ol(e))}function cs(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_v(e,i,a,l),i=i.sibling}function _v(e,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:cs(e,i,a,l),f&2048&&xl(9,i);break;case 1:cs(e,i,a,l);break;case 3:cs(e,i,a,l),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ol(e)));break;case 12:if(f&2048){cs(e,i,a,l),e=i.stateNode;try{var m=i.memoizedProps,x=m.id,w=m.onPostCommit;typeof w=="function"&&w(x,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){Zt(i,i.return,I)}}else cs(e,i,a,l);break;case 31:cs(e,i,a,l);break;case 13:cs(e,i,a,l);break;case 23:break;case 22:m=i.stateNode,x=i.alternate,i.memoizedState!==null?m._visibility&2?cs(e,i,a,l):Tl(e,i):m._visibility&2?cs(e,i,a,l):(m._visibility|=2,Ya(e,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&zd(x,i);break;case 24:cs(e,i,a,l),f&2048&&Fd(i.alternate,i);break;default:cs(e,i,a,l)}}function Ya(e,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=e,x=i,w=a,I=l,H=x.flags;switch(x.tag){case 0:case 11:case 15:Ya(m,x,w,I,f),xl(8,x);break;case 23:break;case 22:var J=x.stateNode;x.memoizedState!==null?J._visibility&2?Ya(m,x,w,I,f):Tl(m,x):(J._visibility|=2,Ya(m,x,w,I,f)),f&&H&2048&&zd(x.alternate,x);break;case 24:Ya(m,x,w,I,f),f&&H&2048&&Fd(x.alternate,x);break;default:Ya(m,x,w,I,f)}i=i.sibling}}function Tl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,f=l.flags;switch(l.tag){case 22:Tl(a,l),f&2048&&zd(l.alternate,l);break;case 24:Tl(a,l),f&2048&&Fd(l.alternate,l);break;default:Tl(a,l)}i=i.sibling}}var El=8192;function Ka(e,i,a){if(e.subtreeFlags&El)for(e=e.child;e!==null;)Tv(e,i,a),e=e.sibling}function Tv(e,i,a){switch(e.tag){case 26:Ka(e,i,a),e.flags&El&&e.memoizedState!==null&&OS(a,us,e.memoizedState,e.memoizedProps);break;case 5:Ka(e,i,a);break;case 3:case 4:var l=us;us=Kc(e.stateNode.containerInfo),Ka(e,i,a),us=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=El,El=16777216,Ka(e,i,a),El=l):Ka(e,i,a));break;default:Ka(e,i,a)}}function Ev(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function wl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];qe=l,Sv(l,e)}Ev(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)wv(e),e=e.sibling}function wv(e){switch(e.tag){case 0:case 11:case 15:wl(e),e.flags&2048&&Hi(9,e,e.return);break;case 3:wl(e);break;case 12:wl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ic(e)):wl(e);break;default:wl(e)}}function Ic(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];qe=l,Sv(l,e)}Ev(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Hi(8,i,i.return),Ic(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ic(i));break;default:Ic(i)}e=e.sibling}}function Sv(e,i){for(;qe!==null;){var a=qe;switch(a.tag){case 0:case 11:case 15:Hi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ol(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,qe=l;else t:for(a=e;qe!==null;){l=qe;var f=l.sibling,m=l.return;if(pv(l),l===a){qe=null;break t}if(f!==null){f.return=m,qe=f;break t}qe=m}}}var Zw={getCacheForType:function(e){var i=Xe(Ce),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return Xe(Ce).controller.signal}},Ww=typeof WeakMap=="function"?WeakMap:Map,Kt=0,se=null,Mt=null,Ot=0,$t=0,Vn=null,Gi=!1,Qa=!1,qd=!1,pi=0,pe=0,Yi=0,Zr=0,Hd=0,Mn=0,Xa=0,Sl=null,vn=null,Gd=!1,kc=0,Av=0,Oc=1/0,Pc=null,Ki=null,Le=0,Qi=null,$a=null,gi=0,Yd=0,Kd=null,Nv=null,Al=0,Qd=null;function In(){return(Kt&2)!==0&&Ot!==0?Ot&-Ot:B.T!==null?tm():Lu()}function Cv(){if(Mn===0)if((Ot&536870912)===0||Bt){var e=wr;wr<<=1,(wr&3932160)===0&&(wr=262144),Mn=e}else Mn=536870912;return e=Dn.current,e!==null&&(e.flags|=32),Mn}function bn(e,i,a){(e===se&&($t===2||$t===9)||e.cancelPendingCommit!==null)&&(Za(e,0),Xi(e,Ot,Mn,!1)),Sr(e,a),((Kt&2)===0||e!==se)&&(e===se&&((Kt&2)===0&&(Zr|=a),pe===4&&Xi(e,Ot,Mn,!1)),Ps(e))}function Rv(e,i,a){if((Kt&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&e.expiredLanes)===0||ts(e,i),f=l?eS(e,i):$d(e,i,!0),m=l;do{if(f===0){Qa&&!l&&Xi(e,i,0,!1);break}else{if(a=e.current.alternate,m&&!Jw(a)){f=$d(e,i,!1),m=!1;continue}if(f===2){if(m=i,e.errorRecoveryDisabledLanes&m)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){i=x;t:{var w=e;f=Sl;var I=w.current.memoizedState.isDehydrated;if(I&&(Za(w,x).flags|=256),x=$d(w,x,!1),x!==2){if(qd&&!I){w.errorRecoveryDisabledLanes|=m,Zr|=m,f=4;break t}m=vn,vn=f,m!==null&&(vn===null?vn=m:vn.push.apply(vn,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){Za(e,0),Xi(e,i,0,!0);break}t:{switch(l=e,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Xi(l,i,Mn,!Gi);break t;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=kc+300-un(),10<f)){if(Xi(l,i,Mn,!Gi),bs(l,0,!0)!==0)break t;gi=i,l.timeoutHandle=ab(Dv.bind(null,l,a,vn,Pc,Gd,i,Mn,Zr,Xa,Gi,m,"Throttled",-0,0),f);break t}Dv(l,a,vn,Pc,Gd,i,Mn,Zr,Xa,Gi,m,null,-0,0)}}break}while(!0);Ps(e)}function Dv(e,i,a,l,f,m,x,w,I,H,J,nt,Y,$){if(e.timeoutHandle=-1,nt=i.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},Tv(i,m,nt);var gt=(m&62914560)===m?kc-un():(m&4194048)===m?Av-un():0;if(gt=PS(nt,gt),gt!==null){gi=m,e.cancelPendingCommit=gt(Lv.bind(null,e,i,m,a,l,f,x,w,I,J,nt,null,Y,$)),Xi(e,m,x,!H);return}}Lv(e,i,m,a,l,f,x,w,I)}function Jw(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Cn(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Xi(e,i,a,l){i&=~Hd,i&=~Zr,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var f=i;0<f;){var m=31-ve(f),x=1<<m;l[m]=-1,f&=~x}a!==0&&Ar(e,a,i)}function Lc(){return(Kt&6)===0?(Nl(0),!1):!0}function Xd(){if(Mt!==null){if($t===0)var e=Mt.return;else e=Mt,ri=Fr=null,hd(e),za=null,ul=0,e=Mt;for(;e!==null;)ov(e.alternate,e),e=e.return;Mt=null}}function Za(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,bS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),gi=0,Xd(),se=e,Mt=a=si(e.current,null),Ot=i,$t=0,Vn=null,Gi=!1,Qa=ts(e,i),qd=!1,Xa=Mn=Hd=Zr=Yi=pe=0,vn=Sl=null,Gd=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var f=31-ve(l),m=1<<f;i|=e[f],l&=~m}return pi=i,rc(),a}function jv(e,i){Dt=null,B.H=yl,i===Ba||i===dc?(i=Ky(),$t=3):i===Jf?(i=Ky(),$t=4):$t=i===Nd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Vn=i,Mt===null&&(pe=1,Nc(e,Fn(i,e.current)))}function Vv(){var e=Dn.current;return e===null?!0:(Ot&4194048)===Ot?Yn===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?e===Yn:!1}function Mv(){var e=B.H;return B.H=yl,e===null?yl:e}function Iv(){var e=B.A;return B.A=Zw,e}function Uc(){pe=4,Gi||(Ot&4194048)!==Ot&&Dn.current!==null||(Qa=!0),(Yi&134217727)===0&&(Zr&134217727)===0||se===null||Xi(se,Ot,Mn,!1)}function $d(e,i,a){var l=Kt;Kt|=2;var f=Mv(),m=Iv();(se!==e||Ot!==i)&&(Pc=null,Za(e,i)),i=!1;var x=pe;t:do try{if($t!==0&&Mt!==null){var w=Mt,I=Vn;switch($t){case 8:Xd(),x=6;break t;case 3:case 2:case 9:case 6:Dn.current===null&&(i=!0);var H=$t;if($t=0,Vn=null,Wa(e,w,I,H),a&&Qa){x=0;break t}break;default:H=$t,$t=0,Vn=null,Wa(e,w,I,H)}}tS(),x=pe;break}catch(J){jv(e,J)}while(!0);return i&&e.shellSuspendCounter++,ri=Fr=null,Kt=l,B.H=f,B.A=m,Mt===null&&(se=null,Ot=0,rc()),x}function tS(){for(;Mt!==null;)kv(Mt)}function eS(e,i){var a=Kt;Kt|=2;var l=Mv(),f=Iv();se!==e||Ot!==i?(Pc=null,Oc=un()+500,Za(e,i)):Qa=ts(e,i);t:do try{if($t!==0&&Mt!==null){i=Mt;var m=Vn;e:switch($t){case 1:$t=0,Vn=null,Wa(e,i,m,1);break;case 2:case 9:if(Gy(m)){$t=0,Vn=null,Ov(i);break}i=function(){$t!==2&&$t!==9||se!==e||($t=7),Ps(e)},m.then(i,i);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:Gy(m)?($t=0,Vn=null,Ov(i)):($t=0,Vn=null,Wa(e,i,m,7));break;case 5:var x=null;switch(Mt.tag){case 26:x=Mt.memoizedState;case 5:case 27:var w=Mt;if(x?_b(x):w.stateNode.complete){$t=0,Vn=null;var I=w.sibling;if(I!==null)Mt=I;else{var H=w.return;H!==null?(Mt=H,Bc(H)):Mt=null}break e}}$t=0,Vn=null,Wa(e,i,m,5);break;case 6:$t=0,Vn=null,Wa(e,i,m,6);break;case 8:Xd(),pe=6;break t;default:throw Error(r(462))}}nS();break}catch(J){jv(e,J)}while(!0);return ri=Fr=null,B.H=l,B.A=f,Kt=a,Mt!==null?0:(se=null,Ot=0,rc(),pe)}function nS(){for(;Mt!==null&&!Af();)kv(Mt)}function kv(e){var i=rv(e.alternate,e,pi);e.memoizedProps=e.pendingProps,i===null?Bc(e):Mt=i}function Ov(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=J0(a,i,i.pendingProps,i.type,void 0,Ot);break;case 11:i=J0(a,i,i.pendingProps,i.type.render,i.ref,Ot);break;case 5:hd(i);default:ov(a,i),i=Mt=Iy(i,pi),i=rv(a,i,pi)}e.memoizedProps=e.pendingProps,i===null?Bc(e):Mt=i}function Wa(e,i,a,l){ri=Fr=null,hd(i),za=null,ul=0;var f=i.return;try{if(Hw(e,f,i,a,Ot)){pe=1,Nc(e,Fn(a,e.current)),Mt=null;return}}catch(m){if(f!==null)throw Mt=f,m;pe=1,Nc(e,Fn(a,e.current)),Mt=null;return}i.flags&32768?(Bt||l===1?e=!0:Qa||(Ot&536870912)!==0?e=!1:(Gi=e=!0,(l===2||l===9||l===3||l===6)&&(l=Dn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Pv(i,e)):Bc(i)}function Bc(e){var i=e;do{if((i.flags&32768)!==0){Pv(i,Gi);return}e=i.return;var a=Kw(i.alternate,i,pi);if(a!==null){Mt=a;return}if(i=i.sibling,i!==null){Mt=i;return}Mt=i=e}while(i!==null);pe===0&&(pe=5)}function Pv(e,i){do{var a=Qw(e.alternate,e);if(a!==null){a.flags&=32767,Mt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Mt=e;return}Mt=e=a}while(e!==null);pe=6,Mt=null}function Lv(e,i,a,l,f,m,x,w,I){e.cancelPendingCommit=null;do zc();while(Le!==0);if((Kt&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=Lf,Rf(e,a,m,x,w,I),e===se&&(Mt=se=null,Ot=0),$a=i,Qi=e,gi=a,Yd=m,Kd=f,Nv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,aS(Si,function(){return qv(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,f=ot.p,ot.p=2,x=Kt,Kt|=4;try{Xw(e,i,a)}finally{Kt=x,ot.p=f,B.T=l}}Le=1,Uv(),Bv(),zv()}}function Uv(){if(Le===1){Le=0;var e=Qi,i=$a,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var l=ot.p;ot.p=2;var f=Kt;Kt|=4;try{bv(i,e);var m=lm,x=Sy(e.containerInfo),w=m.focusedElem,I=m.selectionRange;if(x!==w&&w&&w.ownerDocument&&wy(w.ownerDocument.documentElement,w)){if(I!==null&&Mf(w)){var H=I.start,J=I.end;if(J===void 0&&(J=H),"selectionStart"in w)w.selectionStart=H,w.selectionEnd=Math.min(J,w.value.length);else{var nt=w.ownerDocument||document,Y=nt&&nt.defaultView||window;if(Y.getSelection){var $=Y.getSelection(),gt=w.textContent.length,Tt=Math.min(I.start,gt),ee=I.end===void 0?Tt:Math.min(I.end,gt);!$.extend&&Tt>ee&&(x=ee,ee=Tt,Tt=x);var z=Ey(w,Tt),P=Ey(w,ee);if(z&&P&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==P.node||$.focusOffset!==P.offset)){var q=nt.createRange();q.setStart(z.node,z.offset),$.removeAllRanges(),Tt>ee?($.addRange(q),$.extend(P.node,P.offset)):(q.setEnd(P.node,P.offset),$.addRange(q))}}}}for(nt=[],$=w;$=$.parentNode;)$.nodeType===1&&nt.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<nt.length;w++){var et=nt[w];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}Jc=!!om,lm=om=null}finally{Kt=f,ot.p=l,B.T=a}}e.current=i,Le=2}}function Bv(){if(Le===2){Le=0;var e=Qi,i=$a,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var l=ot.p;ot.p=2;var f=Kt;Kt|=4;try{mv(e,i.alternate,i)}finally{Kt=f,ot.p=l,B.T=a}}Le=3}}function zv(){if(Le===4||Le===3){Le=0,ju();var e=Qi,i=$a,a=gi,l=Nv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Le=5:(Le=0,$a=Qi=null,Fv(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Ki=null),Js(a),i=i.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Jn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=B.T,f=ot.p,ot.p=2,B.T=null;try{for(var m=e.onRecoverableError,x=0;x<l.length;x++){var w=l[x];m(w.value,{componentStack:w.stack})}}finally{B.T=i,ot.p=f}}(gi&3)!==0&&zc(),Ps(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Qd?Al++:(Al=0,Qd=e):Al=0,Nl(0)}}function Fv(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,ol(i)))}function zc(){return Uv(),Bv(),zv(),qv()}function qv(){if(Le!==5)return!1;var e=Qi,i=Yd;Yd=0;var a=Js(gi),l=B.T,f=ot.p;try{ot.p=32>a?32:a,B.T=null,a=Kd,Kd=null;var m=Qi,x=gi;if(Le=0,$a=Qi=null,gi=0,(Kt&6)!==0)throw Error(r(331));var w=Kt;if(Kt|=4,wv(m.current),_v(m,m.current,x,a),Kt=w,Nl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Jn,m)}catch{}return!0}finally{ot.p=f,B.T=l,Fv(e,i)}}function Hv(e,i,a){i=Fn(a,i),i=Ad(e.stateNode,i,2),e=zi(e,i,2),e!==null&&(Sr(e,2),Ps(e))}function Zt(e,i,a){if(e.tag===3)Hv(e,e,a);else for(;i!==null;){if(i.tag===3){Hv(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ki===null||!Ki.has(l))){e=Fn(a,e),a=G0(2),l=zi(i,a,2),l!==null&&(Y0(a,l,i,e),Sr(l,2),Ps(l));break}}i=i.return}}function Zd(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Ww;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(qd=!0,f.add(a),e=sS.bind(null,e,i,a),i.then(e,e))}function sS(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,se===e&&(Ot&a)===a&&(pe===4||pe===3&&(Ot&62914560)===Ot&&300>un()-kc?(Kt&2)===0&&Za(e,0):Hd|=a,Xa===Ot&&(Xa=0)),Ps(e)}function Gv(e,i){i===0&&(i=Pu()),e=Ur(e,i),e!==null&&(Sr(e,i),Ps(e))}function iS(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Gv(e,a)}function rS(e,i){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Gv(e,a)}function aS(e,i){return Pe(e,i)}var Fc=null,Ja=null,Wd=!1,qc=!1,Jd=!1,$i=0;function Ps(e){e!==Ja&&e.next===null&&(Ja===null?Fc=Ja=e:Ja=Ja.next=e),qc=!0,Wd||(Wd=!0,lS())}function Nl(e,i){if(!Jd&&qc){Jd=!0;do for(var a=!1,l=Fc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var x=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-ve(42|e)+1)-1,m&=f&~(x&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Xv(l,m))}else m=Ot,m=bs(l,l===se?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ts(l,m)||(a=!0,Xv(l,m));l=l.next}while(a);Jd=!1}}function oS(){Yv()}function Yv(){qc=Wd=!1;var e=0;$i!==0&&vS()&&(e=$i);for(var i=un(),a=null,l=Fc;l!==null;){var f=l.next,m=Kv(l,i);m===0?(l.next=null,a===null?Fc=f:a.next=f,f===null&&(Ja=a)):(a=l,(e!==0||(m&3)!==0)&&(qc=!0)),l=f}Le!==0&&Le!==5||Nl(e),$i!==0&&($i=0)}function Kv(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var x=31-ve(m),w=1<<x,I=f[x];I===-1?((w&a)===0||(w&l)!==0)&&(f[x]=Cf(w,i)):I<=i&&(e.expiredLanes|=w),m&=~w}if(i=se,a=Ot,a=bs(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&($t===2||$t===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&wi(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ts(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&wi(l),Js(a)){case 2:case 8:a=Po;break;case 32:a=Si;break;case 268435456:a=Vu;break;default:a=Si}return l=Qv.bind(null,e),a=Pe(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&wi(l),e.callbackPriority=2,e.callbackNode=null,2}function Qv(e,i){if(Le!==0&&Le!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(zc()&&e.callbackNode!==a)return null;var l=Ot;return l=bs(e,e===se?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Rv(e,l,i),Kv(e,un()),e.callbackNode!=null&&e.callbackNode===a?Qv.bind(null,e):null)}function Xv(e,i){if(zc())return null;Rv(e,i,!0)}function lS(){xS(function(){(Kt&6)!==0?Pe(Oo,oS):Yv()})}function tm(){if($i===0){var e=La;e===0&&(e=ys,ys<<=1,(ys&261888)===0&&(ys=256)),$i=e}return $i}function $v(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ea(""+e)}function Zv(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function uS(e,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var m=$v((f[ze]||null).action),x=l.submitter;x&&(i=(i=x[ze]||null)?$v(i.formAction):x.getAttribute("formAction"),i!==null&&(m=i,x=null));var w=new Ds("action","action",null,l,f);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($i!==0){var I=x?Zv(f,x):new FormData(f);xd(a,{pending:!0,data:I,method:f.method,action:m},null,I)}}else typeof m=="function"&&(w.preventDefault(),I=x?Zv(f,x):new FormData(f),xd(a,{pending:!0,data:I,method:f.method,action:m},m,I))},currentTarget:f}]})}}for(var em=0;em<Pf.length;em++){var nm=Pf[em],cS=nm.toLowerCase(),hS=nm[0].toUpperCase()+nm.slice(1);ls(cS,"on"+hS)}ls(Cy,"onAnimationEnd"),ls(Ry,"onAnimationIteration"),ls(Dy,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(Nw,"onTransitionRun"),ls(Cw,"onTransitionStart"),ls(Rw,"onTransitionCancel"),ls(jy,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cl));function Wv(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;t:{var m=void 0;if(i)for(var x=l.length-1;0<=x;x--){var w=l[x],I=w.instance,H=w.currentTarget;if(w=w.listener,I!==m&&f.isPropagationStopped())break t;m=w,f.currentTarget=H;try{m(f)}catch(J){ic(J)}f.currentTarget=null,m=I}else for(x=0;x<l.length;x++){if(w=l[x],I=w.instance,H=w.currentTarget,w=w.listener,I!==m&&f.isPropagationStopped())break t;m=w,f.currentTarget=H;try{m(f)}catch(J){ic(J)}f.currentTarget=null,m=I}}}}function It(e,i){var a=i[va];a===void 0&&(a=i[va]=new Set);var l=e+"__bubble";a.has(l)||(Jv(i,e,2,!1),a.add(l))}function sm(e,i,a){var l=0;i&&(l|=4),Jv(a,e,l,i)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function im(e){if(!e[Hc]){e[Hc]=!0,Bo.forEach(function(a){a!=="selectionchange"&&(fS.has(a)||sm(a,!1,e),sm(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Hc]||(i[Hc]=!0,sm("selectionchange",!1,i))}}function Jv(e,i,a,l){switch(Cb(i)){case 2:var f=BS;break;case 8:f=zS;break;default:f=bm}a=f.bind(null,i,a,e),f=void 0,!jr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function rm(e,i,a,l,f){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var w=l.stateNode.containerInfo;if(w===f)break;if(x===4)for(x=l.return;x!==null;){var I=x.tag;if((I===3||I===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;w!==null;){if(x=Es(w),x===null)return;if(I=x.tag,I===5||I===6||I===26||I===27){l=m=x;continue t}w=w.parentNode}}l=l.return}ji(function(){var H=m,J=Ln(a),nt=[];t:{var Y=Vy.get(e);if(Y!==void 0){var $=Ds,gt=e;switch(e){case"keypress":if(Mr(a)===0)break t;case"keydown":case"keyup":$=ec;break;case"focusin":gt="focus",$=kr;break;case"focusout":gt="blur",$=kr;break;case"beforeblur":case"afterblur":$=kr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=v;break;case Cy:case Ry:case Dy:$=Qu;break;case jy:$=C;break;case"scroll":case"scrollend":$=Wo;break;case"wheel":$=X;break;case"copy":case"cut":case"paste":$=Xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ni;break;case"toggle":case"beforetoggle":$=Rt}var Tt=(i&4)!==0,ee=!Tt&&(e==="scroll"||e==="scrollend"),z=Tt?Y!==null?Y+"Capture":null:Y;Tt=[];for(var P=H,q;P!==null;){var et=P;if(q=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||q===null||z===null||(et=is(P,z),et!=null&&Tt.push(Rl(P,et,q))),ee)break;P=P.return}0<Tt.length&&(Y=new $(Y,gt,null,a,J),nt.push({event:Y,listeners:Tt}))}}if((i&7)===0){t:{if(Y=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",Y&&a!==Xo&&(gt=a.relatedTarget||a.fromElement)&&(Es(gt)||gt[_s]))break t;if(($||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,$?(gt=a.relatedTarget||a.toElement,$=H,gt=gt?Es(gt):null,gt!==null&&(ee=u(gt),Tt=gt.tag,gt!==ee||Tt!==5&&Tt!==27&&Tt!==6)&&(gt=null)):($=null,gt=H),$!==gt)){if(Tt=Jo,et="onMouseLeave",z="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(Tt=ni,et="onPointerLeave",z="onPointerEnter",P="pointer"),ee=$==null?Y:An($),q=gt==null?Y:An(gt),Y=new Tt(et,P+"leave",$,a,J),Y.target=ee,Y.relatedTarget=q,et=null,Es(J)===H&&(Tt=new Tt(z,P+"enter",gt,a,J),Tt.target=q,Tt.relatedTarget=ee,et=Tt),ee=et,$&&gt)e:{for(Tt=dS,z=$,P=gt,q=0,et=z;et;et=Tt(et))q++;et=0;for(var xt=P;xt;xt=Tt(xt))et++;for(;0<q-et;)z=Tt(z),q--;for(;0<et-q;)P=Tt(P),et--;for(;q--;){if(z===P||P!==null&&z===P.alternate){Tt=z;break e}z=Tt(z),P=Tt(P)}Tt=null}else Tt=null;$!==null&&tb(nt,Y,$,Tt,!1),gt!==null&&ee!==null&&tb(nt,ee,gt,Tt,!0)}}t:{if(Y=H?An(H):window,$=Y.nodeName&&Y.nodeName.toLowerCase(),$==="select"||$==="input"&&Y.type==="file")var Ht=yy;else if(py(Y))if(vy)Ht=ww;else{Ht=Tw;var yt=_w}else $=Y.nodeName,!$||$.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?H&&Ta(H.elementType)&&(Ht=yy):Ht=Ew;if(Ht&&(Ht=Ht(e,H))){gy(nt,Ht,a,J);break t}yt&&yt(e,Y,H),e==="focusout"&&H&&Y.type==="number"&&H.memoizedProps.value!=null&&Yo(Y,"number",Y.value)}switch(yt=H?An(H):window,e){case"focusin":(py(yt)||yt.contentEditable==="true")&&(Da=yt,If=H,il=null);break;case"focusout":il=If=Da=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,Ay(nt,a,J);break;case"selectionchange":if(Aw)break;case"keydown":case"keyup":Ay(nt,a,J)}var Vt;if(Yt)t:{switch(e){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Ra?Or(e,a)&&(Pt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Pt="onCompositionStart");Pt&&(Ms&&a.locale!=="ko"&&(Ra||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Ra&&(Vt=Zo()):(Rs=J,$o="value"in Rs?Rs.value:Rs.textContent,Ra=!0)),yt=Gc(H,Pt),0<yt.length&&(Pt=new Vs(Pt,e,null,a,J),nt.push({event:Pt,listeners:yt}),Vt?Pt.data=Vt:(Vt=Ca(a),Vt!==null&&(Pt.data=Vt)))),(Vt=Bn?yw(e,a):vw(e,a))&&(Pt=Gc(H,"onBeforeInput"),0<Pt.length&&(yt=new Vs("onBeforeInput","beforeinput",null,a,J),nt.push({event:yt,listeners:Pt}),yt.data=Vt)),uS(nt,e,H,a,J)}Wv(nt,i)})}function Rl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Gc(e,i){for(var a=i+"Capture",l=[];e!==null;){var f=e,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=is(e,a),f!=null&&l.unshift(Rl(e,f,m)),f=is(e,i),f!=null&&l.push(Rl(e,f,m))),e.tag===3)return l;e=e.return}return[]}function dS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function tb(e,i,a,l,f){for(var m=i._reactName,x=[];a!==null&&a!==l;){var w=a,I=w.alternate,H=w.stateNode;if(w=w.tag,I!==null&&I===l)break;w!==5&&w!==26&&w!==27||H===null||(I=H,f?(H=is(a,m),H!=null&&x.unshift(Rl(a,H,I))):f||(H=is(a,m),H!=null&&x.push(Rl(a,H,I)))),a=a.return}x.length!==0&&e.push({event:i,listeners:x})}var mS=/\r\n?/g,pS=/\u0000|\uFFFD/g;function eb(e){return(typeof e=="string"?e:""+e).replace(mS,`
`).replace(pS,"")}function nb(e,i){return i=eb(i),eb(e)===i}function te(e,i,a,l,f,m){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||mn(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&mn(e,""+l);break;case"className":Nn(e,"class",l);break;case"tabIndex":Nn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(e,a,l);break;case"style":Qo(e,l,m);break;case"data":if(i!=="object"){Nn(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ea(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&te(e,i,"name",f.name,f,null),te(e,i,"formEncType",f.formEncType,f,null),te(e,i,"formMethod",f.formMethod,f,null),te(e,i,"formTarget",f.formTarget,f,null)):(te(e,i,"encType",f.encType,f,null),te(e,i,"method",f.method,f,null),te(e,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ea(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=ss);break;case"onScroll":l!=null&&It("scroll",e);break;case"onScrollEnd":l!=null&&It("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Ea(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":It("beforetoggle",e),It("toggle",e),xa(e,"popover",l);break;case"xlinkActuate":Ne(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ne(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ne(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ne(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ne(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ne(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ne(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ne(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ne(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":xa(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gu.get(a)||a,xa(e,a,l))}}function am(e,i,a,l,f,m){switch(a){case"style":Qo(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?mn(e,l):(typeof l=="number"||typeof l=="bigint")&&mn(e,""+l);break;case"onScroll":l!=null&&It("scroll",e);break;case"onScrollEnd":l!=null&&It("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zo.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=e[ze]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(i,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,f);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):xa(e,a,l)}}}function Ze(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",e),It("load",e);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:te(e,i,m,x,a,null)}}f&&te(e,i,"srcSet",a.srcSet,a,null),l&&te(e,i,"src",a.src,a,null);return;case"input":It("invalid",e);var w=m=x=f=null,I=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":f=J;break;case"type":x=J;break;case"checked":I=J;break;case"defaultChecked":H=J;break;case"value":m=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:te(e,i,l,J,a,null)}}Fu(e,m,w,I,H,x,f,!1);return;case"select":It("invalid",e),l=x=m=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":m=w;break;case"defaultValue":x=w;break;case"multiple":l=w;default:te(e,i,f,w,a,null)}i=m,a=x,e.multiple=!!l,i!=null?Ni(e,!!l,i,!1):a!=null&&Ni(e,!!l,a,!0);return;case"textarea":It("invalid",e),m=f=l=null;for(x in a)if(a.hasOwnProperty(x)&&(w=a[x],w!=null))switch(x){case"value":l=w;break;case"defaultValue":f=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:te(e,i,x,w,a,null)}Ci(e,l,f,m);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:te(e,i,I,l,a,null)}return;case"dialog":It("beforetoggle",e),It("toggle",e),It("cancel",e),It("close",e);break;case"iframe":case"object":It("load",e);break;case"video":case"audio":for(l=0;l<Cl.length;l++)It(Cl[l],e);break;case"image":It("error",e),It("load",e);break;case"details":It("toggle",e);break;case"embed":case"source":case"link":It("error",e),It("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:te(e,i,H,l,a,null)}return;default:if(Ta(i)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&am(e,i,J,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&te(e,i,w,l,a,null))}function gS(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,w=null,I=null,H=null,J=null;for($ in a){var nt=a[$];if(a.hasOwnProperty($)&&nt!=null)switch($){case"checked":break;case"value":break;case"defaultValue":I=nt;default:l.hasOwnProperty($)||te(e,i,$,null,l,nt)}}for(var Y in l){var $=l[Y];if(nt=a[Y],l.hasOwnProperty(Y)&&($!=null||nt!=null))switch(Y){case"type":m=$;break;case"name":f=$;break;case"checked":H=$;break;case"defaultChecked":J=$;break;case"value":x=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:$!==nt&&te(e,i,Y,$,l,nt)}}_a(e,x,w,I,H,J,m,f);return;case"select":$=x=w=Y=null;for(m in a)if(I=a[m],a.hasOwnProperty(m)&&I!=null)switch(m){case"value":break;case"multiple":$=I;default:l.hasOwnProperty(m)||te(e,i,m,null,l,I)}for(f in l)if(m=l[f],I=a[f],l.hasOwnProperty(f)&&(m!=null||I!=null))switch(f){case"value":Y=m;break;case"defaultValue":w=m;break;case"multiple":x=m;default:m!==I&&te(e,i,f,m,l,I)}i=w,a=x,l=$,Y!=null?Ni(e,!!a,Y,!1):!!l!=!!a&&(i!=null?Ni(e,!!a,i,!0):Ni(e,!!a,a?[]:"",!1));return;case"textarea":$=Y=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:te(e,i,w,null,l,f)}for(x in l)if(f=l[x],m=a[x],l.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":Y=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&te(e,i,x,f,l,m)}qu(e,Y,$);return;case"option":for(var gt in a)if(Y=a[gt],a.hasOwnProperty(gt)&&Y!=null&&!l.hasOwnProperty(gt))switch(gt){case"selected":e.selected=!1;break;default:te(e,i,gt,null,l,Y)}for(I in l)if(Y=l[I],$=a[I],l.hasOwnProperty(I)&&Y!==$&&(Y!=null||$!=null))switch(I){case"selected":e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:te(e,i,I,Y,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in a)Y=a[Tt],a.hasOwnProperty(Tt)&&Y!=null&&!l.hasOwnProperty(Tt)&&te(e,i,Tt,null,l,Y);for(H in l)if(Y=l[H],$=a[H],l.hasOwnProperty(H)&&Y!==$&&(Y!=null||$!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:te(e,i,H,Y,l,$)}return;default:if(Ta(i)){for(var ee in a)Y=a[ee],a.hasOwnProperty(ee)&&Y!==void 0&&!l.hasOwnProperty(ee)&&am(e,i,ee,void 0,l,Y);for(J in l)Y=l[J],$=a[J],!l.hasOwnProperty(J)||Y===$||Y===void 0&&$===void 0||am(e,i,J,Y,l,$);return}}for(var z in a)Y=a[z],a.hasOwnProperty(z)&&Y!=null&&!l.hasOwnProperty(z)&&te(e,i,z,null,l,Y);for(nt in l)Y=l[nt],$=a[nt],!l.hasOwnProperty(nt)||Y===$||Y==null&&$==null||te(e,i,nt,Y,l,$)}function sb(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],m=f.transferSize,x=f.initiatorType,w=f.duration;if(m&&w&&sb(x)){for(x=0,w=f.responseEnd,l+=1;l<a.length;l++){var I=a[l],H=I.startTime;if(H>w)break;var J=I.transferSize,nt=I.initiatorType;J&&sb(nt)&&(I=I.responseEnd,x+=J*(I<w?1:(w-H)/(I-H)))}if(--l,i+=8*(m+x)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var om=null,lm=null;function Yc(e){return e.nodeType===9?e:e.ownerDocument}function ib(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rb(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function um(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var cm=null;function vS(){var e=window.event;return e&&e.type==="popstate"?e===cm?!1:(cm=e,!0):(cm=null,!1)}var ab=typeof setTimeout=="function"?setTimeout:void 0,bS=typeof clearTimeout=="function"?clearTimeout:void 0,ob=typeof Promise=="function"?Promise:void 0,xS=typeof queueMicrotask=="function"?queueMicrotask:typeof ob<"u"?function(e){return ob.resolve(null).then(e).catch(_S)}:ab;function _S(e){setTimeout(function(){throw e})}function Zi(e){return e==="head"}function lb(e,i){var a=i,l=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(f),so(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Dl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Dl(a);for(var m=a.firstChild;m;){var x=m.nextSibling,w=m.nodeName;m[Ts]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=x}}else a==="body"&&Dl(e.ownerDocument.body);a=f}while(a);so(i)}function ub(e,i){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function hm(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":hm(a),ba(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function TS(e,i,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ts])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=Kn(e.nextSibling),e===null)break}return null}function ES(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Kn(e.nextSibling),e===null))return null;return e}function cb(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Kn(e.nextSibling),e===null))return null;return e}function fm(e){return e.data==="$?"||e.data==="$~"}function dm(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function wS(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Kn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var mm=null;function hb(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return Kn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function fb(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function db(e,i,a){switch(i=Yc(a),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Dl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ba(e)}var Qn=new Map,mb=new Set;function Kc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yi=ot.d;ot.d={f:SS,r:AS,D:NS,C:CS,L:RS,m:DS,X:VS,S:jS,M:MS};function SS(){var e=yi.f(),i=Lc();return e||i}function AS(e){var i=Pn(e);i!==null&&i.tag===5&&i.type==="form"?j0(i):yi.r(e)}var to=typeof document>"u"?null:document;function pb(e,i,a){var l=to;if(l&&typeof i=="string"&&i){var f=dn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),mb.has(f)||(mb.add(f),e={rel:e,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Ze(i,"link",e),Ae(i),l.head.appendChild(i)))}}function NS(e){yi.D(e),pb("dns-prefetch",e,null)}function CS(e,i){yi.C(e,i),pb("preconnect",e,i)}function RS(e,i,a){yi.L(e,i,a);var l=to;if(l&&e&&i){var f='link[rel="preload"][as="'+dn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+dn(a.imageSizes)+'"]')):f+='[href="'+dn(e)+'"]';var m=f;switch(i){case"style":m=eo(e);break;case"script":m=no(e)}Qn.has(m)||(e=_({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Qn.set(m,e),l.querySelector(f)!==null||i==="style"&&l.querySelector(jl(m))||i==="script"&&l.querySelector(Vl(m))||(i=l.createElement("link"),Ze(i,"link",e),Ae(i),l.head.appendChild(i)))}}function DS(e,i){yi.m(e,i);var a=to;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+dn(l)+'"][href="'+dn(e)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=no(e)}if(!Qn.has(m)&&(e=_({rel:"modulepreload",href:e},i),Qn.set(m,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Vl(m)))return}l=a.createElement("link"),Ze(l,"link",e),Ae(l),a.head.appendChild(l)}}}function jS(e,i,a){yi.S(e,i,a);var l=to;if(l&&e){var f=ws(l).hoistableStyles,m=eo(e);i=i||"default";var x=f.get(m);if(!x){var w={loading:0,preload:null};if(x=l.querySelector(jl(m)))w.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Qn.get(m))&&pm(e,a);var I=x=l.createElement("link");Ae(I),Ze(I,"link",e),I._p=new Promise(function(H,J){I.onload=H,I.onerror=J}),I.addEventListener("load",function(){w.loading|=1}),I.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Qc(x,i,l)}x={type:"stylesheet",instance:x,count:1,state:w},f.set(m,x)}}}function VS(e,i){yi.X(e,i);var a=to;if(a&&e){var l=ws(a).hoistableScripts,f=no(e),m=l.get(f);m||(m=a.querySelector(Vl(f)),m||(e=_({src:e,async:!0},i),(i=Qn.get(f))&&gm(e,i),m=a.createElement("script"),Ae(m),Ze(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function MS(e,i){yi.M(e,i);var a=to;if(a&&e){var l=ws(a).hoistableScripts,f=no(e),m=l.get(f);m||(m=a.querySelector(Vl(f)),m||(e=_({src:e,async:!0,type:"module"},i),(i=Qn.get(f))&&gm(e,i),m=a.createElement("script"),Ae(m),Ze(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function gb(e,i,a,l){var f=(f=jt.current)?Kc(f):null;if(!f)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=eo(a.href),a=ws(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=eo(a.href);var m=ws(f).hoistableStyles,x=m.get(e);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,x),(m=f.querySelector(jl(e)))&&!m._p&&(x.instance=m,x.state.loading=5),Qn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(e,a),m||IS(f,e,a,x.state))),i&&l===null)throw Error(r(528,""));return x}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=no(a),a=ws(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function eo(e){return'href="'+dn(e)+'"'}function jl(e){return'link[rel="stylesheet"]['+e+"]"}function yb(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function IS(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Ze(i,"link",a),Ae(i),e.head.appendChild(i))}function no(e){return'[src="'+dn(e)+'"]'}function Vl(e){return"script[async]"+e}function vb(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+dn(a.href)+'"]');if(l)return i.instance=l,Ae(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ae(l),Ze(l,"style",f),Qc(l,a.precedence,e),i.instance=l;case"stylesheet":f=eo(a.href);var m=e.querySelector(jl(f));if(m)return i.state.loading|=4,i.instance=m,Ae(m),m;l=yb(a),(f=Qn.get(f))&&pm(l,f),m=(e.ownerDocument||e).createElement("link"),Ae(m);var x=m;return x._p=new Promise(function(w,I){x.onload=w,x.onerror=I}),Ze(m,"link",l),i.state.loading|=4,Qc(m,a.precedence,e),i.instance=m;case"script":return m=no(a.src),(f=e.querySelector(Vl(m)))?(i.instance=f,Ae(f),f):(l=a,(f=Qn.get(m))&&(l=_({},a),gm(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ae(f),Ze(f,"link",l),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Qc(l,a.precedence,e));return i.instance}function Qc(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,x=0;x<l.length;x++){var w=l[x];if(w.dataset.precedence===i)m=w;else if(m!==f)break}m?m.parentNode.insertBefore(e,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function pm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function gm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Xc=null;function bb(e,i,a){if(Xc===null){var l=new Map,f=Xc=new Map;f.set(a,l)}else f=Xc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var m=a[f];if(!(m[Ts]||m[Se]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(i)||"";x=e+x;var w=l.get(x);w?w.push(m):l.set(x,[m])}}return l}function xb(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function kS(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function _b(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function OS(e,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=eo(l.href),m=i.querySelector(jl(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=$c.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=m,Ae(m);return}m=i.ownerDocument||i,l=yb(l),(f=Qn.get(f))&&pm(l,f),m=m.createElement("link"),Ae(m);var x=m;x._p=new Promise(function(w,I){x.onload=w,x.onerror=I}),Ze(m,"link",l),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=$c.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var ym=0;function PS(e,i){return e.stylesheets&&e.count===0&&Wc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Wc(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+i);0<e.imgBytes&&ym===0&&(ym=62500*yS());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wc(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>ym?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function $c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Zc=null;function Wc(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Zc=new Map,i.forEach(LS,e),Zc=null,$c.call(e))}function LS(e,i){if(!(i.state.loading&4)){var a=Zc.get(e);if(a)var l=a.get(null);else{a=new Map,Zc.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}f=i.instance,x=f.getAttribute("data-precedence"),m=a.get(x)||l,m===l&&a.set(null,f),a.set(x,f),this.count++,l=$c.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Ml={$$typeof:Q,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function US(e,i,a,l,f,m,x,w,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xs(0),this.hiddenUpdates=xs(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Tb(e,i,a,l,f,m,x,w,I,H,J,nt){return e=new US(e,i,a,x,I,H,J,nt,w),i=1,m===!0&&(i|=24),m=Rn(3,null,null,i),e.current=m,m.stateNode=e,i=$f(),i.refCount++,e.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:i},td(m),e}function Eb(e){return e?(e=Ma,e):Ma}function wb(e,i,a,l,f,m){f=Eb(f),l.context===null?l.context=f:l.pendingContext=f,l=Bi(i),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=zi(e,l,i),a!==null&&(bn(a,e,i),hl(a,e,i))}function Sb(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function vm(e,i){Sb(e,i),(e=e.alternate)&&Sb(e,i)}function Ab(e){if(e.tag===13||e.tag===31){var i=Ur(e,67108864);i!==null&&bn(i,e,67108864),vm(e,67108864)}}function Nb(e){if(e.tag===13||e.tag===31){var i=In();i=Nr(i);var a=Ur(e,i);a!==null&&bn(a,e,i),vm(e,i)}}var Jc=!0;function BS(e,i,a,l){var f=B.T;B.T=null;var m=ot.p;try{ot.p=2,bm(e,i,a,l)}finally{ot.p=m,B.T=f}}function zS(e,i,a,l){var f=B.T;B.T=null;var m=ot.p;try{ot.p=8,bm(e,i,a,l)}finally{ot.p=m,B.T=f}}function bm(e,i,a,l){if(Jc){var f=xm(l);if(f===null)rm(e,i,l,th,a),Rb(e,l);else if(qS(f,e,i,a,l))l.stopPropagation();else if(Rb(e,l),i&4&&-1<FS.indexOf(e)){for(;f!==null;){var m=Pn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=vs(m.pendingLanes);if(x!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var I=1<<31-ve(x);w.entanglements[1]|=I,x&=~I}Ps(m),(Kt&6)===0&&(Oc=un()+500,Nl(0))}}break;case 31:case 13:w=Ur(m,2),w!==null&&bn(w,m,2),Lc(),vm(m,2)}if(m=xm(l),m===null&&rm(e,i,l,th,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else rm(e,i,l,null,a)}}function xm(e){return e=Ln(e),_m(e)}var th=null;function _m(e){if(th=null,e=Es(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=c(i),e!==null)return e;e=null}else if(a===31){if(e=d(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return th=e,null}function Cb(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Er()){case Oo:return 2;case Po:return 8;case Si:case Nf:return 32;case Vu:return 268435456;default:return 32}default:return 32}}var Tm=!1,Wi=null,Ji=null,tr=null,Il=new Map,kl=new Map,er=[],FS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rb(e,i){switch(e){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Il.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":kl.delete(i.pointerId)}}function Ol(e,i,a,l,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Pn(i),i!==null&&Ab(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function qS(e,i,a,l,f){switch(i){case"focusin":return Wi=Ol(Wi,e,i,a,l,f),!0;case"dragenter":return Ji=Ol(Ji,e,i,a,l,f),!0;case"mouseover":return tr=Ol(tr,e,i,a,l,f),!0;case"pointerover":var m=f.pointerId;return Il.set(m,Ol(Il.get(m)||null,e,i,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,kl.set(m,Ol(kl.get(m)||null,e,i,a,l,f)),!0}return!1}function Db(e){var i=Es(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){e.blockedOn=i,es(e.priority,function(){Nb(a)});return}}else if(i===31){if(i=d(a),i!==null){e.blockedOn=i,es(e.priority,function(){Nb(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function eh(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=xm(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Xo=l,a.target.dispatchEvent(l),Xo=null}else return i=Pn(a),i!==null&&Ab(i),e.blockedOn=a,!1;i.shift()}return!0}function jb(e,i,a){eh(e)&&a.delete(i)}function HS(){Tm=!1,Wi!==null&&eh(Wi)&&(Wi=null),Ji!==null&&eh(Ji)&&(Ji=null),tr!==null&&eh(tr)&&(tr=null),Il.forEach(jb),kl.forEach(jb)}function nh(e,i){e.blockedOn===i&&(e.blockedOn=null,Tm||(Tm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HS)))}var sh=null;function Vb(e){sh!==e&&(sh=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){sh===e&&(sh=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],f=e[i+2];if(typeof l!="function"){if(_m(l||a)===null)continue;break}var m=Pn(a);m!==null&&(e.splice(i,3),i-=3,xd(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function so(e){function i(I){return nh(I,e)}Wi!==null&&nh(Wi,e),Ji!==null&&nh(Ji,e),tr!==null&&nh(tr,e),Il.forEach(i),kl.forEach(i);for(var a=0;a<er.length;a++){var l=er[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<er.length&&(a=er[0],a.blockedOn===null);)Db(a),a.blockedOn===null&&er.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],x=f[ze]||null;if(typeof m=="function")x||Vb(a);else if(x){var w=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[ze]||null)w=x.formAction;else if(_m(f)!==null)continue}else w=x.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Vb(a)}}}function Mb(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Em(e){this._internalRoot=e}ih.prototype.render=Em.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=In();wb(a,l,e,i,null,null)},ih.prototype.unmount=Em.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;wb(e.current,2,null,e,null,null),Lc(),i[_s]=null}};function ih(e){this._internalRoot=e}ih.prototype.unstable_scheduleHydration=function(e){if(e){var i=Lu();e={blockedOn:null,target:e,priority:i};for(var a=0;a<er.length&&i!==0&&i<er[a].priority;a++);er.splice(a,0,e),a===0&&Db(e)}};var Ib=t.version;if(Ib!=="19.2.3")throw Error(r(527,Ib,"19.2.3"));ot.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(i),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var GS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{Jn=rh.inject(GS),Ye=rh}catch{}}return Ll.createRoot=function(e,i){if(!o(e))throw Error(r(299));var a=!1,l="",f=z0,m=F0,x=q0;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(x=i.onRecoverableError)),i=Tb(e,1,!1,null,null,a,l,null,f,m,x,Mb),e[_s]=i.current,im(e),new Em(i)},Ll.hydrateRoot=function(e,i,a){if(!o(e))throw Error(r(299));var l=!1,f="",m=z0,x=F0,w=q0,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),i=Tb(e,1,!0,i,a??null,l,f,I,m,x,w,Mb),i.context=Eb(null),a=i.current,l=In(),l=Nr(l),f=Bi(l),f.callback=null,zi(a,f,l),a=l,i.current.lanes=a,Sr(i,a),Ps(i),e[_s]=i.current,im(e),new ih(i)},Ll.version="19.2.3",Ll}var Hb;function eA(){if(Hb)return Am.exports;Hb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Am.exports=tA(),Am.exports}var nA=eA();const sA=A1(nA),iA=()=>{};var Gb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=function(n){const t=[];let s=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?t[s++]=o:o<2048?(t[s++]=o>>6|192,t[s++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),t[s++]=o>>18|240,t[s++]=o>>12&63|128,t[s++]=o>>6&63|128,t[s++]=o&63|128):(t[s++]=o>>12|224,t[s++]=o>>6&63|128,t[s++]=o&63|128)}return t},rA=function(n){const t=[];let s=0,r=0;for(;s<n.length;){const o=n[s++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=n[s++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=n[s++],c=n[s++],d=n[s++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=n[s++],c=n[s++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},C1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const u=n[o],c=o+1<n.length,d=c?n[o+1]:0,g=o+2<n.length,y=g?n[o+2]:0,b=u>>2,_=(u&3)<<4|d>>4;let T=(d&15)<<2|y>>6,j=y&63;g||(j=64,c||(T=64)),r.push(s[b],s[_],s[T],s[j])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(N1(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):rA(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const u=s[n.charAt(o++)],d=o<n.length?s[n.charAt(o)]:0;++o;const y=o<n.length?s[n.charAt(o)]:64;++o;const _=o<n.length?s[n.charAt(o)]:64;if(++o,u==null||d==null||y==null||_==null)throw new aA;const T=u<<2|d>>4;if(r.push(T),y!==64){const j=d<<4&240|y>>2;if(r.push(j),_!==64){const k=y<<6&192|_;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class aA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oA=function(n){const t=N1(n);return C1.encodeByteArray(t,!0)},Ch=function(n){return oA(n).replace(/\./g,"")},lA=function(n){try{return C1.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=()=>uA().__FIREBASE_DEFAULTS__,hA=()=>{if(typeof process>"u"||typeof Gb>"u")return;const n=Gb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&lA(n[1]);return t&&JSON.parse(t)},Zp=()=>{try{return iA()||cA()||hA()||fA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dA=n=>{var t,s;return(s=(t=Zp())==null?void 0:t.emulatorHosts)==null?void 0:s[n]},R1=n=>{const t=dA(n);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),r]:[t.substring(0,s),r]},D1=()=>{var n;return(n=Zp())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function j1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=t||"demo-project",o=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ch(JSON.stringify(s)),Ch(JSON.stringify(c)),""].join(".")}const Kl={};function pA(){const n={prod:[],emulator:[]};for(const t of Object.keys(Kl))Kl[t]?n.emulator.push(t):n.prod.push(t);return n}function gA(n){let t=document.getElementById(n),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),s=!0),{created:s,element:t}}let Yb=!1;function M1(n,t){if(typeof window>"u"||typeof document>"u"||!Jh(window.location.host)||Kl[n]===t||Kl[n]||Yb)return;Kl[n]=t;function s(T){return`__firebase__banner__${T}`}const r="__firebase__banner",u=pA().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,j){T.setAttribute("width","24"),T.setAttribute("id",j),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Yb=!0,c()},T}function b(T,j){T.setAttribute("id",j),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=gA(r),j=s("text"),k=document.getElementById(j)||document.createElement("span"),L=s("learnmore"),U=document.getElementById(L)||document.createElement("a"),G=s("preprendIcon"),W=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;d(Q),b(U,L);const at=y();g(W,G),Q.append(W,k,U,at),document.body.appendChild(Q)}u?(k.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vA(){var t;const n=(t=Zp())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bA(){return!vA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xA(){try{return typeof indexedDB=="object"}catch{return!1}}function _A(){return new Promise((n,t)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(s){t(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="FirebaseError";class ca extends Error{constructor(t,s,r){super(s),this.code=t,this.customData=r,this.name=TA,Object.setPrototypeOf(this,ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I1.prototype.create)}}class I1{constructor(t,s,r){this.service=t,this.serviceName=s,this.errors=r}create(t,...s){const r=s[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?EA(u,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new ca(o,d,r)}}function EA(n,t){return n.replace(wA,(s,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const wA=/\{\$([^}]+)}/g;function Rh(n,t){if(n===t)return!0;const s=Object.keys(n),r=Object.keys(t);for(const o of s){if(!r.includes(o))return!1;const u=n[o],c=t[o];if(Kb(u)&&Kb(c)){if(!Rh(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!s.includes(o))return!1;return!0}function Kb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n){return n&&n._delegate?n._delegate:n}class yo{constructor(t,s,r){this.name=t,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const r=new mA;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(NA(t))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Jr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Jr){return this.instances.has(t)}getOptions(t=Jr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[u,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);r===d&&c.resolve(o)}return o}onInit(t,s){const r=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,s){const r=this.onInitCallbacks.get(s);if(r)for(const o of r)try{o(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AA(t),options:s}),this.instances.set(t,r),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Jr){return this.component?this.component.multipleInstances?t:Jr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AA(n){return n===Jr?void 0:n}function NA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new SA(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qt||(qt={}));const RA={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},DA=qt.INFO,jA={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},VA=(n,t,...s)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),o=jA[t];if(o)console[o](`[${r}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class k1{constructor(t){this.name=t,this._logLevel=DA,this._logHandler=VA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?RA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...t),this._logHandler(this,qt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...t),this._logHandler(this,qt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...t),this._logHandler(this,qt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...t),this._logHandler(this,qt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...t),this._logHandler(this,qt.ERROR,...t)}}const MA=(n,t)=>t.some(s=>n instanceof s);let Qb,Xb;function IA(){return Qb||(Qb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kA(){return Xb||(Xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O1=new WeakMap,np=new WeakMap,P1=new WeakMap,Dm=new WeakMap,Wp=new WeakMap;function OA(n){const t=new Promise((s,r)=>{const o=()=>{n.removeEventListener("success",u),n.removeEventListener("error",c)},u=()=>{s(ar(n.result)),o()},c=()=>{r(n.error),o()};n.addEventListener("success",u),n.addEventListener("error",c)});return t.then(s=>{s instanceof IDBCursor&&O1.set(s,n)}).catch(()=>{}),Wp.set(t,n),t}function PA(n){if(np.has(n))return;const t=new Promise((s,r)=>{const o=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",c),n.removeEventListener("abort",c)},u=()=>{s(),o()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",u),n.addEventListener("error",c),n.addEventListener("abort",c)});np.set(n,t)}let sp={get(n,t,s){if(n instanceof IDBTransaction){if(t==="done")return np.get(n);if(t==="objectStoreNames")return n.objectStoreNames||P1.get(n);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ar(n[t])},set(n,t,s){return n[t]=s,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function LA(n){sp=n(sp)}function UA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const r=n.call(jm(this),t,...s);return P1.set(r,t.sort?t.sort():[t]),ar(r)}:kA().includes(n)?function(...t){return n.apply(jm(this),t),ar(O1.get(this))}:function(...t){return ar(n.apply(jm(this),t))}}function BA(n){return typeof n=="function"?UA(n):(n instanceof IDBTransaction&&PA(n),MA(n,IA())?new Proxy(n,sp):n)}function ar(n){if(n instanceof IDBRequest)return OA(n);if(Dm.has(n))return Dm.get(n);const t=BA(n);return t!==n&&(Dm.set(n,t),Wp.set(t,n)),t}const jm=n=>Wp.get(n);function zA(n,t,{blocked:s,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(n,t),d=ar(c);return r&&c.addEventListener("upgradeneeded",g=>{r(ar(c.result),g.oldVersion,g.newVersion,ar(c.transaction),g)}),s&&c.addEventListener("blocked",g=>s(g.oldVersion,g.newVersion,g)),d.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const FA=["get","getKey","getAll","getAllKeys","count"],qA=["put","add","delete","clear"],Vm=new Map;function $b(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Vm.get(t))return Vm.get(t);const s=t.replace(/FromIndex$/,""),r=t!==s,o=qA.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(o||FA.includes(s)))return;const u=async function(c,...d){const g=this.transaction(c,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(d.shift())),(await Promise.all([y[s](...d),o&&g.done]))[0]};return Vm.set(t,u),u}LA(n=>({...n,get:(t,s,r)=>$b(t,s)||n.get(t,s,r),has:(t,s)=>!!$b(t,s)||n.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(GA(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function GA(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ip="@firebase/app",Zb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new k1("@firebase/app"),YA="@firebase/app-compat",KA="@firebase/analytics-compat",QA="@firebase/analytics",XA="@firebase/app-check-compat",$A="@firebase/app-check",ZA="@firebase/auth",WA="@firebase/auth-compat",JA="@firebase/database",tN="@firebase/data-connect",eN="@firebase/database-compat",nN="@firebase/functions",sN="@firebase/functions-compat",iN="@firebase/installations",rN="@firebase/installations-compat",aN="@firebase/messaging",oN="@firebase/messaging-compat",lN="@firebase/performance",uN="@firebase/performance-compat",cN="@firebase/remote-config",hN="@firebase/remote-config-compat",fN="@firebase/storage",dN="@firebase/storage-compat",mN="@firebase/firestore",pN="@firebase/ai",gN="@firebase/firestore-compat",yN="firebase",vN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]",bN={[ip]:"fire-core",[YA]:"fire-core-compat",[QA]:"fire-analytics",[KA]:"fire-analytics-compat",[$A]:"fire-app-check",[XA]:"fire-app-check-compat",[ZA]:"fire-auth",[WA]:"fire-auth-compat",[JA]:"fire-rtdb",[tN]:"fire-data-connect",[eN]:"fire-rtdb-compat",[nN]:"fire-fn",[sN]:"fire-fn-compat",[iN]:"fire-iid",[rN]:"fire-iid-compat",[aN]:"fire-fcm",[oN]:"fire-fcm-compat",[lN]:"fire-perf",[uN]:"fire-perf-compat",[cN]:"fire-rc",[hN]:"fire-rc-compat",[fN]:"fire-gcs",[dN]:"fire-gcs-compat",[mN]:"fire-fst",[gN]:"fire-fst-compat",[pN]:"fire-vertex","fire-js":"fire-js",[yN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Map,xN=new Map,ap=new Map;function Wb(n,t){try{n.container.addComponent(t)}catch(s){bi.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,s)}}function nu(n){const t=n.name;if(ap.has(t))return bi.debug(`There were multiple attempts to register component ${t}.`),!1;ap.set(t,n);for(const s of Dh.values())Wb(s,n);for(const s of xN.values())Wb(s,n);return!0}function L1(n,t){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(t)}function U1(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new I1("app","Firebase",_N);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(t,s,r){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=vN;function z1(n,t={}){let s=n;typeof t!="object"&&(t={name:t});const r={name:rp,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw or.create("bad-app-name",{appName:String(o)});if(s||(s=D1()),!s)throw or.create("no-options");const u=Dh.get(o);if(u){if(Rh(s,u.options)&&Rh(r,u.config))return u;throw or.create("duplicate-app",{appName:o})}const c=new CA(o);for(const g of ap.values())c.addComponent(g);const d=new TN(s,r,c);return Dh.set(o,d),d}function F1(n=rp){const t=Dh.get(n);if(!t&&n===rp&&D1())return z1();if(!t)throw or.create("no-app",{appName:n});return t}function lr(n,t,s){let r=bN[n]??n;s&&(r+=`-${s}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),bi.warn(c.join(" "));return}nu(new yo(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="firebase-heartbeat-database",wN=1,su="firebase-heartbeat-store";let Mm=null;function q1(){return Mm||(Mm=zA(EN,wN,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(su)}catch(s){console.warn(s)}}}}).catch(n=>{throw or.create("idb-open",{originalErrorMessage:n.message})})),Mm}async function SN(n){try{const s=(await q1()).transaction(su),r=await s.objectStore(su).get(H1(n));return await s.done,r}catch(t){if(t instanceof ca)bi.warn(t.message);else{const s=or.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});bi.warn(s.message)}}}async function Jb(n,t){try{const r=(await q1()).transaction(su,"readwrite");await r.objectStore(su).put(t,H1(n)),await r.done}catch(s){if(s instanceof ca)bi.warn(s.message);else{const r=or.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});bi.warn(r.message)}}}function H1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=1024,NN=30;class CN{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new DN(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,s;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=tx();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>NN){const c=jN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){bi.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=tx(),{heartbeatsToSend:r,unsentEntries:o}=RN(this._heartbeatsCache.heartbeats),u=Ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(s){return bi.warn(s),""}}}function tx(){return new Date().toISOString().substring(0,10)}function RN(n,t=AN){const s=[];let r=n.slice();for(const o of n){const u=s.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),ex(s)>t){u.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),ex(s)>t){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class DN{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xA()?_A().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await SN(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function ex(n){return Ch(JSON.stringify({version:2,heartbeats:n})).length}function jN(n){if(n.length===0)return-1;let t=0,s=n[0].date;for(let r=1;r<n.length;r++)n[r].date<s&&(s=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(n){nu(new yo("platform-logger",t=>new HA(t),"PRIVATE")),nu(new yo("heartbeat",t=>new CN(t),"PRIVATE")),lr(ip,Zb,n),lr(ip,Zb,"esm2020"),lr("fire-js","")}VN("");var nx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,G1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,N){function S(){}S.prototype=N.prototype,D.F=N.prototype,D.prototype=new S,D.prototype.constructor=D,D.D=function(A,V,R){for(var M=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)M[lt-2]=arguments[lt];return N.prototype[V].apply(A,M)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,N,S){S||(S=0);const A=Array(16);if(typeof N=="string")for(var V=0;V<16;++V)A[V]=N.charCodeAt(S++)|N.charCodeAt(S++)<<8|N.charCodeAt(S++)<<16|N.charCodeAt(S++)<<24;else for(V=0;V<16;++V)A[V]=N[S++]|N[S++]<<8|N[S++]<<16|N[S++]<<24;N=D.g[0],S=D.g[1],V=D.g[2];let R=D.g[3],M;M=N+(R^S&(V^R))+A[0]+3614090360&4294967295,N=S+(M<<7&4294967295|M>>>25),M=R+(V^N&(S^V))+A[1]+3905402710&4294967295,R=N+(M<<12&4294967295|M>>>20),M=V+(S^R&(N^S))+A[2]+606105819&4294967295,V=R+(M<<17&4294967295|M>>>15),M=S+(N^V&(R^N))+A[3]+3250441966&4294967295,S=V+(M<<22&4294967295|M>>>10),M=N+(R^S&(V^R))+A[4]+4118548399&4294967295,N=S+(M<<7&4294967295|M>>>25),M=R+(V^N&(S^V))+A[5]+1200080426&4294967295,R=N+(M<<12&4294967295|M>>>20),M=V+(S^R&(N^S))+A[6]+2821735955&4294967295,V=R+(M<<17&4294967295|M>>>15),M=S+(N^V&(R^N))+A[7]+4249261313&4294967295,S=V+(M<<22&4294967295|M>>>10),M=N+(R^S&(V^R))+A[8]+1770035416&4294967295,N=S+(M<<7&4294967295|M>>>25),M=R+(V^N&(S^V))+A[9]+2336552879&4294967295,R=N+(M<<12&4294967295|M>>>20),M=V+(S^R&(N^S))+A[10]+4294925233&4294967295,V=R+(M<<17&4294967295|M>>>15),M=S+(N^V&(R^N))+A[11]+2304563134&4294967295,S=V+(M<<22&4294967295|M>>>10),M=N+(R^S&(V^R))+A[12]+1804603682&4294967295,N=S+(M<<7&4294967295|M>>>25),M=R+(V^N&(S^V))+A[13]+4254626195&4294967295,R=N+(M<<12&4294967295|M>>>20),M=V+(S^R&(N^S))+A[14]+2792965006&4294967295,V=R+(M<<17&4294967295|M>>>15),M=S+(N^V&(R^N))+A[15]+1236535329&4294967295,S=V+(M<<22&4294967295|M>>>10),M=N+(V^R&(S^V))+A[1]+4129170786&4294967295,N=S+(M<<5&4294967295|M>>>27),M=R+(S^V&(N^S))+A[6]+3225465664&4294967295,R=N+(M<<9&4294967295|M>>>23),M=V+(N^S&(R^N))+A[11]+643717713&4294967295,V=R+(M<<14&4294967295|M>>>18),M=S+(R^N&(V^R))+A[0]+3921069994&4294967295,S=V+(M<<20&4294967295|M>>>12),M=N+(V^R&(S^V))+A[5]+3593408605&4294967295,N=S+(M<<5&4294967295|M>>>27),M=R+(S^V&(N^S))+A[10]+38016083&4294967295,R=N+(M<<9&4294967295|M>>>23),M=V+(N^S&(R^N))+A[15]+3634488961&4294967295,V=R+(M<<14&4294967295|M>>>18),M=S+(R^N&(V^R))+A[4]+3889429448&4294967295,S=V+(M<<20&4294967295|M>>>12),M=N+(V^R&(S^V))+A[9]+568446438&4294967295,N=S+(M<<5&4294967295|M>>>27),M=R+(S^V&(N^S))+A[14]+3275163606&4294967295,R=N+(M<<9&4294967295|M>>>23),M=V+(N^S&(R^N))+A[3]+4107603335&4294967295,V=R+(M<<14&4294967295|M>>>18),M=S+(R^N&(V^R))+A[8]+1163531501&4294967295,S=V+(M<<20&4294967295|M>>>12),M=N+(V^R&(S^V))+A[13]+2850285829&4294967295,N=S+(M<<5&4294967295|M>>>27),M=R+(S^V&(N^S))+A[2]+4243563512&4294967295,R=N+(M<<9&4294967295|M>>>23),M=V+(N^S&(R^N))+A[7]+1735328473&4294967295,V=R+(M<<14&4294967295|M>>>18),M=S+(R^N&(V^R))+A[12]+2368359562&4294967295,S=V+(M<<20&4294967295|M>>>12),M=N+(S^V^R)+A[5]+4294588738&4294967295,N=S+(M<<4&4294967295|M>>>28),M=R+(N^S^V)+A[8]+2272392833&4294967295,R=N+(M<<11&4294967295|M>>>21),M=V+(R^N^S)+A[11]+1839030562&4294967295,V=R+(M<<16&4294967295|M>>>16),M=S+(V^R^N)+A[14]+4259657740&4294967295,S=V+(M<<23&4294967295|M>>>9),M=N+(S^V^R)+A[1]+2763975236&4294967295,N=S+(M<<4&4294967295|M>>>28),M=R+(N^S^V)+A[4]+1272893353&4294967295,R=N+(M<<11&4294967295|M>>>21),M=V+(R^N^S)+A[7]+4139469664&4294967295,V=R+(M<<16&4294967295|M>>>16),M=S+(V^R^N)+A[10]+3200236656&4294967295,S=V+(M<<23&4294967295|M>>>9),M=N+(S^V^R)+A[13]+681279174&4294967295,N=S+(M<<4&4294967295|M>>>28),M=R+(N^S^V)+A[0]+3936430074&4294967295,R=N+(M<<11&4294967295|M>>>21),M=V+(R^N^S)+A[3]+3572445317&4294967295,V=R+(M<<16&4294967295|M>>>16),M=S+(V^R^N)+A[6]+76029189&4294967295,S=V+(M<<23&4294967295|M>>>9),M=N+(S^V^R)+A[9]+3654602809&4294967295,N=S+(M<<4&4294967295|M>>>28),M=R+(N^S^V)+A[12]+3873151461&4294967295,R=N+(M<<11&4294967295|M>>>21),M=V+(R^N^S)+A[15]+530742520&4294967295,V=R+(M<<16&4294967295|M>>>16),M=S+(V^R^N)+A[2]+3299628645&4294967295,S=V+(M<<23&4294967295|M>>>9),M=N+(V^(S|~R))+A[0]+4096336452&4294967295,N=S+(M<<6&4294967295|M>>>26),M=R+(S^(N|~V))+A[7]+1126891415&4294967295,R=N+(M<<10&4294967295|M>>>22),M=V+(N^(R|~S))+A[14]+2878612391&4294967295,V=R+(M<<15&4294967295|M>>>17),M=S+(R^(V|~N))+A[5]+4237533241&4294967295,S=V+(M<<21&4294967295|M>>>11),M=N+(V^(S|~R))+A[12]+1700485571&4294967295,N=S+(M<<6&4294967295|M>>>26),M=R+(S^(N|~V))+A[3]+2399980690&4294967295,R=N+(M<<10&4294967295|M>>>22),M=V+(N^(R|~S))+A[10]+4293915773&4294967295,V=R+(M<<15&4294967295|M>>>17),M=S+(R^(V|~N))+A[1]+2240044497&4294967295,S=V+(M<<21&4294967295|M>>>11),M=N+(V^(S|~R))+A[8]+1873313359&4294967295,N=S+(M<<6&4294967295|M>>>26),M=R+(S^(N|~V))+A[15]+4264355552&4294967295,R=N+(M<<10&4294967295|M>>>22),M=V+(N^(R|~S))+A[6]+2734768916&4294967295,V=R+(M<<15&4294967295|M>>>17),M=S+(R^(V|~N))+A[13]+1309151649&4294967295,S=V+(M<<21&4294967295|M>>>11),M=N+(V^(S|~R))+A[4]+4149444226&4294967295,N=S+(M<<6&4294967295|M>>>26),M=R+(S^(N|~V))+A[11]+3174756917&4294967295,R=N+(M<<10&4294967295|M>>>22),M=V+(N^(R|~S))+A[2]+718787259&4294967295,V=R+(M<<15&4294967295|M>>>17),M=S+(R^(V|~N))+A[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+R&4294967295}r.prototype.v=function(D,N){N===void 0&&(N=D.length);const S=N-this.blockSize,A=this.C;let V=this.h,R=0;for(;R<N;){if(V==0)for(;R<=S;)o(this,D,R),R+=this.blockSize;if(typeof D=="string"){for(;R<N;)if(A[V++]=D.charCodeAt(R++),V==this.blockSize){o(this,A),V=0;break}}else for(;R<N;)if(A[V++]=D[R++],V==this.blockSize){o(this,A),V=0;break}}this.h=V,this.o+=N},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;N=this.o*8;for(var S=D.length-8;S<D.length;++S)D[S]=N&255,N/=256;for(this.v(D),D=Array(16),N=0,S=0;S<4;++S)for(let A=0;A<32;A+=8)D[N++]=this.g[S]>>>A&255;return D};function u(D,N){var S=d;return Object.prototype.hasOwnProperty.call(S,D)?S[D]:S[D]=N(D)}function c(D,N){this.h=N;const S=[];let A=!0;for(let V=D.length-1;V>=0;V--){const R=D[V]|0;A&&R==N||(S[V]=R,A=!1)}this.g=S}var d={};function g(D){return-128<=D&&D<128?u(D,function(N){return new c([N|0],N<0?-1:0)}):new c([D|0],D<0?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return _;if(D<0)return U(y(-D));const N=[];let S=1;for(let A=0;D>=S;A++)N[A]=D/S|0,S*=4294967296;return new c(N,0)}function b(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return U(b(D.substring(1),N));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=y(Math.pow(N,8));let A=_;for(let R=0;R<D.length;R+=8){var V=Math.min(8,D.length-R);const M=parseInt(D.substring(R,R+V),N);V<8?(V=y(Math.pow(N,V)),A=A.j(V).add(y(M))):(A=A.j(S),A=A.add(y(M)))}return A}var _=g(0),T=g(1),j=g(16777216);n=c.prototype,n.m=function(){if(L(this))return-U(this).m();let D=0,N=1;for(let S=0;S<this.g.length;S++){const A=this.i(S);D+=(A>=0?A:4294967296+A)*N,N*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(L(this))return"-"+U(this).toString(D);const N=y(Math.pow(D,6));var S=this;let A="";for(;;){const V=at(S,N).g;S=G(S,V.j(N));let R=((S.g.length>0?S.g[0]:S.h)>>>0).toString(D);if(S=V,k(S))return R+A;for(;R.length<6;)R="0"+R;A=R+A}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(let N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function L(D){return D.h==-1}n.l=function(D){return D=G(this,D),L(D)?-1:k(D)?0:1};function U(D){const N=D.g.length,S=[];for(let A=0;A<N;A++)S[A]=~D.g[A];return new c(S,~D.h).add(T)}n.abs=function(){return L(this)?U(this):this},n.add=function(D){const N=Math.max(this.g.length,D.g.length),S=[];let A=0;for(let V=0;V<=N;V++){let R=A+(this.i(V)&65535)+(D.i(V)&65535),M=(R>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);A=M>>>16,R&=65535,M&=65535,S[V]=M<<16|R}return new c(S,S[S.length-1]&-2147483648?-1:0)};function G(D,N){return D.add(U(N))}n.j=function(D){if(k(this)||k(D))return _;if(L(this))return L(D)?U(this).j(U(D)):U(U(this).j(D));if(L(D))return U(this.j(U(D)));if(this.l(j)<0&&D.l(j)<0)return y(this.m()*D.m());const N=this.g.length+D.g.length,S=[];for(var A=0;A<2*N;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(let V=0;V<D.g.length;V++){const R=this.i(A)>>>16,M=this.i(A)&65535,lt=D.i(V)>>>16,vt=D.i(V)&65535;S[2*A+2*V]+=M*vt,W(S,2*A+2*V),S[2*A+2*V+1]+=R*vt,W(S,2*A+2*V+1),S[2*A+2*V+1]+=M*lt,W(S,2*A+2*V+1),S[2*A+2*V+2]+=R*lt,W(S,2*A+2*V+2)}for(D=0;D<N;D++)S[D]=S[2*D+1]<<16|S[2*D];for(D=N;D<2*N;D++)S[D]=0;return new c(S,0)};function W(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function Q(D,N){this.g=D,this.h=N}function at(D,N){if(k(N))throw Error("division by zero");if(k(D))return new Q(_,_);if(L(D))return N=at(U(D),N),new Q(U(N.g),U(N.h));if(L(N))return N=at(D,U(N)),new Q(U(N.g),N.h);if(D.g.length>30){if(L(D)||L(N))throw Error("slowDivide_ only works with positive integers.");for(var S=T,A=N;A.l(D)<=0;)S=tt(S),A=tt(A);var V=Z(S,1),R=Z(A,1);for(A=Z(A,2),S=Z(S,2);!k(A);){var M=R.add(A);M.l(D)<=0&&(V=V.add(S),R=M),A=Z(A,1),S=Z(S,1)}return N=G(D,V.j(N)),new Q(V,N)}for(V=_;D.l(N)>=0;){for(S=Math.max(1,Math.floor(D.m()/N.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),R=y(S),M=R.j(N);L(M)||M.l(D)>0;)S-=A,R=y(S),M=R.j(N);k(R)&&(R=T),V=V.add(R),D=G(D,M)}return new Q(V,D)}n.B=function(D){return at(this,D).h},n.and=function(D){const N=Math.max(this.g.length,D.g.length),S=[];for(let A=0;A<N;A++)S[A]=this.i(A)&D.i(A);return new c(S,this.h&D.h)},n.or=function(D){const N=Math.max(this.g.length,D.g.length),S=[];for(let A=0;A<N;A++)S[A]=this.i(A)|D.i(A);return new c(S,this.h|D.h)},n.xor=function(D){const N=Math.max(this.g.length,D.g.length),S=[];for(let A=0;A<N;A++)S[A]=this.i(A)^D.i(A);return new c(S,this.h^D.h)};function tt(D){const N=D.g.length+1,S=[];for(let A=0;A<N;A++)S[A]=D.i(A)<<1|D.i(A-1)>>>31;return new c(S,D.h)}function Z(D,N){const S=N>>5;N%=32;const A=D.g.length-S,V=[];for(let R=0;R<A;R++)V[R]=N>0?D.i(R+S)>>>N|D.i(R+S+1)<<32-N:D.i(R+S);return new c(V,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,G1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=b,ur=c}).apply(typeof nx<"u"?nx:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y1,zl,K1,gh,op,Q1,X1,$1;(function(){var n,t=Object.defineProperty;function s(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=s(this);function o(h,v){if(v)t:{var E=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var F=h[C];if(!(F in E))break t;E=E[F]}h=h[h.length-1],C=E[h],v=v(C),v!=C&&v!=null&&t(E,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var E=[],C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&E.push([C,v[C]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function d(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,E){return h.call.apply(h.bind,arguments)}function y(h,v,E){return y=g,y.apply(null,arguments)}function b(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var C=E.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function _(h,v){function E(){}E.prototype=v.prototype,h.Z=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(C,F,X){for(var ut=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)ut[Rt-2]=arguments[Rt];return v.prototype[F].apply(C,ut)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function j(h){const v=h.length;if(v>0){const E=Array(v);for(let C=0;C<v;C++)E[C]=h[C];return E}return[]}function k(h,v){for(let C=1;C<arguments.length;C++){const F=arguments[C];var E=typeof F;if(E=E!="object"?E:F?Array.isArray(F)?"array":E:"null",E=="array"||E=="object"&&typeof F.length=="number"){E=h.length||0;const X=F.length||0;h.length=E+X;for(let ut=0;ut<X;ut++)h[E+ut]=F[ut]}else h.push(F)}}class L{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(h){c.setTimeout(()=>{throw h},0)}function G(){var h=D;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class W{constructor(){this.h=this.g=null}add(v,E){const C=Q.get();C.set(v,E),this.h?this.h.next=C:this.g=C,this.h=C}}var Q=new L(()=>new at,h=>h.reset());class at{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,Z=!1,D=new W,N=()=>{const h=Promise.resolve(void 0);tt=()=>{h.then(S)}};function S(){for(var h;h=G();){try{h.h.call(h.g)}catch(E){U(E)}var v=Q;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}Z=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,v),c.removeEventListener("test",E,v)}catch{}return h})();function M(h){return/^[\s\xa0]*$/.test(h)}function lt(h,v){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}_(lt,V),lt.prototype.init=function(h,v){const E=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&lt.Z.h.call(this)},lt.prototype.h=function(){lt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var vt="closure_listenable_"+(Math.random()*1e6|0),B=0;function ot(h,v,E,C,F){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!C,this.ha=F,this.key=++B,this.da=this.fa=!1}function ct(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function wt(h,v,E){for(const C in h)v.call(E,h[C],C,h)}function bt(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function O(h){const v={};for(const E in h)v[E]=h[E];return v}const it="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ht(h,v){let E,C;for(let F=1;F<arguments.length;F++){C=arguments[F];for(E in C)h[E]=C[E];for(let X=0;X<it.length;X++)E=it[X],Object.prototype.hasOwnProperty.call(C,E)&&(h[E]=C[E])}}function mt(h){this.src=h,this.g={},this.h=0}mt.prototype.add=function(h,v,E,C,F){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const ut=jt(h,v,C,F);return ut>-1?(v=h[ut],E||(v.fa=!1)):(v=new ot(v,this.src,X,!!C,F),v.fa=E,h.push(v)),v};function St(h,v){const E=v.type;if(E in h.g){var C=h.g[E],F=Array.prototype.indexOf.call(C,v,void 0),X;(X=F>=0)&&Array.prototype.splice.call(C,F,1),X&&(ct(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function jt(h,v,E,C){for(let F=0;F<h.length;++F){const X=h[F];if(!X.da&&X.listener==v&&X.capture==!!E&&X.ha==C)return F}return-1}var zt="closure_lm_"+(Math.random()*1e6|0),Oe={};function le(h,v,E,C,F){if(Array.isArray(v)){for(let X=0;X<v.length;X++)le(h,v[X],E,C,F);return null}return E=ko(E),h&&h[vt]?h.J(v,E,d(C)?!!C.capture:!1,F):_r(h,v,E,!1,C,F)}function _r(h,v,E,C,F,X){if(!v)throw Error("Invalid event type");const ut=d(F)?!!F.capture:!!F;let Rt=Tr(h);if(Rt||(h[zt]=Rt=new mt(h)),E=Rt.add(v,E,C,ut,X),E.proxy)return E;if(C=ma(),E.proxy=C,C.src=h,C.listener=E,h.addEventListener)R||(F=ut),F===void 0&&(F=!1),h.addEventListener(v.toString(),C,F);else if(h.attachEvent)h.attachEvent(gs(v.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ma(){function h(E){return v.call(h.src,h.listener,E)}const v=Mo;return h}function pa(h,v,E,C,F){if(Array.isArray(v))for(var X=0;X<v.length;X++)pa(h,v[X],E,C,F);else C=d(C)?!!C.capture:!!C,E=ko(E),h&&h[vt]?(h=h.i,X=String(v).toString(),X in h.g&&(v=h.g[X],E=jt(v,E,C,F),E>-1&&(ct(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete h.g[X],h.h--)))):h&&(h=Tr(h))&&(v=h.g[v.toString()],h=-1,v&&(h=jt(v,E,C,F)),(E=h>-1?v[h]:null)&&ga(E))}function ga(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[vt])St(v.i,h);else{var E=h.type,C=h.proxy;v.removeEventListener?v.removeEventListener(E,C,h.capture):v.detachEvent?v.detachEvent(gs(E),C):v.addListener&&v.removeListener&&v.removeListener(C),(E=Tr(v))?(St(E,h),E.h==0&&(E.src=null,v[zt]=null)):ct(h)}}}function gs(h){return h in Oe?Oe[h]:Oe[h]="on"+h}function Mo(h,v){if(h.da)h=!0;else{v=new lt(v,this);const E=h.listener,C=h.ha||h.src;h.fa&&ga(h),h=E.call(C,v)}return h}function Tr(h){return h=h[zt],h instanceof mt?h:null}var Io="__closure_events_fn_"+(Math.random()*1e9>>>0);function ko(h){return typeof h=="function"?h:(h[Io]||(h[Io]=function(v){return h.handleEvent(v)}),h[Io])}function Ee(){A.call(this),this.i=new mt(this),this.M=this,this.G=null}_(Ee,A),Ee.prototype[vt]=!0,Ee.prototype.removeEventListener=function(h,v,E,C){pa(this,h,v,E,C)};function Pe(h,v){var E,C=h.G;if(C)for(E=[];C;C=C.G)E.push(C);if(h=h.M,C=v.type||v,typeof v=="string")v=new V(v,h);else if(v instanceof V)v.target=v.target||h;else{var F=v;v=new V(C,h),ht(v,F)}F=!0;let X,ut;if(E)for(ut=E.length-1;ut>=0;ut--)X=v.g=E[ut],F=wi(X,C,!0,v)&&F;if(X=v.g=h,F=wi(X,C,!0,v)&&F,F=wi(X,C,!1,v)&&F,E)for(ut=0;ut<E.length;ut++)X=v.g=E[ut],F=wi(X,C,!1,v)&&F}Ee.prototype.N=function(){if(Ee.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const E=h.g[v];for(let C=0;C<E.length;C++)ct(E[C]);delete h.g[v],h.h--}}this.G=null},Ee.prototype.J=function(h,v,E,C){return this.i.add(String(h),v,!1,E,C)},Ee.prototype.K=function(h,v,E,C){return this.i.add(String(h),v,!0,E,C)};function wi(h,v,E,C){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let F=!0;for(let X=0;X<v.length;++X){const ut=v[X];if(ut&&!ut.da&&ut.capture==E){const Rt=ut.listener,be=ut.ha||ut.src;ut.fa&&St(h.i,ut),F=Rt.call(be,C)!==!1&&F}}return F&&!C.defaultPrevented}function Af(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(h,v||0)}function ju(h){h.g=Af(()=>{h.g=null,h.i&&(h.i=!1,ju(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class un extends A{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ju(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(h){A.call(this),this.h=h,this.g={}}_(Er,A);var Oo=[];function Po(h){wt(h.g,function(v,E){this.g.hasOwnProperty(E)&&ga(v)},h),h.g={}}Er.prototype.N=function(){Er.Z.N.call(this),Po(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Si=c.JSON.stringify,Nf=c.JSON.parse,Vu=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Mu(){}function Iu(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ye(){V.call(this,"d")}_(Ye,V);function On(){V.call(this,"c")}_(On,V);var ve={},ku=null;function ya(){return ku=ku||new Ee}ve.Ia="serverreachability";function Ou(h){V.call(this,ve.Ia,h)}_(Ou,V);function ys(h){const v=ya();Pe(v,new Ou(v))}ve.STAT_EVENT="statevent";function wr(h,v){V.call(this,ve.STAT_EVENT,h),this.stat=v}_(wr,V);function we(h){const v=ya();Pe(v,new wr(v,h))}ve.Ja="timingevent";function vs(h,v){V.call(this,ve.Ja,h),this.size=v}_(vs,V);function bs(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},v)}function ts(){this.g=!0}ts.prototype.ua=function(){this.g=!1};function Cf(h,v,E,C,F,X){h.info(function(){if(h.g)if(X){var ut="",Rt=X.split("&");for(let Yt=0;Yt<Rt.length;Yt++){var be=Rt[Yt].split("=");if(be.length>1){const ue=be[0];be=be[1];const Bn=ue.split("_");ut=Bn.length>=2&&Bn[1]=="type"?ut+(ue+"="+be+"&"):ut+(ue+"=redacted&")}}}else ut=null;else ut=X;return"XMLHTTP REQ ("+C+") [attempt "+F+"]: "+v+`
`+E+`
`+ut})}function Pu(h,v,E,C,F,X,ut){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+F+"]: "+v+`
`+E+`
`+X+" "+ut})}function xs(h,v,E,C){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Rf(h,E)+(C?" "+C:"")})}function Sr(h,v){h.info(function(){return"TIMEOUT: "+v})}ts.prototype.info=function(){};function Rf(h,v){if(!h.g)return v;if(!v)return null;try{const X=JSON.parse(v);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var E=X[h];if(!(E.length<2)){var C=E[1];if(Array.isArray(C)&&!(C.length<1)){var F=C[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ut=1;ut<C.length;ut++)C[ut]=""}}}}return Si(X)}catch{return v}}var Ar={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Uo;function Nr(){}_(Nr,Mu),Nr.prototype.g=function(){return new XMLHttpRequest},Uo=new Nr;function Js(h){return encodeURIComponent(String(h))}function Lu(h){var v=1;h=h.split(":");const E=[];for(;v>0&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function es(h,v,E,C){this.j=h,this.i=v,this.l=E,this.S=C||1,this.V=new Er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}var Se={},ze={};function _s(h,v,E){h.M=1,h.A=Cr(Ne(v)),h.u=E,h.R=!0,va(h,null)}function va(h,v){h.F=Date.now(),Ts(h),h.B=Ne(h.A);var E=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),Ta(E.i,"t",C),h.C=0,E=h.j.L,h.h=new ns,h.g=Ju(h.j,E?v:null,!h.u),h.P>0&&(h.O=new un(y(h.Y,h,h.g),h.P)),v=h.V,E=h.g,C=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(Oo[0]=F.toString()),F=Oo);for(let X=0;X<F.length;X++){const ut=le(E,F[X],C||v.handleEvent,!1,v.h||v);if(!ut)break;v.g[ut.key]=ut}v=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),ys(),Cf(h.i,h.v,h.B,h.l,h.S,h.u)}es.prototype.ba=function(h){h=h.target;const v=this.O;v&&rs(h)==3?v.j():this.Y(h)},es.prototype.Y=function(h){try{if(h==this.g)t:{const Rt=rs(this.g),be=this.g.ya(),Yt=this.g.ca();if(!(Rt<3)&&(Rt!=3||this.g&&(this.h.h||this.g.la()||Ke(this.g)))){this.K||Rt!=4||be==7||(be==8||Yt<=0?ys(3):ys(2)),Es(this);var v=this.g.ca();this.X=v;var E=Df(this);if(this.o=v==200,Pu(this.i,this.v,this.B,this.l,this.S,Rt,v),this.o){if(this.U&&!this.L){e:{if(this.g){var C,F=this.g;if((C=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(C)){var X=C;break e}}X=null}if(h=X)xs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ws(this,h);else{this.o=!1,this.m=3,we(12),An(this),Pn(this);break t}}if(this.R){h=!0;let ue;for(;!this.K&&this.C<E.length;)if(ue=Bu(this,E),ue==ze){Rt==4&&(this.m=4,we(14),h=!1),xs(this.i,this.l,null,"[Incomplete Response]");break}else if(ue==Se){this.m=4,we(15),xs(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else xs(this.i,this.l,ue,null),ws(this,ue);if(Uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||E.length!=0||this.h.h||(this.m=1,we(16),h=!1),this.o=this.o&&h,!h)xs(this.i,this.l,E,"[Invalid Chunked Response]"),An(this),Pn(this);else if(E.length>0&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.aa&&!ut.P&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),tl(ut),ut.P=!0,we(11))}}else xs(this.i,this.l,E,null),ws(this,E);Rt==4&&An(this),this.o&&!this.K&&(Rt==4?Xu(this.j,this):(this.o=!1,Ts(this)))}else ei(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),An(this),Pn(this)}}}catch{}finally{}};function Df(h){if(!Uu(h))return h.g.la();const v=Ke(h.g);if(v==="")return"";let E="";const C=v.length,F=rs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return An(h),Pn(h),"";h.h.i=new c.TextDecoder}for(let X=0;X<C;X++)h.h.h=!0,E+=h.h.i.decode(v[X],{stream:!(F&&X==C-1)});return v.length=0,h.h.g+=E,h.C=0,h.h.g}function Uu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Bu(h,v){var E=h.C,C=v.indexOf(`
`,E);return C==-1?ze:(E=Number(v.substring(E,C)),isNaN(E)?Se:(C+=1,C+E>v.length?ze:(v=v.slice(C,C+E),h.C=C+E,v)))}es.prototype.cancel=function(){this.K=!0,An(this)};function Ts(h){h.T=Date.now()+h.H,ba(h,h.H)}function ba(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=bs(y(h.aa,h),v)}function Es(h){h.D&&(c.clearTimeout(h.D),h.D=null)}es.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Sr(this.i,this.B),this.M!=2&&(ys(),we(17)),An(this),this.m=2,Pn(this)):ba(this,this.T-h)};function Pn(h){h.j.I==0||h.K||Xu(h.j,h)}function An(h){Es(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Po(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function ws(h,v){try{var E=h.j;if(E.I!=0&&(E.g==h||As(E.h,h))){if(!h.L&&As(E.h,h)&&E.I==3){try{var C=E.Ba.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var F=C;if(F[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)Na(E),Mi(E);else break t;kr(E),we(18)}}else E.xa=F[1],0<E.xa-E.K&&F[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=bs(y(E.Va,E),6e3));Ss(E.h)<=1&&E.ta&&(E.ta=void 0)}else Vs(E,11)}else if((h.L||E.g==h)&&Na(E),!M(v))for(F=E.Ba.g.parse(v),v=0;v<F.length;v++){let Yt=F[v];const ue=Yt[0];if(!(ue<=E.K))if(E.K=ue,Yt=Yt[1],E.I==2)if(Yt[0]=="c"){E.M=Yt[1],E.ba=Yt[2];const Bn=Yt[3];Bn!=null&&(E.ka=Bn,E.j.info("VER="+E.ka));const Ms=Yt[4];Ms!=null&&(E.za=Ms,E.j.info("SVER="+E.za));const as=Yt[5];as!=null&&typeof as=="number"&&as>0&&(C=1.5*as,E.O=C,E.j.info("backChannelRequestTimeoutMs_="+C)),C=E;const os=h.g;if(os){const Or=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Or){var X=C.h;X.g||Or.indexOf("spdy")==-1&&Or.indexOf("quic")==-1&&Or.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Fo(X,X.h),X.h=null))}if(C.G){const Ca=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Ca&&(C.wa=Ca,Xt(C.J,C.G,Ca))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),C=E;var ut=h;if(C.na=Wu(C,C.L?C.ba:null,C.W),ut.L){qo(C.h,ut);var Rt=ut,be=C.O;be&&(Rt.H=be),Rt.D&&(Es(Rt),Ts(Rt)),C.g=ut}else Ku(C);E.i.length>0&&js(E)}else Yt[0]!="stop"&&Yt[0]!="close"||Vs(E,7);else E.I==3&&(Yt[0]=="stop"||Yt[0]=="close"?Yt[0]=="stop"?Vs(E,7):Wo(E):Yt[0]!="noop"&&E.l&&E.l.qa(Yt),E.A=0)}}ys(4)}catch{}}var Ae=class{constructor(h,v){this.g=h,this.map=v}};function Bo(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ss(h){return h.h?1:h.g?h.g.size:0}function As(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Fo(h,v){h.g?h.g.add(v):h.h=v}function qo(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Bo.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ho(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.G);return v}return j(h.i)}var zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xa(h,v){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const C=h[E].indexOf("=");let F,X=null;C>=0?(F=h[E].substring(0,C),X=h[E].substring(C+1)):F=h[E],v(F,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Nn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof Nn?(this.l=h.l,Fe(this,h.j),this.o=h.o,this.g=h.g,Ai(this,h.u),this.h=h.h,Go(this,Gu(h.i)),this.m=h.m):h&&(v=String(h).match(zu))?(this.l=!1,Fe(this,v[1]||"",!0),this.o=Ns(v[2]||""),this.g=Ns(v[3]||"",!0),Ai(this,v[4]),this.h=Ns(v[5]||"",!0),Go(this,v[6]||"",!0),this.m=Ns(v[7]||"")):(this.l=!1,this.i=new Ci(null,this.l))}Nn.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Rr(v,_a,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Rr(v,_a,!0),"@"),h.push(Js(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Rr(E,E.charAt(0)=="/"?Yo:Fu,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Rr(E,qu)),h.join("")},Nn.prototype.resolve=function(h){const v=Ne(this);let E=!!h.j;E?Fe(v,h.j):E=!!h.o,E?v.o=h.o:E=!!h.g,E?v.g=h.g:E=h.u!=null;var C=h.h;if(E)Ai(v,h.u);else if(E=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var F=v.h.lastIndexOf("/");F!=-1&&(C=v.h.slice(0,F+1)+C)}if(F=C,F==".."||F==".")C="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){C=F.lastIndexOf("/",0)==0,F=F.split("/");const X=[];for(let ut=0;ut<F.length;){const Rt=F[ut++];Rt=="."?C&&ut==F.length&&X.push(""):Rt==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),C&&ut==F.length&&X.push("")):(X.push(Rt),C=!0)}C=X.join("/")}else C=F}return E?v.h=C:E=h.i.toString()!=="",E?Go(v,Gu(h.i)):E=!!h.m,E&&(v.m=h.m),v};function Ne(h){return new Nn(h)}function Fe(h,v,E){h.j=E?Ns(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ai(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Go(h,v,E){v instanceof Ci?(h.i=v,Ea(h.i,h.l)):(E||(v=Rr(v,Ni)),h.i=new Ci(v,h.l))}function Xt(h,v,E){h.i.set(v,E)}function Cr(h){return Xt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ns(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Rr(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,dn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var _a=/[#\/\?@]/g,Fu=/[#\?:]/g,Yo=/[#\?]/g,Ni=/[#\?@]/g,qu=/#/g;function Ci(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function mn(h){h.g||(h.g=new Map,h.h=0,h.i&&xa(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=Ci.prototype,n.add=function(h,v){mn(this),this.i=null,h=Ri(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function Hu(h,v){mn(h),v=Ri(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Ko(h,v){return mn(h),v=Ri(h,v),h.g.has(v)}n.forEach=function(h,v){mn(this),this.g.forEach(function(E,C){E.forEach(function(F){h.call(v,F,C,this)},this)},this)};function Qo(h,v){mn(h);let E=[];if(typeof v=="string")Ko(h,v)&&(E=E.concat(h.g.get(Ri(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)E=E.concat(h[v]);return E}n.set=function(h,v){return mn(this),this.i=null,h=Ri(this,h),Ko(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=Qo(this,h),h.length>0?String(h[0]):v):v};function Ta(h,v,E){Hu(h,v),E.length>0&&(h.i=null,h.g.set(Ri(h,v),j(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let C=0;C<v.length;C++){var E=v[C];const F=Js(E);E=Qo(this,E);for(let X=0;X<E.length;X++){let ut=F;E[X]!==""&&(ut+="="+Js(E[X])),h.push(ut)}}return this.i=h.join("&")};function Gu(h){const v=new Ci;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Ri(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ea(h,v){v&&!h.j&&(mn(h),h.i=null,h.g.forEach(function(E,C){const F=C.toLowerCase();C!=F&&(Hu(this,C),Ta(this,F,E))},h)),h.j=v}function ss(h,v){const E=new ts;if(c.Image){const C=new Image;C.onload=b(Ln,E,"TestLoadImage: loaded",!0,v,C),C.onerror=b(Ln,E,"TestLoadImage: error",!1,v,C),C.onabort=b(Ln,E,"TestLoadImage: abort",!1,v,C),C.ontimeout=b(Ln,E,"TestLoadImage: timeout",!1,v,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else v(!1)}function Xo(h,v){const E=new ts,C=new AbortController,F=setTimeout(()=>{C.abort(),Ln(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:C.signal}).then(X=>{clearTimeout(F),X.ok?Ln(E,"TestPingServer: ok",!0,v):Ln(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),Ln(E,"TestPingServer: error",!1,v)})}function Ln(h,v,E,C,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),C(E)}catch{}}function Di(){this.g=new Vu}function Cs(h){this.i=h.Sb||null,this.h=h.ab||!1}_(Cs,Mu),Cs.prototype.g=function(){return new Dr(this.i,this.h)};function Dr(h,v){Ee.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Dr,Ee),n=Dr.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,is(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ji(this):is(this),this.readyState==3&&wa(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,ji(this))},n.Na=function(h){this.g&&(this.response=h,ji(this))},n.ga=function(){this.g&&ji(this)};function ji(h){h.readyState=4,h.l=null,h.j=null,h.B=null,is(h)}n.setRequestHeader=function(h,v){this.A.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function is(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Un(h){let v="";return wt(h,function(E,C){v+=C,v+=":",v+=E,v+=`\r
`}),v}function jr(h,v,E){t:{for(C in E){var C=!1;break t}C=!0}C||(E=Un(E),typeof h=="string"?E!=null&&Js(E):Xt(h,v,E))}function Wt(h){Ee.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Wt,Ee);var Rs=/^https?$/i,$o=["POST","PUT"];n=Wt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,v,E,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Uo.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(X){Vr(this,X);return}if(h=E||"",E=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var F in C)E.set(F,C[F]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const X of C.keys())E.set(X,C.get(X));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call($o,v,void 0)>=0)||C||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ut]of E)this.g.setRequestHeader(X,ut);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){Vr(this,X)}};function Vr(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Zo(h),ti(h)}function Zo(h){h.A||(h.A=!0,Pe(h,"complete"),Pe(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Pe(this,"complete"),Pe(this,"abort"),ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),Wt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Mr(this):this.Xa())},n.Xa=function(){Mr(this)};function Mr(h){if(h.h&&typeof u<"u"){if(h.v&&rs(h)==4)setTimeout(h.Ca.bind(h),0);else if(Pe(h,"readystatechange"),rs(h)==4){h.h=!1;try{const X=h.ca();t:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var E;if(!(E=v)){var C;if(C=X===0){let ut=String(h.D).match(zu)[1]||null;!ut&&c.self&&c.self.location&&(ut=c.self.location.protocol.slice(0,-1)),C=!Rs.test(ut?ut.toLowerCase():"")}E=C}if(E)Pe(h,"complete"),Pe(h,"success");else{h.o=6;try{var F=rs(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",Zo(h)}}finally{ti(h)}}}}function ti(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,v||Pe(h,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function rs(h){return h.g?h.g.readyState:0}n.ca=function(){try{return rs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Nf(v)}};function Ke(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ei(h){const v={};h=(h.g&&rs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(M(h[C]))continue;var E=Lu(h[C]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=v[F]||[];v[F]=X,X.push(E)}bt(v,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function Vi(h){this.za=0,this.i=[],this.j=new ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ds("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ds("baseRetryDelayMs",5e3,h),this.Za=Ds("retryDelaySeedMs",1e4,h),this.Ta=Ds("forwardChannelMaxRetries",2,h),this.va=Ds("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Bo(h&&h.concurrentRequestLimit),this.Ba=new Di,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Vi.prototype,n.ka=8,n.I=1,n.connect=function(h,v,E,C){we(0),this.W=h,this.H=v||{},E&&C!==void 0&&(this.H.OSID=E,this.H.OAID=C),this.F=this.X,this.J=Wu(this,null,this.W),js(this)};function Wo(h){if(Sa(h),h.I==3){var v=h.V++,E=Ne(h.J);if(Xt(E,"SID",h.M),Xt(E,"RID",v),Xt(E,"TYPE","terminate"),Ir(h,E),v=new es(h,h.j,v),v.M=2,v.A=Cr(Ne(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=v.A,E=!0),E||(v.g=Ju(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ts(v)}Zu(h)}function Mi(h){h.g&&(tl(h),h.g.cancel(),h.g=null)}function Sa(h){Mi(h),h.v&&(c.clearTimeout(h.v),h.v=null),Na(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function js(h){if(!zo(h.h)&&!h.m){h.m=!0;var v=h.Ea;tt||N(),Z||(tt(),Z=!0),D.add(v,h),h.D=0}}function Aa(h,v){return Ss(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=bs(y(h.Ea,h,v),$u(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new es(this,this.j,h);let X=this.o;if(this.U&&(X?(X=O(X),ht(X,this.U)):X=this.U),this.u!==null||this.R||(F.J=X,X=null),this.S)t:{for(var v=0,E=0;E<this.i.length;E++){e:{var C=this.i[E];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(v+=C,v>4096){v=E;break t}if(v===4096||E===this.i.length-1){v=E+1;break t}}v=1e3}else v=1e3;v=Yu(this,F,v),E=Ne(this.J),Xt(E,"RID",h),Xt(E,"CVER",22),this.G&&Xt(E,"X-HTTP-Session-Id",this.G),Ir(this,E),X&&(this.R?v="headers="+Js(Un(X))+"&"+v:this.u&&jr(E,this.u,X)),Fo(this.h,F),this.Ra&&Xt(E,"TYPE","init"),this.S?(Xt(E,"$req",v),Xt(E,"SID","null"),F.U=!0,_s(F,E,null)):_s(F,E,v),this.I=2}}else this.I==3&&(h?Jo(this,h):this.i.length==0||zo(this.h)||Jo(this))};function Jo(h,v){var E;v?E=v.l:E=h.V++;const C=Ne(h.J);Xt(C,"SID",h.M),Xt(C,"RID",E),Xt(C,"AID",h.K),Ir(h,C),h.u&&h.o&&jr(C,h.u,h.o),E=new es(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Yu(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Fo(h.h,E),_s(E,C,v)}function Ir(h,v){h.H&&wt(h.H,function(E,C){Xt(v,C,E)}),h.l&&wt({},function(E,C){Xt(v,C,E)})}function Yu(h,v,E){E=Math.min(h.i.length,E);const C=h.l?y(h.l.Ka,h.l,h):null;t:{var F=h.i;let Rt=-1;for(;;){const be=["count="+E];Rt==-1?E>0?(Rt=F[0].g,be.push("ofs="+Rt)):Rt=0:be.push("ofs="+Rt);let Yt=!0;for(let ue=0;ue<E;ue++){var X=F[ue].g;const Bn=F[ue].map;if(X-=Rt,X<0)Rt=Math.max(0,F[ue].g-100),Yt=!1;else try{X="req"+X+"_"||"";try{var ut=Bn instanceof Map?Bn:Object.entries(Bn);for(const[Ms,as]of ut){let os=as;d(as)&&(os=Si(as)),be.push(X+Ms+"="+encodeURIComponent(os))}}catch(Ms){throw be.push(X+"type="+encodeURIComponent("_badmap")),Ms}}catch{C&&C(Bn)}}if(Yt){ut=be.join("&");break t}}ut=void 0}return h=h.i.splice(0,E),v.G=h,ut}function Ku(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;tt||N(),Z||(tt(),Z=!0),D.add(v,h),h.A=0}}function kr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=bs(y(h.Da,h),$u(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=bs(y(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),Mi(this),Qu(this))};function tl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Qu(h){h.g=new es(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Ne(h.na);Xt(v,"RID","rpc"),Xt(v,"SID",h.M),Xt(v,"AID",h.K),Xt(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Xt(v,"TO",h.ia),Xt(v,"TYPE","xmlhttp"),Ir(h,v),h.u&&h.o&&jr(v,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Cr(Ne(v)),E.u=null,E.R=!0,va(E,h)}n.Va=function(){this.C!=null&&(this.C=null,Mi(this),kr(this),we(19))};function Na(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Xu(h,v){var E=null;if(h.g==v){Na(h),tl(h),h.g=null;var C=2}else if(As(h.h,v))E=v.G,qo(h.h,v),C=1;else return;if(h.I!=0){if(v.o)if(C==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var F=h.D;C=ya(),Pe(C,new vs(C,E)),js(h)}else Ku(h);else if(F=v.m,F==3||F==0&&v.X>0||!(C==1&&Aa(h,v)||C==2&&kr(h)))switch(E&&E.length>0&&(v=h.h,v.i=v.i.concat(E)),F){case 1:Vs(h,5);break;case 4:Vs(h,10);break;case 3:Vs(h,6);break;default:Vs(h,2)}}}function $u(h,v){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*v}function Vs(h,v){if(h.j.info("Error code "+v),v==2){var E=y(h.bb,h),C=h.Ua;const F=!C;C=new Nn(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Fe(C,"https"),Cr(C),F?ss(C.toString(),E):Xo(C.toString(),E)}else we(2);h.I=0,h.l&&h.l.pa(v),Zu(h),Sa(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function Zu(h){if(h.I=0,h.ja=[],h.l){const v=Ho(h.h);(v.length!=0||h.i.length!=0)&&(k(h.ja,v),k(h.ja,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.oa()}}function Wu(h,v,E){var C=E instanceof Nn?Ne(E):new Nn(E);if(C.g!="")v&&(C.g=v+"."+C.g),Ai(C,C.u);else{var F=c.location;C=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;const X=new Nn(null);C&&Fe(X,C),v&&(X.g=v),F&&Ai(X,F),E&&(X.h=E),C=X}return E=h.G,v=h.wa,E&&v&&Xt(C,E,v),Xt(C,"VER",h.ka),Ir(h,C),C}function Ju(h,v,E){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new Wt(new Cs({ab:E})):new Wt(h.ma),v.Fa(h.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tc(){}n=tc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ii(){}Ii.prototype.g=function(h,v){return new cn(h,v)};function cn(h,v){Ee.call(this),this.g=new Vi(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!M(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!M(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ni(this)}_(cn,Ee),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Wo(this.g)},cn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Si(h),h=E);v.i.push(new Ae(v.Ya++,h)),v.I==3&&js(v)},cn.prototype.N=function(){this.g.l=null,delete this.j,Wo(this.g),delete this.g,cn.Z.N.call(this)};function ec(h){Ye.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){t:{for(const E in v){h=E;break t}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}_(ec,Ye);function nc(){On.call(this),this.status=1}_(nc,On);function ni(h){this.g=h}_(ni,tc),ni.prototype.ra=function(){Pe(this.g,"a")},ni.prototype.qa=function(h){Pe(this.g,new ec(h))},ni.prototype.pa=function(h){Pe(this.g,new nc)},ni.prototype.oa=function(){Pe(this.g,"b")},Ii.prototype.createWebChannel=Ii.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,$1=function(){return new Ii},X1=function(){return ya()},Q1=ve,op={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,gh=Ar,Lo.COMPLETE="complete",K1=Lo,Iu.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",Ee.prototype.listen=Ee.prototype.J,zl=Iu,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,Y1=Wt}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const sx="@firebase/firestore",ix="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new k1("@firebase/firestore");function io(){return la.logLevel}function dt(n,...t){if(la.logLevel<=qt.DEBUG){const s=t.map(Jp);la.debug(`Firestore (${Ao}): ${n}`,...s)}}function xi(n,...t){if(la.logLevel<=qt.ERROR){const s=t.map(Jp);la.error(`Firestore (${Ao}): ${n}`,...s)}}function vo(n,...t){if(la.logLevel<=qt.WARN){const s=t.map(Jp);la.warn(`Firestore (${Ao}): ${n}`,...s)}}function Jp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,Z1(n,r,s)}function Z1(n,t,s){let r=`FIRESTORE (${Ao}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw xi(r),new Error(r)}function Qt(n,t,s,r){let o="Unexpected state";typeof s=="string"?o=s:r=s,n||Z1(t,o,r)}function Ct(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends ca{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise(((t,s)=>{this.resolve=t,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class MN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable((()=>s(an.UNAUTHENTICATED)))}shutdown(){}}class IN{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class kN{constructor(t){this.t=t,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){Qt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,s(g)):Promise.resolve();let u=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new vi,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},d=g=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new vi)}}),0),c()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==t?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt(typeof r.accessToken=="string",31837,{l:r}),new W1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qt(t===null||typeof t=="string",2055,{h:t}),new an(t)}}class ON{constructor(t,s,r){this.P=t,this.T=s,this.I=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class PN{constructor(t,s,r){this.P=t,this.T=s,this.I=r}getToken(){return Promise.resolve(new ON(this.P,this.T,this.I))}start(t,s){t.enqueueRetryable((()=>s(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LN{constructor(t,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,U1(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,s){Qt(this.o===void 0,3512);const r=u=>{u.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,dt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?s(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((s=>s?(Qt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new rx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let r=0;r<n;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=UN(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<s&&(r+=t.charAt(o[u]%62))}return r}}function Lt(n,t){return n<t?-1:n>t?1:0}function lp(n,t){const s=Math.min(n.length,t.length);for(let r=0;r<s;r++){const o=n.charAt(r),u=t.charAt(r);if(o!==u)return Im(o)===Im(u)?Lt(o,u):Im(o)?1:-1}return Lt(n.length,t.length)}const BN=55296,zN=57343;function Im(n){const t=n.charCodeAt(0);return t>=BN&&t<=zN}function bo(n,t,s){return n.length===t.length&&n.every(((r,o)=>s(r,t[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="__name__";class Ls{constructor(t,s,r){s===void 0?s=0:s>t.length&&Et(637,{offset:s,range:t.length}),r===void 0?r=t.length-s:r>t.length-s&&Et(1746,{length:r,range:t.length-s}),this.segments=t,this.offset=s,this.len=r}get length(){return this.len}isEqual(t){return Ls.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof Ls?t.forEach((r=>{s.push(r)})):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,r=this.limit();s<r;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const r=Math.min(t.length,s.length);for(let o=0;o<r;o++){const u=Ls.compareSegments(t.get(o),s.get(o));if(u!==0)return u}return Lt(t.length,s.length)}static compareSegments(t,s){const r=Ls.isNumericId(t),o=Ls.isNumericId(s);return r&&!o?-1:!r&&o?1:r&&o?Ls.extractNumericId(t).compare(Ls.extractNumericId(s)):lp(t,s)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ur.fromString(t.substring(4,t.length-2))}}class ie extends Ls{construct(t,s,r){return new ie(t,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const s=[];for(const r of t){if(r.indexOf("//")>=0)throw new ft(st.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((o=>o.length>0)))}return new ie(s)}static emptyPath(){return new ie([])}}const FN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Ls{construct(t,s,r){return new tn(t,s,r)}static isValidIdentifier(t){return FN.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ax}static keyField(){return new tn([ax])}static fromServerFormat(t){const s=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ft(st.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let c=!1;for(;o<t.length;){const d=t[o];if(d==="\\"){if(o+1===t.length)throw new ft(st.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ft(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(u(),o++)}if(u(),c)throw new ft(st.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new tn(s)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.path=t}static fromPath(t){return new _t(ie.fromString(t))}static fromName(t){return new _t(ie.fromString(t).popFirst(5))}static empty(){return new _t(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ie.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return ie.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new _t(new ie(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(n,t,s){if(!s)throw new ft(st.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function qN(n,t,s,r){if(t===!0&&r===!0)throw new ft(st.INVALID_ARGUMENT,`${n} and ${s} cannot be used together.`)}function ox(n){if(!_t.isDocumentKey(n))throw new ft(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lx(n){if(_t.isDocumentKey(n))throw new ft(st.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function t2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function tf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Et(12329,{type:typeof n})}function En(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ft(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=tf(n);throw new ft(st.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n,t){const s={typeString:n};return t&&(s.value=t),s}function yu(n,t){if(!t2(n))throw new ft(st.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){s=`JSON missing required field: '${r}'`;break}const c=n[r];if(o&&typeof c!==o){s=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){s=`Expected '${r}' field to equal '${u.value}'`;break}}if(s)throw new ft(st.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=-62135596800,cx=1e6;class oe{static now(){return oe.fromMillis(Date.now())}static fromDate(t){return oe.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),r=Math.floor((t-1e3*s)*cx);return new oe(s,r)}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new ft(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new ft(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<ux)throw new ft(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ft(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cx}_compareTo(t){return this.seconds===t.seconds?Lt(this.nanoseconds,t.nanoseconds):Lt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(yu(t,oe._jsonSchema))return new oe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ux;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}oe._jsonSchemaVersion="firestore/timestamp/1.0",oe._jsonSchema={type:ke("string",oe._jsonSchemaVersion),seconds:ke("number"),nanoseconds:ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new oe(0,0))}static max(){return new At(new oe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function HN(n,t){const s=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=At.fromTimestamp(r===1e9?new oe(s+1,0):new oe(s,r));return new hr(o,_t.empty(),t)}function GN(n){return new hr(n.readTime,n.key,iu)}class hr{constructor(t,s,r){this.readTime=t,this.documentKey=s,this.largestBatchId=r}static min(){return new hr(At.min(),_t.empty(),iu)}static max(){return new hr(At.max(),_t.empty(),iu)}}function YN(n,t){let s=n.readTime.compareTo(t.readTime);return s!==0?s:(s=_t.comparator(n.documentKey,t.documentKey),s!==0?s:Lt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(n){if(n.code!==st.FAILED_PRECONDITION||n.message!==KN)throw n;dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new rt(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(s,u).next(r,o)}}))}toPromise(){return new Promise(((t,s)=>{this.next(t,s)}))}wrapUserFunction(t){try{const s=t();return s instanceof rt?s:rt.resolve(s)}catch(s){return rt.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction((()=>t(s))):rt.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction((()=>t(s))):rt.reject(s)}static resolve(t){return new rt(((s,r)=>{s(t)}))}static reject(t){return new rt(((s,r)=>{r(t)}))}static waitFor(t){return new rt(((s,r)=>{let o=0,u=0,c=!1;t.forEach((d=>{++o,d.next((()=>{++u,c&&u===o&&s()}),(g=>r(g)))})),c=!0,u===o&&s()}))}static or(t){let s=rt.resolve(!1);for(const r of t)s=s.next((o=>o?rt.resolve(o):r()));return s}static forEach(t,s){const r=[];return t.forEach(((o,u)=>{r.push(s.call(this,o,u))})),this.waitFor(r)}static mapArray(t,s){return new rt(((r,o)=>{const u=t.length,c=new Array(u);let d=0;for(let g=0;g<u;g++){const y=g;s(t[y]).next((b=>{c[y]=b,++d,d===u&&r(c)}),(b=>o(b)))}}))}static doWhile(t,s){return new rt(((r,o)=>{const u=()=>{t()===!0?s().next((()=>{u()}),o):r()};u()}))}}function XN(n){const t=n.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Co(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ef.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-1;function nf(n){return n==null}function jh(n){return n===0&&1/n==-1/0}function $N(n){return typeof n=="number"&&Number.isInteger(n)&&!jh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="";function ZN(n){let t="";for(let s=0;s<n.length;s++)t.length>0&&(t=hx(t)),t=WN(n.get(s),t);return hx(t)}function WN(n,t){let s=t;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":s+="";break;case e2:s+="";break;default:s+=u}}return s}function hx(n){return n+e2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(n){let t=0;for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&t++;return t}function vr(n,t){for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&t(s,n[s])}function n2(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,s){this.comparator=t,this.root=s||We.EMPTY}insert(t,s){return new fe(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,We.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,We.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(t){let s=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return s+r.left.size;o<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((s,r)=>(t(s,r),!1)))}toString(){const t=[];return this.inorderTraversal(((s,r)=>(t.push(`${s}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new oh(this.root,t,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new oh(this.root,t,this.comparator,!0)}}class oh{constructor(t,s,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=s?r(t.key,s):1,s&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class We{constructor(t,s,r,o,u){this.key=t,this.value=s,this.color=r??We.RED,this.left=o??We.EMPTY,this.right=u??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,r,o,u){return new We(t??this.key,s??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,s,r),null):u===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(t,s,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let r,o=this;if(s(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(t,o.key)===0){if(o.right.isEmpty())return We.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,s,r,o,u){return this}insert(t,s,r){return new We(t,s)}remove(t,s){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((s,r)=>(t(s),!1)))}forEachInRange(t,s){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;s(o.key)}}forEachWhile(t,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new dx(this.data.getIterator())}getIteratorFrom(t){return new dx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach((r=>{s=s.add(r)})),s}isEqual(t){if(!(t instanceof Be)||this.size!==t.size)return!1;const s=this.data.getIterator(),r=t.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((s=>{t.push(s)})),t}toString(){const t=[];return this.forEach((s=>t.push(s))),"SortedSet("+t.toString()+")"}copy(t){const s=new Be(this.comparator);return s.data=t,s}}class dx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this.fields=t,t.sort(tn.comparator)}static empty(){return new kn([])}unionWith(t){let s=new Be(tn.comparator);for(const r of this.fields)s=s.add(r);for(const r of t)s=s.add(r);return new kn(s.toArray())}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return bo(this.fields,t.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.binaryString=t}static fromBase64String(t){const s=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new s2("Invalid base64 string: "+u):u}})(t);return new nn(s)}static fromUint8Array(t){const s=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new nn(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Lt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const JN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(n){if(Qt(!!n,39018),typeof n=="string"){let t=0;const s=JN.exec(n);if(Qt(!!s,46558,{timestamp:n}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Te(n.seconds),nanos:Te(n.nanos)}}function Te(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function dr(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="server_timestamp",r2="__type__",a2="__previous_value__",o2="__local_write_time__";function ng(n){var s,r;return((r=(((s=n==null?void 0:n.mapValue)==null?void 0:s.fields)||{})[r2])==null?void 0:r.stringValue)===i2}function sf(n){const t=n.mapValue.fields[a2];return ng(t)?sf(t):t}function ru(n){const t=fr(n.mapValue.fields[o2].timestampValue);return new oe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(t,s,r,o,u,c,d,g,y,b){this.databaseId=t,this.appId=s,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b}}const Vh="(default)";class au{constructor(t,s){this.projectId=t,this.database=s||Vh}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===Vh}isEqual(t){return t instanceof au&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="__type__",e4="__max__",lh={mapValue:{}},u2="__vector__",Mh="value";function mr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ng(n)?4:s4(n)?9007199254740991:n4(n)?10:11:Et(28295,{value:n})}function Ys(n,t){if(n===t)return!0;const s=mr(n);if(s!==mr(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ru(n).isEqual(ru(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=fr(o.timestampValue),d=fr(u.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(o,u){return dr(o.bytesValue).isEqual(dr(u.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(o,u){return Te(o.geoPointValue.latitude)===Te(u.geoPointValue.latitude)&&Te(o.geoPointValue.longitude)===Te(u.geoPointValue.longitude)})(n,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Te(o.integerValue)===Te(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=Te(o.doubleValue),d=Te(u.doubleValue);return c===d?jh(c)===jh(d):isNaN(c)&&isNaN(d)}return!1})(n,t);case 9:return bo(n.arrayValue.values||[],t.arrayValue.values||[],Ys);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},d=u.mapValue.fields||{};if(fx(c)!==fx(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!Ys(c[g],d[g])))return!1;return!0})(n,t);default:return Et(52216,{left:n})}}function ou(n,t){return(n.values||[]).find((s=>Ys(s,t)))!==void 0}function xo(n,t){if(n===t)return 0;const s=mr(n),r=mr(t);if(s!==r)return Lt(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,t.booleanValue);case 2:return(function(u,c){const d=Te(u.integerValue||u.doubleValue),g=Te(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,t);case 3:return mx(n.timestampValue,t.timestampValue);case 4:return mx(ru(n),ru(t));case 5:return lp(n.stringValue,t.stringValue);case 6:return(function(u,c){const d=dr(u),g=dr(c);return d.compareTo(g)})(n.bytesValue,t.bytesValue);case 7:return(function(u,c){const d=u.split("/"),g=c.split("/");for(let y=0;y<d.length&&y<g.length;y++){const b=Lt(d[y],g[y]);if(b!==0)return b}return Lt(d.length,g.length)})(n.referenceValue,t.referenceValue);case 8:return(function(u,c){const d=Lt(Te(u.latitude),Te(c.latitude));return d!==0?d:Lt(Te(u.longitude),Te(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return px(n.arrayValue,t.arrayValue);case 10:return(function(u,c){var T,j,k,L;const d=u.fields||{},g=c.fields||{},y=(T=d[Mh])==null?void 0:T.arrayValue,b=(j=g[Mh])==null?void 0:j.arrayValue,_=Lt(((k=y==null?void 0:y.values)==null?void 0:k.length)||0,((L=b==null?void 0:b.values)==null?void 0:L.length)||0);return _!==0?_:px(y,b)})(n.mapValue,t.mapValue);case 11:return(function(u,c){if(u===lh.mapValue&&c===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(c===lh.mapValue)return-1;const d=u.fields||{},g=Object.keys(d),y=c.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let _=0;_<g.length&&_<b.length;++_){const T=lp(g[_],b[_]);if(T!==0)return T;const j=xo(d[g[_]],y[b[_]]);if(j!==0)return j}return Lt(g.length,b.length)})(n.mapValue,t.mapValue);default:throw Et(23264,{he:s})}}function mx(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Lt(n,t);const s=fr(n),r=fr(t),o=Lt(s.seconds,r.seconds);return o!==0?o:Lt(s.nanos,r.nanos)}function px(n,t){const s=n.values||[],r=t.values||[];for(let o=0;o<s.length&&o<r.length;++o){const u=xo(s[o],r[o]);if(u)return u}return Lt(s.length,r.length)}function _o(n){return up(n)}function up(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(s){const r=fr(s);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(s){return dr(s).toBase64()})(n.bytesValue):"referenceValue"in n?(function(s){return _t.fromName(s).toString()})(n.referenceValue):"geoPointValue"in n?(function(s){return`geo(${s.latitude},${s.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(s){let r="[",o=!0;for(const u of s.values||[])o?o=!1:r+=",",r+=up(u);return r+"]"})(n.arrayValue):"mapValue"in n?(function(s){const r=Object.keys(s.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${up(s.fields[c])}`;return o+"}"})(n.mapValue):Et(61005,{value:n})}function yh(n){switch(mr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=sf(n);return t?16+yh(t):16;case 5:return 2*n.stringValue.length;case 6:return dr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+yh(u)),0)})(n.arrayValue);case 10:case 11:return(function(r){let o=0;return vr(r.fields,((u,c)=>{o+=u.length+yh(c)})),o})(n.mapValue);default:throw Et(13486,{value:n})}}function gx(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function cp(n){return!!n&&"integerValue"in n}function sg(n){return!!n&&"arrayValue"in n}function yx(n){return!!n&&"nullValue"in n}function vx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vh(n){return!!n&&"mapValue"in n}function n4(n){var s,r;return((r=(((s=n==null?void 0:n.mapValue)==null?void 0:s.fields)||{})[l2])==null?void 0:r.stringValue)===u2}function Ql(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return vr(n.mapValue.fields,((s,r)=>t.mapValue.fields[s]=Ql(r))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(n.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=Ql(n.arrayValue.values[s]);return t}return{...n}}function s4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===e4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.value=t}static empty(){return new _n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let r=0;r<t.length-1;++r)if(s=(s.mapValue.fields||{})[t.get(r)],!vh(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ql(s)}setAll(t){let s=tn.emptyPath(),r={},o=[];t.forEach(((c,d)=>{if(!s.isImmediateParentOf(d)){const g=this.getFieldsMap(s);this.applyChanges(g,r,o),r={},o=[],s=d.popLast()}c?r[d.lastSegment()]=Ql(c):o.push(d.lastSegment())}));const u=this.getFieldsMap(s);this.applyChanges(u,r,o)}delete(t){const s=this.field(t.popLast());vh(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return Ys(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=s.mapValue.fields[t.get(r)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[t.get(r)]=o),s=o}return s.mapValue.fields}applyChanges(t,s,r){vr(s,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new _n(Ql(this.value))}}function c2(n){const t=[];return vr(n.fields,((s,r)=>{const o=new tn([s]);if(vh(r)){const u=c2(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new kn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t,s,r,o,u,c,d){this.key=t,this.documentType=s,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=d}static newInvalidDocument(t){return new on(t,0,At.min(),At.min(),At.min(),_n.empty(),0)}static newFoundDocument(t,s,r,o){return new on(t,1,s,At.min(),r,o,0)}static newNoDocument(t,s){return new on(t,2,s,At.min(),At.min(),_n.empty(),0)}static newUnknownDocument(t,s){return new on(t,3,s,At.min(),At.min(),_n.empty(),2)}convertToFoundDocument(t,s){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof on&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(t,s){this.position=t,this.inclusive=s}}function bx(n,t,s){let r=0;for(let o=0;o<n.position.length;o++){const u=t[o],c=n.position[o];if(u.field.isKeyField()?r=_t.comparator(_t.fromName(c.referenceValue),s.key):r=xo(c,s.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function xx(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let s=0;s<n.position.length;s++)if(!Ys(n.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(t,s="asc"){this.field=t,this.dir=s}}function i4(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{}class Ie extends h2{constructor(t,s,r){super(),this.field=t,this.op=s,this.value=r}static create(t,s,r){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,r):new a4(t,s,r):s==="array-contains"?new u4(t,r):s==="in"?new c4(t,r):s==="not-in"?new h4(t,r):s==="array-contains-any"?new f4(t,r):new Ie(t,s,r)}static createKeyFieldInFilter(t,s,r){return s==="in"?new o4(t,r):new l4(t,r)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(xo(s,this.value)):s!==null&&mr(this.value)===mr(s)&&this.matchesComparison(xo(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends h2{constructor(t,s){super(),this.filters=t,this.op=s,this.Pe=null}static create(t,s){return new ps(t,s)}matches(t){return f2(this)?this.filters.find((s=>!s.matches(t)))===void 0:this.filters.find((s=>s.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,s)=>t.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function f2(n){return n.op==="and"}function d2(n){return r4(n)&&f2(n)}function r4(n){for(const t of n.filters)if(t instanceof ps)return!1;return!0}function hp(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+_o(n.value);if(d2(n))return n.filters.map((t=>hp(t))).join(",");{const t=n.filters.map((s=>hp(s))).join(",");return`${n.op}(${t})`}}function m2(n,t){return n instanceof Ie?(function(r,o){return o instanceof Ie&&r.op===o.op&&r.field.isEqual(o.field)&&Ys(r.value,o.value)})(n,t):n instanceof ps?(function(r,o){return o instanceof ps&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,d)=>u&&m2(c,o.filters[d])),!0):!1})(n,t):void Et(19439)}function p2(n){return n instanceof Ie?(function(s){return`${s.field.canonicalString()} ${s.op} ${_o(s.value)}`})(n):n instanceof ps?(function(s){return s.op.toString()+" {"+s.getFilters().map(p2).join(" ,")+"}"})(n):"Filter"}class a4 extends Ie{constructor(t,s,r){super(t,s,r),this.key=_t.fromName(r.referenceValue)}matches(t){const s=_t.comparator(t.key,this.key);return this.matchesComparison(s)}}class o4 extends Ie{constructor(t,s){super(t,"in",s),this.keys=g2("in",s)}matches(t){return this.keys.some((s=>s.isEqual(t.key)))}}class l4 extends Ie{constructor(t,s){super(t,"not-in",s),this.keys=g2("not-in",s)}matches(t){return!this.keys.some((s=>s.isEqual(t.key)))}}function g2(n,t){var s;return(((s=t.arrayValue)==null?void 0:s.values)||[]).map((r=>_t.fromName(r.referenceValue)))}class u4 extends Ie{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return sg(s)&&ou(s.arrayValue,this.value)}}class c4 extends Ie{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&ou(this.value.arrayValue,s)}}class h4 extends Ie{constructor(t,s){super(t,"not-in",s)}matches(t){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&s.nullValue===void 0&&!ou(this.value.arrayValue,s)}}class f4 extends Ie{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!sg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>ou(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(t,s=null,r=[],o=[],u=null,c=null,d=null){this.path=t,this.collectionGroup=s,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=d,this.Te=null}}function _x(n,t=null,s=[],r=[],o=null,u=null,c=null){return new d4(n,t,s,r,o,u,c)}function ig(n){const t=Ct(n);if(t.Te===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map((r=>hp(r))).join(","),s+="|ob:",s+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),nf(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>_o(r))).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>_o(r))).join(",")),t.Te=s}return t.Te}function rg(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!i4(n.orderBy[s],t.orderBy[s]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if(!m2(n.filters[s],t.filters[s]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!xx(n.startAt,t.startAt)&&xx(n.endAt,t.endAt)}function fp(n){return _t.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,s=null,r=[],o=[],u=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function m4(n,t,s,r,o,u,c,d){return new vu(n,t,s,r,o,u,c,d)}function rf(n){return new vu(n)}function Tx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function y2(n){return n.collectionGroup!==null}function Xl(n){const t=Ct(n);if(t.Ie===null){t.Ie=[];const s=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),s.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Be(tn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(t).forEach((u=>{s.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new kh(u,r))})),s.has(tn.keyField().canonicalString())||t.Ie.push(new kh(tn.keyField(),r))}return t.Ie}function Bs(n){const t=Ct(n);return t.Ee||(t.Ee=p4(t,Xl(n))),t.Ee}function p4(n,t){if(n.limitType==="F")return _x(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new kh(o.field,u)}));const s=n.endAt?new Ih(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ih(n.startAt.position,n.startAt.inclusive):null;return _x(n.path,n.collectionGroup,t,n.filters,n.limit,s,r)}}function dp(n,t){const s=n.filters.concat([t]);return new vu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),s,n.limit,n.limitType,n.startAt,n.endAt)}function mp(n,t,s){return new vu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,s,n.startAt,n.endAt)}function af(n,t){return rg(Bs(n),Bs(t))&&n.limitType===t.limitType}function v2(n){return`${ig(Bs(n))}|lt:${n.limitType}`}function ro(n){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((o=>p2(o))).join(", ")}]`),nf(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((o=>_o(o))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((o=>_o(o))).join(",")),`Target(${r})`})(Bs(n))}; limitType=${n.limitType})`}function of(n,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):_t.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(n,t)&&(function(r,o){for(const u of Xl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(n,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(n,t)&&(function(r,o){return!(r.startAt&&!(function(c,d,g){const y=bx(c,d,g);return c.inclusive?y<=0:y<0})(r.startAt,Xl(r),o)||r.endAt&&!(function(c,d,g){const y=bx(c,d,g);return c.inclusive?y>=0:y>0})(r.endAt,Xl(r),o))})(n,t)}function g4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function b2(n){return(t,s)=>{let r=!1;for(const o of Xl(n)){const u=y4(o,t,s);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function y4(n,t,s){const r=n.field.isKeyField()?_t.comparator(t.key,s.key):(function(u,c,d){const g=c.data.field(u),y=d.data.field(u);return g!==null&&y!==null?xo(g,y):Et(42886)})(n.field,t,s);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,s){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,s]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,s]);o.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[s]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){vr(this.inner,((s,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return n2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=new fe(_t.comparator);function _i(){return v4}const x2=new fe(_t.comparator);function Fl(...n){let t=x2;for(const s of n)t=t.insert(s.key,s);return t}function _2(n){let t=x2;return n.forEach(((s,r)=>t=t.insert(s,r.overlayedDocument))),t}function ea(){return $l()}function T2(){return $l()}function $l(){return new ha((n=>n.toString()),((n,t)=>n.isEqual(t)))}const b4=new fe(_t.comparator),x4=new Be(_t.comparator);function Ut(...n){let t=x4;for(const s of n)t=t.add(s);return t}const _4=new Be(Lt);function T4(){return _4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(t)?"-0":t}}function E2(n){return{integerValue:""+n}}function E4(n,t){return $N(t)?E2(t):ag(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this._=void 0}}function w4(n,t,s){return n instanceof Oh?(function(o,u){const c={fields:{[r2]:{stringValue:i2},[o2]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ng(u)&&(u=sf(u)),u&&(c.fields[a2]=u),{mapValue:c}})(s,t):n instanceof lu?S2(n,t):n instanceof uu?A2(n,t):(function(o,u){const c=w2(o,u),d=Ex(c)+Ex(o.Ae);return cp(c)&&cp(o.Ae)?E2(d):ag(o.serializer,d)})(n,t)}function S4(n,t,s){return n instanceof lu?S2(n,t):n instanceof uu?A2(n,t):s}function w2(n,t){return n instanceof Ph?(function(r){return cp(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Oh extends lf{}class lu extends lf{constructor(t){super(),this.elements=t}}function S2(n,t){const s=N2(t);for(const r of n.elements)s.some((o=>Ys(o,r)))||s.push(r);return{arrayValue:{values:s}}}class uu extends lf{constructor(t){super(),this.elements=t}}function A2(n,t){let s=N2(t);for(const r of n.elements)s=s.filter((o=>!Ys(o,r)));return{arrayValue:{values:s}}}class Ph extends lf{constructor(t,s){super(),this.serializer=t,this.Ae=s}}function Ex(n){return Te(n.integerValue||n.doubleValue)}function N2(n){return sg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function A4(n,t){return n.field.isEqual(t.field)&&(function(r,o){return r instanceof lu&&o instanceof lu||r instanceof uu&&o instanceof uu?bo(r.elements,o.elements,Ys):r instanceof Ph&&o instanceof Ph?Ys(r.Ae,o.Ae):r instanceof Oh&&o instanceof Oh})(n.transform,t.transform)}class N4{constructor(t,s){this.version=t,this.transformResults=s}}class Wn{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new Wn}static exists(t){return new Wn(void 0,t)}static updateTime(t){return new Wn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bh(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class uf{}function C2(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new og(n.key,Wn.none()):new bu(n.key,n.data,Wn.none());{const s=n.data,r=_n.empty();let o=new Be(tn.comparator);for(let u of t.fields)if(!o.has(u)){let c=s.field(u);c===null&&u.length>1&&(u=u.popLast(),c=s.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new br(n.key,r,new kn(o.toArray()),Wn.none())}}function C4(n,t,s){n instanceof bu?(function(o,u,c){const d=o.value.clone(),g=Sx(o.fieldTransforms,u,c.transformResults);d.setAll(g),u.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,t,s):n instanceof br?(function(o,u,c){if(!bh(o.precondition,u))return void u.convertToUnknownDocument(c.version);const d=Sx(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(R2(o)),g.setAll(d),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,t,s):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,s)}function Zl(n,t,s,r){return n instanceof bu?(function(u,c,d,g){if(!bh(u.precondition,c))return d;const y=u.value.clone(),b=Ax(u.fieldTransforms,g,c);return y.setAll(b),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,t,s,r):n instanceof br?(function(u,c,d,g){if(!bh(u.precondition,c))return d;const y=Ax(u.fieldTransforms,g,c),b=c.data;return b.setAll(R2(u)),b.setAll(y),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((_=>_.field)))})(n,t,s,r):(function(u,c,d){return bh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,t,s)}function R4(n,t){let s=null;for(const r of n.fieldTransforms){const o=t.data.field(r.field),u=w2(r.transform,o||null);u!=null&&(s===null&&(s=_n.empty()),s.set(r.field,u))}return s||null}function wx(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&bo(r,o,((u,c)=>A4(u,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class bu extends uf{constructor(t,s,r,o=[]){super(),this.key=t,this.value=s,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class br extends uf{constructor(t,s,r,o,u=[]){super(),this.key=t,this.data=s,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function R2(n){const t=new Map;return n.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=n.data.field(s);t.set(s,r)}})),t}function Sx(n,t,s){const r=new Map;Qt(n.length===s.length,32656,{Re:s.length,Ve:n.length});for(let o=0;o<s.length;o++){const u=n[o],c=u.transform,d=t.data.field(u.field);r.set(u.field,S4(c,d,s[o]))}return r}function Ax(n,t,s){const r=new Map;for(const o of n){const u=o.transform,c=s.data.field(o.field);r.set(o.field,w4(u,c,t))}return r}class og extends uf{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D4 extends uf{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(t,s,r,o){this.batchId=t,this.localWriteTime=s,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,s){const r=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&C4(u,t,r[o])}}applyToLocalView(t,s){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(s=Zl(r,t,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(s=Zl(r,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){const r=T2();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let d=this.applyToLocalView(c,u.mutatedFields);d=s.has(o.key)?null:d;const g=C2(c,d);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(At.min())})),r}keys(){return this.mutations.reduce(((t,s)=>t.add(s.key)),Ut())}isEqual(t){return this.batchId===t.batchId&&bo(this.mutations,t.mutations,((s,r)=>wx(s,r)))&&bo(this.baseMutations,t.baseMutations,((s,r)=>wx(s,r)))}}class lg{constructor(t,s,r,o){this.batch=t,this.commitVersion=s,this.mutationResults=r,this.docVersions=o}static from(t,s,r){Qt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return b4})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new lg(t,s,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(t,s){this.count=t,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,Ft;function I4(n){switch(n){case st.OK:return Et(64938);case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0;default:return Et(15467,{code:n})}}function D2(n){if(n===void 0)return xi("GRPC error has no .code"),st.UNKNOWN;switch(n){case Ve.OK:return st.OK;case Ve.CANCELLED:return st.CANCELLED;case Ve.UNKNOWN:return st.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return st.INTERNAL;case Ve.UNAVAILABLE:return st.UNAVAILABLE;case Ve.UNAUTHENTICATED:return st.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case Ve.NOT_FOUND:return st.NOT_FOUND;case Ve.ALREADY_EXISTS:return st.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return st.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case Ve.ABORTED:return st.ABORTED;case Ve.OUT_OF_RANGE:return st.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return st.UNIMPLEMENTED;case Ve.DATA_LOSS:return st.DATA_LOSS;default:return Et(39323,{code:n})}}(Ft=Ve||(Ve={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=new ur([4294967295,4294967295],0);function Nx(n){const t=k4().encode(n),s=new G1;return s.update(t),new Uint8Array(s.digest())}function Cx(n){const t=new DataView(n.buffer),s=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new ur([s,r],0),new ur([o,u],0)]}class ug{constructor(t,s,r){if(this.bitmap=t,this.padding=s,this.hashCount=r,s<0||s>=8)throw new ql(`Invalid padding: ${s}`);if(r<0)throw new ql(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${r}`);if(t.length===0&&s!==0)throw new ql(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*t.length-s,this.pe=ur.fromNumber(this.ge)}ye(t,s,r){let o=t.add(s.multiply(ur.fromNumber(r)));return o.compare(O4)===1&&(o=new ur([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const s=Nx(t),[r,o]=Cx(s);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,s,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new ug(u,o,s);return r.forEach((d=>c.insert(d))),c}insert(t){if(this.ge===0)return;const s=Nx(t),[r,o]=Cx(s);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const s=Math.floor(t/8),r=t%8;this.bitmap[s]|=1<<r}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(t,s,r,o,u){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,s,r){const o=new Map;return o.set(t,xu.createSynthesizedTargetChangeForCurrentChange(t,s,r)),new cf(At.min(),o,new fe(Lt),_i(),Ut())}}class xu{constructor(t,s,r,o,u){this.resumeToken=t,this.current=s,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,s,r){return new xu(r,s,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t,s,r,o){this.be=t,this.removedTargetIds=s,this.key=r,this.De=o}}class j2{constructor(t,s){this.targetId=t,this.Ce=s}}class V2{constructor(t,s,r=nn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=s,this.resumeToken=r,this.cause=o}}class Rx{constructor(){this.ve=0,this.Fe=Dx(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ut(),s=Ut(),r=Ut();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:s=s.add(o);break;case 1:r=r.add(o);break;default:Et(38017,{changeType:u})}})),new xu(this.Me,this.xe,t,s,r)}qe(){this.Oe=!1,this.Fe=Dx()}Qe(t,s){this.Oe=!0,this.Fe=this.Fe.insert(t,s)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class P4{constructor(t){this.Ge=t,this.ze=new Map,this.je=_i(),this.Je=uh(),this.He=uh(),this.Ye=new fe(Lt)}Ze(t){for(const s of t.be)t.De&&t.De.isFoundDocument()?this.Xe(s,t.De):this.et(s,t.key,t.De);for(const s of t.removedTargetIds)this.et(s,t.key,t.De)}tt(t){this.forEachTarget(t,(s=>{const r=this.nt(s);switch(t.state){case 0:this.rt(s)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(t.resumeToken));break;default:Et(56790,{state:t.state})}}))}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.ze.forEach(((r,o)=>{this.rt(o)&&s(o)}))}st(t){const s=t.targetId,r=t.Ce.count,o=this.ot(s);if(o){const u=o.target;if(fp(u))if(r===0){const c=new _t(u.path);this.et(s,c,on.newNoDocument(c,At.min()))}else Qt(r===1,20013,{expectedCount:r});else{const c=this._t(s);if(c!==r){const d=this.ut(t),g=d?this.ct(d,t,c):1;if(g!==0){this.it(s);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,y)}}}}}ut(t){const s=t.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=s;let c,d;try{c=dr(r).toUint8Array()}catch(g){if(g instanceof s2)return vo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new ug(c,o,u)}catch(g){return vo(g instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(t,s,r){return s.Ce.count===r-this.Pt(t,s.targetId)?0:2}Pt(t,s){const r=this.Ge.getRemoteKeysForTarget(s);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(d)||(this.et(s,u,null),o++)})),o}Tt(t){const s=new Map;this.ze.forEach(((u,c)=>{const d=this.ot(c);if(d){if(u.current&&fp(d.target)){const g=new _t(d.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,on.newNoDocument(g,t))}u.Be&&(s.set(c,u.ke()),u.qe())}}));let r=Ut();this.He.forEach(((u,c)=>{let d=!0;c.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new cf(t,s,this.Ye,this.je,r);return this.je=_i(),this.Je=uh(),this.He=uh(),this.Ye=new fe(Lt),o}Xe(t,s){if(!this.rt(t))return;const r=this.Et(t,s.key)?2:0;this.nt(t).Qe(s.key,r),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(t)),this.He=this.He.insert(s.key,this.dt(s.key).add(t))}et(t,s,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(t)),this.He=this.He.insert(s,this.dt(s).add(t)),r&&(this.je=this.je.insert(s,r))}removeTarget(t){this.ze.delete(t)}_t(t){const s=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let s=this.ze.get(t);return s||(s=new Rx,this.ze.set(t,s)),s}dt(t){let s=this.He.get(t);return s||(s=new Be(Lt),this.He=this.He.insert(t,s)),s}It(t){let s=this.Je.get(t);return s||(s=new Be(Lt),this.Je=this.Je.insert(t,s)),s}rt(t){const s=this.ot(t)!==null;return s||dt("WatchChangeAggregator","Detected inactive target",t),s}ot(t){const s=this.ze.get(t);return s&&s.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Rx),this.Ge.getRemoteKeysForTarget(t).forEach((s=>{this.et(t,s,null)}))}Et(t,s){return this.Ge.getRemoteKeysForTarget(t).has(s)}}function uh(){return new fe(_t.comparator)}function Dx(){return new fe(_t.comparator)}const L4={asc:"ASCENDING",desc:"DESCENDING"},U4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B4={and:"AND",or:"OR"};class z4{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function pp(n,t){return n.useProto3Json||nf(t)?t:{value:t}}function Lh(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function M2(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function F4(n,t){return Lh(n,t.toTimestamp())}function zs(n){return Qt(!!n,49232),At.fromTimestamp((function(s){const r=fr(s);return new oe(r.seconds,r.nanos)})(n))}function cg(n,t){return gp(n,t).canonicalString()}function gp(n,t){const s=(function(o){return new ie(["projects",o.projectId,"databases",o.database])})(n).child("documents");return t===void 0?s:s.child(t)}function I2(n){const t=ie.fromString(n);return Qt(U2(t),10190,{key:t.toString()}),t}function yp(n,t){return cg(n.databaseId,t.path)}function km(n,t){const s=I2(t);if(s.get(1)!==n.databaseId.projectId)throw new ft(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+n.databaseId.projectId);if(s.get(3)!==n.databaseId.database)throw new ft(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+n.databaseId.database);return new _t(O2(s))}function k2(n,t){return cg(n.databaseId,t)}function q4(n){const t=I2(n);return t.length===4?ie.emptyPath():O2(t)}function vp(n){return new ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function O2(n){return Qt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function jx(n,t,s){return{name:yp(n,t),fields:s.value.mapValue.fields}}function H4(n,t){let s;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Et(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(Qt(b===void 0||typeof b=="string",58123),nn.fromBase64String(b||"")):(Qt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),nn.fromUint8Array(b||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&(function(y){const b=y.code===void 0?st.UNKNOWN:D2(y.code);return new ft(b,y.message||"")})(c);s=new V2(r,o,u,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=km(n,r.document.name),u=zs(r.document.updateTime),c=r.document.createTime?zs(r.document.createTime):At.min(),d=new _n({mapValue:{fields:r.document.fields}}),g=on.newFoundDocument(o,u,c,d),y=r.targetIds||[],b=r.removedTargetIds||[];s=new xh(y,b,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=km(n,r.document),u=r.readTime?zs(r.readTime):At.min(),c=on.newNoDocument(o,u),d=r.removedTargetIds||[];s=new xh([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=km(n,r.document),u=r.removedTargetIds||[];s=new xh([],u,o,null)}else{if(!("filter"in t))return Et(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new M4(o,u),d=r.targetId;s=new j2(d,c)}}return s}function G4(n,t){let s;if(t instanceof bu)s={update:jx(n,t.key,t.value)};else if(t instanceof og)s={delete:yp(n,t.key)};else if(t instanceof br)s={update:jx(n,t.key,t.data),updateMask:tC(t.fieldMask)};else{if(!(t instanceof D4))return Et(16599,{Vt:t.type});s={verify:yp(n,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const d=c.transform;if(d instanceof Oh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof lu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof uu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ph)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Et(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(s.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:F4(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Et(27497)})(n,t.precondition)),s}function Y4(n,t){return n&&n.length>0?(Qt(t!==void 0,14353),n.map((s=>(function(o,u){let c=o.updateTime?zs(o.updateTime):zs(u);return c.isEqual(At.min())&&(c=zs(u)),new N4(c,o.transformResults||[])})(s,t)))):[]}function K4(n,t){return{documents:[k2(n,t.path)]}}function Q4(n,t){const s={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=k2(n,o);const u=(function(y){if(y.length!==0)return L2(ps.create(y,"and"))})(t.filters);u&&(s.structuredQuery.where=u);const c=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:ao(T.field),direction:Z4(T.dir)}})(b)))})(t.orderBy);c&&(s.structuredQuery.orderBy=c);const d=pp(n,t.limit);return d!==null&&(s.structuredQuery.limit=d),t.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:s,parent:o}}function X4(n){let t=q4(n.parent);const s=n.structuredQuery,r=s.from?s.from.length:0;let o=null;if(r>0){Qt(r===1,65062);const b=s.from[0];b.allDescendants?o=b.collectionId:t=t.child(b.collectionId)}let u=[];s.where&&(u=(function(_){const T=P2(_);return T instanceof ps&&d2(T)?T.getFilters():[T]})(s.where));let c=[];s.orderBy&&(c=(function(_){return _.map((T=>(function(k){return new kh(oo(k.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(T)))})(s.orderBy));let d=null;s.limit&&(d=(function(_){let T;return T=typeof _=="object"?_.value:_,nf(T)?null:T})(s.limit));let g=null;s.startAt&&(g=(function(_){const T=!!_.before,j=_.values||[];return new Ih(j,T)})(s.startAt));let y=null;return s.endAt&&(y=(function(_){const T=!_.before,j=_.values||[];return new Ih(j,T)})(s.endAt)),m4(t,o,c,u,d,"F",g,y)}function $4(n,t){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:o})}})(t.purpose);return s==null?null:{"goog-listen-tags":s}}function P2(n){return n.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=oo(s.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=oo(s.unaryFilter.field);return Ie.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=oo(s.unaryFilter.field);return Ie.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=oo(s.unaryFilter.field);return Ie.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}})(n):n.fieldFilter!==void 0?(function(s){return Ie.create(oo(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(s){return ps.create(s.compositeFilter.filters.map((r=>P2(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Et(1026)}})(s.compositeFilter.op))})(n):Et(30097,{filter:n})}function Z4(n){return L4[n]}function W4(n){return U4[n]}function J4(n){return B4[n]}function ao(n){return{fieldPath:n.canonicalString()}}function oo(n){return tn.fromServerFormat(n.fieldPath)}function L2(n){return n instanceof Ie?(function(s){if(s.op==="=="){if(vx(s.value))return{unaryFilter:{field:ao(s.field),op:"IS_NAN"}};if(yx(s.value))return{unaryFilter:{field:ao(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(vx(s.value))return{unaryFilter:{field:ao(s.field),op:"IS_NOT_NAN"}};if(yx(s.value))return{unaryFilter:{field:ao(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(s.field),op:W4(s.op),value:s.value}}})(n):n instanceof ps?(function(s){const r=s.getFilters().map((o=>L2(o)));return r.length===1?r[0]:{compositeFilter:{op:J4(s.op),filters:r}}})(n):Et(54877,{filter:n})}function tC(n){const t=[];return n.fields.forEach((s=>t.push(s.canonicalString()))),{fieldPaths:t}}function U2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,s,r,o,u=At.min(),c=At.min(),d=nn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=s,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new rr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t){this.yt=t}}function nC(n){const t=X4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.Cn=new iC}addToCollectionParentIndex(t,s){return this.Cn.add(s),rt.resolve()}getCollectionParents(t,s){return rt.resolve(this.Cn.getEntries(s))}addFieldIndex(t,s){return rt.resolve()}deleteFieldIndex(t,s){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,s){return rt.resolve()}getDocumentsMatchingTarget(t,s){return rt.resolve(null)}getIndexType(t,s){return rt.resolve(0)}getFieldIndexes(t,s){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,s){return rt.resolve(hr.min())}getMinOffsetFromCollectionGroup(t,s){return rt.resolve(hr.min())}updateCollectionGroup(t,s,r){return rt.resolve()}updateIndexEntries(t,s){return rt.resolve()}}class iC{constructor(){this.index={}}add(t){const s=t.lastSegment(),r=t.popLast(),o=this.index[s]||new Be(ie.comparator),u=!o.has(r);return this.index[s]=o.add(r),u}has(t){const s=t.lastSegment(),r=t.popLast(),o=this.index[s];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Be(ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},B2=41943040;class xn{static withCacheSize(t){return new xn(t,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(B2,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new To(0)}static cr(){return new To(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="LruGarbageCollector",rC=1048576;function Ix([n,t],[s,r]){const o=Lt(n,s);return o===0?Lt(t,r):o}class aC{constructor(t){this.Ir=t,this.buffer=new Be(Ix),this.Er=0}dr(){return++this.Er}Ar(t){const s=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();Ix(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class oC{constructor(t,s,r){this.garbageCollector=t,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){dt(Mx,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Co(s)?dt(Mx,"Ignoring IndexedDB error during garbage collection: ",s):await No(s)}await this.Vr(3e5)}))}}class lC{constructor(t,s){this.mr=t,this.params=s}calculateTargetCount(t,s){return this.mr.gr(t).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(t,s){if(s===0)return rt.resolve(ef.ce);const r=new aC(s);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,s,r){return this.mr.removeTargets(t,s,r)}removeOrphanedDocuments(t,s){return this.mr.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(Vx)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vx):this.yr(t,s)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,s){let r,o,u,c,d,g,y;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,c=Date.now(),this.nthSequenceNumber(t,o)))).next((_=>(r=_,d=Date.now(),this.removeTargets(t,r,s)))).next((_=>(u=_,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((_=>(y=Date.now(),io()<=qt.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${u} targets in `+(g-d)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:_}))))}}function uC(n,t){return new lC(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.changes=new ha((t=>t.toString()),((t,s)=>t.isEqual(s))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,on.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?rt.resolve(r):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t,s,r,o){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,s){let r=null;return this.documentOverlayCache.getOverlay(t,s).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,s)))).next((o=>(r!==null&&Zl(r.mutation,o,kn.empty(),oe.now()),o)))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next((r=>this.getLocalViewOfDocuments(t,r,Ut()).next((()=>r))))}getLocalViewOfDocuments(t,s,r=Ut()){const o=ea();return this.populateOverlays(t,o,s).next((()=>this.computeViews(t,s,o,r).next((u=>{let c=Fl();return u.forEach(((d,g)=>{c=c.insert(d,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,s){const r=ea();return this.populateOverlays(t,r,s).next((()=>this.computeViews(t,s,r,Ut())))}populateOverlays(t,s,r){const o=[];return r.forEach((u=>{s.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,d)=>{s.set(c,d)}))}))}computeViews(t,s,r,o){let u=_i();const c=$l(),d=(function(){return $l()})();return s.forEach(((g,y)=>{const b=r.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof br)?u=u.insert(y.key,y):b!==void 0?(c.set(y.key,b.mutation.getFieldMask()),Zl(b.mutation,y,b.mutation.getFieldMask(),oe.now())):c.set(y.key,kn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((y,b)=>c.set(y,b))),s.forEach(((y,b)=>d.set(y,new hC(b,c.get(y)??null)))),d)))}recalculateAndSaveOverlays(t,s){const r=$l();let o=new fe(((c,d)=>c-d)),u=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next((c=>{for(const d of c)d.keys().forEach((g=>{const y=s.get(g);if(y===null)return;let b=r.get(g)||kn.empty();b=d.applyToLocalView(y,b),r.set(g,b);const _=(o.get(d.batchId)||Ut()).add(g);o=o.insert(d.batchId,_)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),y=g.key,b=g.value,_=T2();b.forEach((T=>{if(!u.has(T)){const j=C2(s.get(T),r.get(T));j!==null&&_.set(T,j),u=u.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(t,y,_))}return rt.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,s,r,o){return(function(c){return _t.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(t,s.path):y2(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,r,o):this.getDocumentsMatchingCollectionQuery(t,s,r,o)}getNextDocuments(t,s,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,r.largestBatchId,o-u.size):rt.resolve(ea());let d=iu,g=u;return c.next((y=>rt.forEach(y,((b,_)=>(d<_.largestBatchId&&(d=_.largestBatchId),u.get(b)?rt.resolve():this.remoteDocumentCache.getEntry(t,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(t,y,u))).next((()=>this.computeViews(t,g,y,Ut()))).next((b=>({batchId:d,changes:_2(b)})))))}))}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new _t(s)).next((r=>{let o=Fl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,s,r,o){const u=s.collectionGroup;let c=Fl();return this.indexManager.getCollectionParents(t,u).next((d=>rt.forEach(d,(g=>{const y=(function(_,T){return new vu(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(s,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,r,o).next((b=>{b.forEach(((_,T)=>{c=c.insert(_,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,s,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,r,u,o)))).next((c=>{u.forEach(((g,y)=>{const b=y.getKey();c.get(b)===null&&(c=c.insert(b,on.newInvalidDocument(b)))}));let d=Fl();return c.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&Zl(b.mutation,y,kn.empty(),oe.now()),of(s,y)&&(d=d.insert(g,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,s){return rt.resolve(this.Lr.get(s))}saveBundleMetadata(t,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:zs(o.createTime)}})(s)),rt.resolve()}getNamedQuery(t,s){return rt.resolve(this.kr.get(s))}saveNamedQuery(t,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:nC(o.bundledQuery),readTime:zs(o.readTime)}})(s)),rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.overlays=new fe(_t.comparator),this.qr=new Map}getOverlay(t,s){return rt.resolve(this.overlays.get(s))}getOverlays(t,s){const r=ea();return rt.forEach(s,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,s,r){return r.forEach(((o,u)=>{this.St(t,s,u)})),rt.resolve()}removeOverlaysForBatchId(t,s,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),rt.resolve()}getOverlaysForCollection(t,s,r){const o=ea(),u=s.length+1,c=new _t(s.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,y=g.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return rt.resolve(o)}getOverlaysForCollectionGroup(t,s,r,o){let u=new fe(((y,b)=>y-b));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>r){let b=u.get(y.largestBatchId);b===null&&(b=ea(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const d=ea(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>d.set(y,b))),!(d.size()>=o)););return rt.resolve(d)}St(t,s,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new V4(s,r));let u=this.qr.get(s);u===void 0&&(u=Ut(),this.qr.set(s,u)),this.qr.set(s,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(t){return rt.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.Qr=new Be(Ge.$r),this.Ur=new Be(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,s){const r=new Ge(t,s);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,s){t.forEach((r=>this.addReference(r,s)))}removeReference(t,s){this.Gr(new Ge(t,s))}zr(t,s){t.forEach((r=>this.removeReference(r,s)))}jr(t){const s=new _t(new ie([])),r=new Ge(s,t),o=new Ge(s,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const s=new _t(new ie([])),r=new Ge(s,t),o=new Ge(s,t+1);let u=Ut();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const s=new Ge(t,0),r=this.Qr.firstAfterOrEqual(s);return r!==null&&t.isEqual(r.key)}}class Ge{constructor(t,s){this.key=t,this.Yr=s}static $r(t,s){return _t.comparator(t.key,s.key)||Lt(t.Yr,s.Yr)}static Kr(t,s){return Lt(t.Yr,s.Yr)||_t.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new Be(Ge.$r)}checkEmpty(t){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new j4(u,s,r,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new Ge(d.key,u)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return rt.resolve(c)}lookupMutationBatch(t,s){return rt.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(t,s){const r=s+1,o=this.ei(r),u=o<0?0:o;return rt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?eg:this.tr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const r=new Ge(s,0),o=new Ge(s,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const d=this.Xr(c.Yr);u.push(d)})),rt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,s){let r=new Be(Lt);return s.forEach((o=>{const u=new Ge(o,0),c=new Ge(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(d=>{r=r.add(d.Yr)}))})),rt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,s){const r=s.path,o=r.length+1;let u=r;_t.isDocumentKey(u)||(u=u.child(""));const c=new Ge(new _t(u),0);let d=new Be(Lt);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(d=d.add(g.Yr)),!0)}),c),rt.resolve(this.ti(d))}ti(t){const s=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&s.push(o)})),s}removeMutationBatch(t,s){Qt(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return rt.forEach(s.mutations,(o=>{const u=new Ge(o.key,s.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,s){const r=new Ge(s,0),o=this.Zr.firstAfterOrEqual(r);return rt.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}ni(t,s){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const s=this.ei(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t){this.ri=t,this.docs=(function(){return new fe(_t.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const r=s.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const r=this.docs.get(s);return rt.resolve(r?r.document.mutableCopy():on.newInvalidDocument(s))}getEntries(t,s){let r=_i();return s.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():on.newInvalidDocument(o))})),rt.resolve(r)}getDocumentsMatchingQuery(t,s,r,o){let u=_i();const c=s.path,d=new _t(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||YN(GN(b),r)<=0||(o.has(b.key)||of(s,b))&&(u=u.insert(b.key,b.mutableCopy()))}return rt.resolve(u)}getAllFromCollectionGroup(t,s,r,o){Et(9500)}ii(t,s){return rt.forEach(this.docs,(r=>s(r)))}newChangeBuffer(t){return new vC(this)}getSize(t){return rt.resolve(this.size)}}class vC extends cC{constructor(t){super(),this.Nr=t}applyChanges(t){const s=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),rt.waitFor(s)}getFromCache(t,s){return this.Nr.getEntry(t,s)}getAllFromCache(t,s){return this.Nr.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(t){this.persistence=t,this.si=new ha((s=>ig(s)),rg),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.oi=0,this._i=new hg,this.targetCount=0,this.ai=To.ur()}forEachTarget(t,s){return this.si.forEach(((r,o)=>s(o))),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.oi&&(this.oi=s),rt.resolve()}Pr(t){this.si.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.ai=new To(s),this.highestTargetId=s),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,s){return this.Pr(s),this.targetCount+=1,rt.resolve()}updateTargetData(t,s){return this.Pr(s),rt.resolve()}removeTargetData(t,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,s,r){let o=0;const u=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=s&&r.get(d.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,d.targetId)),o++)})),rt.waitFor(u).next((()=>o))}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,s){const r=this.si.get(s)||null;return rt.resolve(r)}addMatchingKeys(t,s,r){return this._i.Wr(s,r),rt.resolve()}removeMatchingKeys(t,s,r){this._i.zr(s,r);const o=this.persistence.referenceDelegate,u=[];return o&&s.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),rt.waitFor(u)}removeMatchingKeysForTargetId(t,s){return this._i.jr(s),rt.resolve()}getMatchingKeysForTargetId(t,s){const r=this._i.Hr(s);return rt.resolve(r)}containsKey(t,s){return rt.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t,s){this.ui={},this.overlays={},this.ci=new ef(0),this.li=!1,this.li=!0,this.hi=new pC,this.referenceDelegate=t(this),this.Pi=new bC(this),this.indexManager=new sC,this.remoteDocumentCache=(function(o){return new yC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new eC(s),this.Ii=new dC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new mC,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let r=this.ui[t.toKey()];return r||(r=new gC(s,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,s,r){dt("MemoryPersistence","Starting transaction:",t);const o=new xC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,s){return rt.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,s))))}}class xC extends QN{constructor(t){super(),this.currentSequenceNumber=t}}class fg{constructor(t){this.persistence=t,this.Ri=new hg,this.Vi=null}static mi(t){return new fg(t)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(t,s,r){return this.Ri.addReference(r,s),this.fi.delete(r.toString()),rt.resolve()}removeReference(t,s,r){return this.Ri.removeReference(r,s),this.fi.add(r.toString()),rt.resolve()}markPotentiallyOrphaned(t,s){return this.fi.add(s.toString()),rt.resolve()}removeTarget(t,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,s.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,s)))}Ei(){this.Vi=new Set}di(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.fi,(r=>{const o=_t.fromPath(r);return this.gi(t,o).next((u=>{u||s.removeEntry(o,At.min())}))})).next((()=>(this.Vi=null,s.apply(t))))}updateLimboDocument(t,s){return this.gi(t,s).next((r=>{r?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(t){return 0}gi(t,s){return rt.or([()=>rt.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.Ai(t,s)])}}class Uh{constructor(t,s){this.persistence=t,this.pi=new ha((r=>ZN(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=uC(this,s)}static mi(t,s){return new Uh(t,s)}Ei(){}di(t){return rt.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}gr(t){const s=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>s.next((o=>r+o))))}wr(t){let s=0;return this.pr(t,(r=>{s++})).next((()=>s))}pr(t,s){return rt.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?rt.resolve():s(o)))))}removeTargets(t,s,r){return this.persistence.getTargetCache().removeTargets(t,s,r)}removeOrphanedDocuments(t,s){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,s).next((d=>{d||(r++,u.removeEntry(c,At.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,s){return this.pi.set(s,t.currentSequenceNumber),rt.resolve()}removeTarget(t,s){const r=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,s,r){return this.pi.set(r,t.currentSequenceNumber),rt.resolve()}removeReference(t,s,r){return this.pi.set(r,t.currentSequenceNumber),rt.resolve()}updateLimboDocument(t,s){return this.pi.set(s,t.currentSequenceNumber),rt.resolve()}Ti(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=yh(t.data.value)),s}br(t,s,r){return rt.or([()=>this.persistence.Ai(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{const o=this.pi.get(s);return rt.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t,s,r,o){this.targetId=t,this.fromCache=s,this.Es=r,this.ds=o}static As(t,s){let r=Ut(),o=Ut();for(const u of s.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new dg(t,s.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return bA()?8:XN(yA())>0?6:4})()}initialize(t,s){this.ps=t,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(t,s,r,o){const u={result:null};return this.ys(t,s).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,s,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new _C;return this.Ss(t,s,c).next((d=>{if(u.result=d,this.Vs)return this.bs(t,s,c,d.size)}))})).next((()=>u.result))}bs(t,s,r,o){return r.documentReadCount<this.fs?(io()<=qt.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",ro(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),rt.resolve()):(io()<=qt.DEBUG&&dt("QueryEngine","Query:",ro(s),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(io()<=qt.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",ro(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Bs(s))):rt.resolve())}ys(t,s){if(Tx(s))return rt.resolve(null);let r=Bs(s);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=mp(s,null,"F"),r=Bs(s)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=Ut(...u);return this.ps.getDocuments(t,c).next((d=>this.indexManager.getMinOffset(t,r).next((g=>{const y=this.Ds(s,d);return this.Cs(s,y,c,g.readTime)?this.ys(t,mp(s,null,"F")):this.vs(t,y,s,g)}))))})))))}ws(t,s,r,o){return Tx(s)||o.isEqual(At.min())?rt.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(s,u);return this.Cs(s,c,r,o)?rt.resolve(null):(io()<=qt.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ro(s)),this.vs(t,c,s,HN(o,iu)).next((d=>d)))}))}Ds(t,s){let r=new Be(b2(t));return s.forEach(((o,u)=>{of(t,u)&&(r=r.add(u))})),r}Cs(t,s,r,o){if(t.limit===null)return!1;if(r.size!==s.size)return!0;const u=t.limitType==="F"?s.last():s.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,s,r){return io()<=qt.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",ro(s)),this.ps.getDocumentsMatchingQuery(t,s,hr.min(),r)}vs(t,s,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(s.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="LocalStore",EC=3e8;class wC{constructor(t,s,r,o){this.persistence=t,this.Fs=s,this.serializer=o,this.Ms=new fe(Lt),this.xs=new ha((u=>ig(u)),rg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new fC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>t.collect(s,this.Ms)))}}function SC(n,t,s,r){return new wC(n,t,s,r)}async function F2(n,t){const s=Ct(n);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return s.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,s.Bs(t),s.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],d=[];let g=Ut();for(const y of o){c.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){d.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return s.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:c,addedBatchIds:d})))}))}))}function AC(n,t){const s=Ct(n);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,y,b){const _=y.batch,T=_.keys();let j=rt.resolve();return T.forEach((k=>{j=j.next((()=>b.getEntry(g,k))).next((L=>{const U=y.docVersions.get(k);Qt(U!==null,48541),L.version.compareTo(U)<0&&(_.applyToRemoteDocument(L,y),L.isValidDocument()&&(L.setReadTime(y.commitVersion),b.addEntry(L)))}))})),j.next((()=>d.mutationQueue.removeMutationBatch(g,_)))})(s,r,t,u).next((()=>u.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let g=Ut();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(g=g.add(d.batch.mutations[y].key));return g})(t)))).next((()=>s.localDocuments.getDocuments(r,o)))}))}function q2(n){const t=Ct(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>t.Pi.getLastRemoteSnapshotVersion(s)))}function NC(n,t){const s=Ct(n),r=t.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const d=[];t.targetChanges.forEach(((b,_)=>{const T=o.get(_);if(!T)return;d.push(s.Pi.removeMatchingKeys(u,b.removedDocuments,_).next((()=>s.Pi.addMatchingKeys(u,b.addedDocuments,_))));let j=T.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(_)!==null?j=j.withResumeToken(nn.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):b.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(b.resumeToken,r)),o=o.insert(_,j),(function(L,U,G){return L.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=EC?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(T,j,b)&&d.push(s.Pi.updateTargetData(u,j))}));let g=_i(),y=Ut();if(t.documentUpdates.forEach((b=>{t.resolvedLimboDocuments.has(b)&&d.push(s.persistence.referenceDelegate.updateLimboDocument(u,b))})),d.push(CC(u,c,t.documentUpdates).next((b=>{g=b.ks,y=b.qs}))),!r.isEqual(At.min())){const b=s.Pi.getLastRemoteSnapshotVersion(u).next((_=>s.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));d.push(b)}return rt.waitFor(d).next((()=>c.apply(u))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(s.Ms=o,u)))}function CC(n,t,s){let r=Ut(),o=Ut();return s.forEach((u=>r=r.add(u))),t.getEntries(n,r).next((u=>{let c=_i();return s.forEach(((d,g)=>{const y=u.get(d);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(At.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):dt(mg,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function RC(n,t){const s=Ct(n);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=eg),s.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function DC(n,t){const s=Ct(n);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return s.Pi.getTargetData(r,t).next((u=>u?(o=u,rt.resolve(o)):s.Pi.allocateTargetId(r).next((c=>(o=new rr(t,c,"TargetPurposeListen",r.currentSequenceNumber),s.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=s.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(r.targetId,r),s.xs.set(t,r.targetId)),r}))}async function bp(n,t,s){const r=Ct(n),o=r.Ms.get(t),u=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Co(c))throw c;dt(mg,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function kx(n,t,s){const r=Ct(n);let o=At.min(),u=Ut();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,y,b){const _=Ct(g),T=_.xs.get(b);return T!==void 0?rt.resolve(_.Ms.get(T)):_.Pi.getTargetData(y,b)})(r,c,Bs(t)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,s?o:At.min(),s?u:Ut()))).next((d=>(jC(r,g4(t),d),{documents:d,Qs:u})))))}function jC(n,t,s){let r=n.Os.get(t)||At.min();s.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),n.Os.set(t,r)}class Ox{constructor(){this.activeTargetIds=T4()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class VC{constructor(){this.Mo=new Ox,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,r){}addLocalQueryTarget(t,s=!0){return s&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,s,r){this.xo[t]=s}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Ox,Promise.resolve()}handleUserChange(t,s,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="ConnectivityMonitor";class Lx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){dt(Px,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){dt(Px,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function xp(){return ch===null?ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",IC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Vh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,s,r,o,u){const c=xp(),d=this.zo(t,s.toUriEncodedString());dt(Om,`Sending RPC '${t}' ${c}:`,d,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:y}=new URL(d),b=Jh(y);return this.Jo(t,d,g,r,b).then((_=>(dt(Om,`Received RPC '${t}' ${c}: `,_),_)),(_=>{throw vo(Om,`RPC '${t}' ${c} failed with error: `,_,"url: ",d,"request:",r),_}))}Ho(t,s,r,o,u,c){return this.Go(t,s,r,o,u)}jo(t,s,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ao})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,s){const r=IC[t];return`${this.Uo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class PC extends kC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,s,r,o,u){const c=xp();return new Promise(((d,g)=>{const y=new Y1;y.setWithCredentials(!0),y.listenOnce(K1.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case gh.NO_ERROR:const _=y.getResponseJson();dt(rn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(_)),d(_);break;case gh.TIMEOUT:dt(rn,`RPC '${t}' ${c} timed out`),g(new ft(st.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:const T=y.getStatus();if(dt(rn,`RPC '${t}' ${c} failed with status:`,T,"response text:",y.getResponseText()),T>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const k=j==null?void 0:j.error;if(k&&k.status&&k.message){const L=(function(G){const W=G.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(W)>=0?W:st.UNKNOWN})(k.status);g(new ft(L,k.message))}else g(new ft(st.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ft(st.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:t,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{dt(rn,`RPC '${t}' ${c} completed.`)}}));const b=JSON.stringify(o);dt(rn,`RPC '${t}' ${c} sending request:`,o),y.send(s,"POST",b,r,15)}))}T_(t,s,r){const o=xp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=$1(),d=X1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,s,r),g.encodeInitMessageHeaders=!0;const b=u.join("");dt(rn,`Creating RPC '${t}' stream ${o}: ${b}`,g);const _=c.createWebChannel(b,g);this.I_(_);let T=!1,j=!1;const k=new OC({Yo:U=>{j?dt(rn,`Not sending because RPC '${t}' stream ${o} is closed:`,U):(T||(dt(rn,`Opening RPC '${t}' stream ${o} transport.`),_.open(),T=!0),dt(rn,`RPC '${t}' stream ${o} sending:`,U),_.send(U))},Zo:()=>_.close()}),L=(U,G,W)=>{U.listen(G,(Q=>{try{W(Q)}catch(at){setTimeout((()=>{throw at}),0)}}))};return L(_,zl.EventType.OPEN,(()=>{j||(dt(rn,`RPC '${t}' stream ${o} transport opened.`),k.o_())})),L(_,zl.EventType.CLOSE,(()=>{j||(j=!0,dt(rn,`RPC '${t}' stream ${o} transport closed`),k.a_(),this.E_(_))})),L(_,zl.EventType.ERROR,(U=>{j||(j=!0,vo(rn,`RPC '${t}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),k.a_(new ft(st.UNAVAILABLE,"The operation could not be completed")))})),L(_,zl.EventType.MESSAGE,(U=>{var G;if(!j){const W=U.data[0];Qt(!!W,16349);const Q=W,at=(Q==null?void 0:Q.error)||((G=Q[0])==null?void 0:G.error);if(at){dt(rn,`RPC '${t}' stream ${o} received error:`,at);const tt=at.status;let Z=(function(S){const A=Ve[S];if(A!==void 0)return D2(A)})(tt),D=at.message;Z===void 0&&(Z=st.INTERNAL,D="Unknown error status: "+tt+" with message "+at.message),j=!0,k.a_(new ft(Z,D)),_.close()}else dt(rn,`RPC '${t}' stream ${o} received:`,W),k.u_(W)}})),L(d,Q1.STAT_EVENT,(U=>{U.stat===op.PROXY?dt(rn,`RPC '${t}' stream ${o} detected buffering proxy`):U.stat===op.NOPROXY&&dt(rn,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((s=>s===t))}}function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(n){return new z4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,s,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=s,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-r);o>0&&dt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="PersistentStream";class G2{constructor(t,s,r,o,u,c,d,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new H2(t,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():s&&s.code===st.RESOURCE_EXHAUSTED?(xi(s.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===st.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(s)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===s&&this.G_(r,o)}),(r=>{t((()=>{const o=new ft(st.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,s){const r=this.W_(this.D_);this.stream=this.j_(t,s),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return dt(Ux,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return s=>{this.Mi.enqueueAndForget((()=>this.D_===t?s():(dt(Ux,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class LC extends G2{constructor(t,s,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,o,c),this.serializer=u}j_(t,s){return this.connection.T_("Listen",t,s)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const s=H4(this.serializer,t),r=(function(u){if(!("targetChange"in u))return At.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?At.min():c.readTime?zs(c.readTime):At.min()})(t);return this.listener.H_(s,r)}Y_(t){const s={};s.database=vp(this.serializer),s.addTarget=(function(u,c){let d;const g=c.target;if(d=fp(g)?{documents:K4(u,g)}:{query:Q4(u,g).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=M2(u,c.resumeToken);const y=pp(u,c.expectedCount);y!==null&&(d.expectedCount=y)}else if(c.snapshotVersion.compareTo(At.min())>0){d.readTime=Lh(u,c.snapshotVersion.toTimestamp());const y=pp(u,c.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,t);const r=$4(this.serializer,t);r&&(s.labels=r),this.q_(s)}Z_(t){const s={};s.database=vp(this.serializer),s.removeTarget=t,this.q_(s)}}class UC extends G2{constructor(t,s,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,s){return this.connection.T_("Write",t,s)}J_(t){return Qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const s=Y4(t.writeResults,t.commitTime),r=zs(t.commitTime);return this.listener.na(r,s)}ra(){const t={};t.database=vp(this.serializer),this.q_(t)}ea(t){const s={streamToken:this.lastStreamToken,writes:t.map((r=>G4(this.serializer,r)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{}class zC extends BC{constructor(t,s,r,o){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ft(st.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,gp(s,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ft(st.UNKNOWN,u.toString())}))}Ho(t,s,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(t,gp(s,r),o,c,d,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ft(st.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class FC{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xi(s),this.aa=!1):dt("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="RemoteStore";class qC{constructor(t,s,r,o,u){this.localStore=t,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{fa(this)&&(dt(ua,"Restarting streams for network reachability change."),await(async function(g){const y=Ct(g);y.Ea.add(4),await _u(y),y.Ra.set("Unknown"),y.Ea.delete(4),await ff(y)})(this))}))})),this.Ra=new FC(r,o)}}async function ff(n){if(fa(n))for(const t of n.da)await t(!0)}async function _u(n){for(const t of n.da)await t(!1)}function Y2(n,t){const s=Ct(n);s.Ia.has(t.targetId)||(s.Ia.set(t.targetId,t),vg(s)?yg(s):Ro(s).O_()&&gg(s,t))}function pg(n,t){const s=Ct(n),r=Ro(s);s.Ia.delete(t),r.O_()&&K2(s,t),s.Ia.size===0&&(r.O_()?r.L_():fa(s)&&s.Ra.set("Unknown"))}function gg(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const s=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}Ro(n).Y_(t)}function K2(n,t){n.Va.Ue(t),Ro(n).Z_(t)}function yg(n){n.Va=new P4({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Ro(n).start(),n.Ra.ua()}function vg(n){return fa(n)&&!Ro(n).x_()&&n.Ia.size>0}function fa(n){return Ct(n).Ea.size===0}function Q2(n){n.Va=void 0}async function HC(n){n.Ra.set("Online")}async function GC(n){n.Ia.forEach(((t,s)=>{gg(n,t)}))}async function YC(n,t){Q2(n),vg(n)?(n.Ra.ha(t),yg(n)):n.Ra.set("Unknown")}async function KC(n,t,s){if(n.Ra.set("Online"),t instanceof V2&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const d of u.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(n,t)}catch(r){dt(ua,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Bh(n,r)}else if(t instanceof xh?n.Va.Ze(t):t instanceof j2?n.Va.st(t):n.Va.tt(t),!s.isEqual(At.min()))try{const r=await q2(n.localStore);s.compareTo(r)>=0&&await(function(u,c){const d=u.Va.Tt(c);return d.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,c))}})),d.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(nn.EMPTY_BYTE_STRING,b.snapshotVersion)),K2(u,g);const _=new rr(b.target,g,y,b.sequenceNumber);gg(u,_)})),u.remoteSyncer.applyRemoteEvent(d)})(n,s)}catch(r){dt(ua,"Failed to raise snapshot:",r),await Bh(n,r)}}async function Bh(n,t,s){if(!Co(t))throw t;n.Ea.add(1),await _u(n),n.Ra.set("Offline"),s||(s=()=>q2(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{dt(ua,"Retrying IndexedDB access"),await s(),n.Ea.delete(1),await ff(n)}))}function X2(n,t){return t().catch((s=>Bh(n,s,t)))}async function df(n){const t=Ct(n),s=pr(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:eg;for(;QC(t);)try{const o=await RC(t.localStore,r);if(o===null){t.Ta.length===0&&s.L_();break}r=o.batchId,XC(t,o)}catch(o){await Bh(t,o)}$2(t)&&Z2(t)}function QC(n){return fa(n)&&n.Ta.length<10}function XC(n,t){n.Ta.push(t);const s=pr(n);s.O_()&&s.X_&&s.ea(t.mutations)}function $2(n){return fa(n)&&!pr(n).x_()&&n.Ta.length>0}function Z2(n){pr(n).start()}async function $C(n){pr(n).ra()}async function ZC(n){const t=pr(n);for(const s of n.Ta)t.ea(s.mutations)}async function WC(n,t,s){const r=n.Ta.shift(),o=lg.from(r,t,s);await X2(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await df(n)}async function JC(n,t){t&&pr(n).X_&&await(async function(r,o){if((function(c){return I4(c)&&c!==st.ABORTED})(o.code)){const u=r.Ta.shift();pr(r).B_(),await X2(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await df(r)}})(n,t),$2(n)&&Z2(n)}async function Bx(n,t){const s=Ct(n);s.asyncQueue.verifyOperationInProgress(),dt(ua,"RemoteStore received new credentials");const r=fa(s);s.Ea.add(3),await _u(s),r&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.Ea.delete(3),await ff(s)}async function tR(n,t){const s=Ct(n);t?(s.Ea.delete(2),await ff(s)):t||(s.Ea.add(2),await _u(s),s.Ra.set("Unknown"))}function Ro(n){return n.ma||(n.ma=(function(s,r,o){const u=Ct(s);return u.sa(),new LC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(n.datastore,n.asyncQueue,{Xo:HC.bind(null,n),t_:GC.bind(null,n),r_:YC.bind(null,n),H_:KC.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),vg(n)?yg(n):n.Ra.set("Unknown")):(await n.ma.stop(),Q2(n))}))),n.ma}function pr(n){return n.fa||(n.fa=(function(s,r,o){const u=Ct(s);return u.sa(),new UC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:$C.bind(null,n),r_:JC.bind(null,n),ta:ZC.bind(null,n),na:WC.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await df(n)):(await n.fa.stop(),n.Ta.length>0&&(dt(ua,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(t,s,r,o,u){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,s,r,o,u){const c=Date.now()+r,d=new bg(t,s,c,o,u);return d.start(r),d}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(st.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(n,t){if(xi("AsyncQueue",`${t}: ${n}`),Co(n))return new ft(st.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{static emptySet(t){return new po(t.comparator)}constructor(t){this.comparator=t?(s,r)=>t(s,r)||_t.comparator(s.key,r.key):(s,r)=>_t.comparator(s.key,r.key),this.keyedMap=Fl(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((s,r)=>(t(s),!1)))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof po)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((s=>{t.push(s.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const r=new po;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.ga=new fe(_t.comparator)}track(t){const s=t.doc.key,r=this.ga.get(s);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(s,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(s):t.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):Et(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(s,t)}ya(){const t=[];return this.ga.inorderTraversal(((s,r)=>{t.push(r)})),t}}class Eo{constructor(t,s,r,o,u,c,d,g,y){this.query=t,this.docs=s,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,s,r,o,u){const c=[];return s.forEach((d=>{c.push({type:0,doc:d})})),new Eo(t,s,po.emptySet(s),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&af(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,r=t.docChanges;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==r[o].type||!s[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class nR{constructor(){this.queries=Fx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const o=Ct(s),u=o.queries;o.queries=Fx(),u.forEach(((c,d)=>{for(const g of d.Sa)g.onError(r)}))})(this,new ft(st.ABORTED,"Firestore shutting down"))}}function Fx(){return new ha((n=>v2(n)),af)}async function _g(n,t){const s=Ct(n);let r=3;const o=t.query;let u=s.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new eR,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await s.onListen(o,!0);break;case 1:u.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(c){const d=xg(c,`Initialization of query '${ro(t.query)}' failed`);return void t.onError(d)}s.queries.set(o,u),u.Sa.push(t),t.va(s.onlineState),u.wa&&t.Fa(u.wa)&&Eg(s)}async function Tg(n,t){const s=Ct(n),r=t.query;let o=3;const u=s.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function sR(n,t){const s=Ct(n);let r=!1;for(const o of t){const u=o.query,c=s.queries.get(u);if(c){for(const d of c.Sa)d.Fa(o)&&(r=!0);c.wa=o}}r&&Eg(s)}function iR(n,t,s){const r=Ct(n),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(s);r.queries.delete(t)}function Eg(n){n.Ca.forEach((t=>{t.next()}))}var _p,qx;(qx=_p||(_p={})).Ma="default",qx.Cache="cache";class wg{constructor(t,s,r){this.query=t,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new Eo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let s=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),s=!0):this.La(t,this.onlineState)&&(this.ka(t),s=!0),this.Na=t,s}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),s=!0),s}La(t,s){if(!t.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||s==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(t){t=Eo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(t){this.key=t}}class J2{constructor(t){this.key=t}}class rR{constructor(t,s){this.query=t,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ut(),this.mutatedKeys=Ut(),this.eu=b2(t),this.tu=new po(this.eu)}get nu(){return this.Ya}ru(t,s){const r=s?s.iu:new zx,o=s?s.tu:this.tu;let u=s?s.mutatedKeys:this.mutatedKeys,c=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((b,_)=>{const T=o.get(b),j=of(this.query,_)?_:null,k=!!T&&this.mutatedKeys.has(T.key),L=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let U=!1;T&&j?T.data.isEqual(j.data)?k!==L&&(r.track({type:3,doc:j}),U=!0):this.su(T,j)||(r.track({type:2,doc:j}),U=!0,(g&&this.eu(j,g)>0||y&&this.eu(j,y)<0)&&(d=!0)):!T&&j?(r.track({type:0,doc:j}),U=!0):T&&!j&&(r.track({type:1,doc:T}),U=!0,(g||y)&&(d=!0)),U&&(j?(c=c.add(j),u=L?u.add(b):u.delete(b)):(c=c.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:c,iu:r,Cs:d,mutatedKeys:u}}su(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((b,_)=>(function(j,k){const L=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:U})}};return L(j)-L(k)})(b.type,_.type)||this.eu(b.doc,_.doc))),this.ou(r),o=o??!1;const d=s&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,c.length!==0||y?{snapshot:new Eo(this.query,t.tu,u,c,t.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),t.modifiedDocuments.forEach((s=>{})),t.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ut(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const s=[];return t.forEach((r=>{this.Xa.has(r)||s.push(new J2(r))})),this.Xa.forEach((r=>{t.has(r)||s.push(new W2(r))})),s}cu(t){this.Ya=t.Qs,this.Xa=Ut();const s=this.ru(t.documents);return this.applyChanges(s,!0)}lu(){return Eo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sg="SyncEngine";class aR{constructor(t,s,r){this.query=t,this.targetId=s,this.view=r}}class oR{constructor(t){this.key=t,this.hu=!1}}class lR{constructor(t,s,r,o,u,c){this.localStore=t,this.remoteStore=s,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ha((d=>v2(d)),af),this.Iu=new Map,this.Eu=new Set,this.du=new fe(_t.comparator),this.Au=new Map,this.Ru=new hg,this.Vu={},this.mu=new Map,this.fu=To.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uR(n,t,s=!0){const r=rT(n);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await tT(r,t,s,!0),o}async function cR(n,t){const s=rT(n);await tT(s,t,!0,!1)}async function tT(n,t,s,r){const o=await DC(n.localStore,Bs(t)),u=o.targetId,c=n.sharedClientState.addLocalQueryTarget(u,s);let d;return r&&(d=await hR(n,t,u,c==="current",o.resumeToken)),n.isPrimaryClient&&s&&Y2(n.remoteStore,o),d}async function hR(n,t,s,r,o){n.pu=(_,T,j)=>(async function(L,U,G,W){let Q=U.view.ru(G);Q.Cs&&(Q=await kx(L.localStore,U.query,!1).then((({documents:D})=>U.view.ru(D,Q))));const at=W&&W.targetChanges.get(U.targetId),tt=W&&W.targetMismatches.get(U.targetId)!=null,Z=U.view.applyChanges(Q,L.isPrimaryClient,at,tt);return Gx(L,U.targetId,Z.au),Z.snapshot})(n,_,T,j);const u=await kx(n.localStore,t,!0),c=new rR(t,u.Qs),d=c.ru(u.documents),g=xu.createSynthesizedTargetChangeForCurrentChange(s,r&&n.onlineState!=="Offline",o),y=c.applyChanges(d,n.isPrimaryClient,g);Gx(n,s,y.au);const b=new aR(t,s,c);return n.Tu.set(t,b),n.Iu.has(s)?n.Iu.get(s).push(t):n.Iu.set(s,[t]),y.snapshot}async function fR(n,t,s){const r=Ct(n),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!af(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await bp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),s&&pg(r.remoteStore,o.targetId),Tp(r,o.targetId)})).catch(No)):(Tp(r,o.targetId),await bp(r.localStore,o.targetId,!0))}async function dR(n,t){const s=Ct(n),r=s.Tu.get(t),o=s.Iu.get(r.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),pg(s.remoteStore,r.targetId))}async function mR(n,t,s){const r=_R(n);try{const o=await(function(c,d){const g=Ct(c),y=oe.now(),b=d.reduce(((j,k)=>j.add(k.key)),Ut());let _,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let k=_i(),L=Ut();return g.Ns.getEntries(j,b).next((U=>{k=U,k.forEach(((G,W)=>{W.isValidDocument()||(L=L.add(G))}))})).next((()=>g.localDocuments.getOverlayedDocuments(j,k))).next((U=>{_=U;const G=[];for(const W of d){const Q=R4(W,_.get(W.key).overlayedDocument);Q!=null&&G.push(new br(W.key,Q,c2(Q.value.mapValue),Wn.exists(!0)))}return g.mutationQueue.addMutationBatch(j,y,G,d)})).next((U=>{T=U;const G=U.applyToLocalDocumentSet(_,L);return g.documentOverlayCache.saveOverlays(j,U.batchId,G)}))})).then((()=>({batchId:T.batchId,changes:_2(_)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,d,g){let y=c.Vu[c.currentUser.toKey()];y||(y=new fe(Lt)),y=y.insert(d,g),c.Vu[c.currentUser.toKey()]=y})(r,o.batchId,s),await Tu(r,o.changes),await df(r.remoteStore)}catch(o){const u=xg(o,"Failed to persist write");s.reject(u)}}async function eT(n,t){const s=Ct(n);try{const r=await NC(s.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=s.Au.get(u);c&&(Qt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Qt(c.hu,14607):o.removedDocuments.size>0&&(Qt(c.hu,42227),c.hu=!1))})),await Tu(s,r,t)}catch(r){await No(r)}}function Hx(n,t,s){const r=Ct(n);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const o=[];r.Tu.forEach(((u,c)=>{const d=c.view.va(t);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const g=Ct(c);g.onlineState=d;let y=!1;g.queries.forEach(((b,_)=>{for(const T of _.Sa)T.va(d)&&(y=!0)})),y&&Eg(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pR(n,t,s){const r=Ct(n);r.sharedClientState.updateQueryState(t,"rejected",s);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new fe(_t.comparator);c=c.insert(u,on.newNoDocument(u,At.min()));const d=Ut().add(u),g=new cf(At.min(),new Map,new fe(Lt),c,d);await eT(r,g),r.du=r.du.remove(u),r.Au.delete(t),Ag(r)}else await bp(r.localStore,t,!1).then((()=>Tp(r,t,s))).catch(No)}async function gR(n,t){const s=Ct(n),r=t.batch.batchId;try{const o=await AC(s.localStore,t);sT(s,r,null),nT(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await Tu(s,o)}catch(o){await No(o)}}async function yR(n,t,s){const r=Ct(n);try{const o=await(function(c,d){const g=Ct(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,d).next((_=>(Qt(_!==null,37113),b=_.keys(),g.mutationQueue.removeMutationBatch(y,_)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(r.localStore,t);sT(r,t,s),nT(r,t),r.sharedClientState.updateMutationState(t,"rejected",s),await Tu(r,o)}catch(o){await No(o)}}function nT(n,t){(n.mu.get(t)||[]).forEach((s=>{s.resolve()})),n.mu.delete(t)}function sT(n,t,s){const r=Ct(n);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(s?u.reject(s):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function Tp(n,t,s=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),s&&n.Pu.yu(r,s);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((r=>{n.Ru.containsKey(r)||iT(n,r)}))}function iT(n,t){n.Eu.delete(t.path.canonicalString());const s=n.du.get(t);s!==null&&(pg(n.remoteStore,s),n.du=n.du.remove(t),n.Au.delete(s),Ag(n))}function Gx(n,t,s){for(const r of s)r instanceof W2?(n.Ru.addReference(r.key,t),vR(n,r)):r instanceof J2?(dt(Sg,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||iT(n,r.key)):Et(19791,{wu:r})}function vR(n,t){const s=t.key,r=s.path.canonicalString();n.du.get(s)||n.Eu.has(r)||(dt(Sg,"New document in limbo: "+s),n.Eu.add(r),Ag(n))}function Ag(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const s=new _t(ie.fromString(t)),r=n.fu.next();n.Au.set(r,new oR(s)),n.du=n.du.insert(s,r),Y2(n.remoteStore,new rr(Bs(rf(s.path)),r,"TargetPurposeLimboResolution",ef.ce))}}async function Tu(n,t,s){const r=Ct(n),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,g)=>{c.push(r.pu(g,t,s).then((y=>{var b;if((y||s)&&r.isPrimaryClient){const _=y?!y.fromCache:(b=s==null?void 0:s.targetChanges.get(g.targetId))==null?void 0:b.current;r.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(y){o.push(y);const _=dg.As(g.targetId,y);u.push(_)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,y){const b=Ct(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>rt.forEach(y,(T=>rt.forEach(T.Es,(j=>b.persistence.referenceDelegate.addReference(_,T.targetId,j))).next((()=>rt.forEach(T.ds,(j=>b.persistence.referenceDelegate.removeReference(_,T.targetId,j)))))))))}catch(_){if(!Co(_))throw _;dt(mg,"Failed to update sequence numbers: "+_)}for(const _ of y){const T=_.targetId;if(!_.fromCache){const j=b.Ms.get(T),k=j.snapshotVersion,L=j.withLastLimboFreeSnapshotVersion(k);b.Ms=b.Ms.insert(T,L)}}})(r.localStore,u))}async function bR(n,t){const s=Ct(n);if(!s.currentUser.isEqual(t)){dt(Sg,"User change. New user:",t.toKey());const r=await F2(s.localStore,t);s.currentUser=t,(function(u,c){u.mu.forEach((d=>{d.forEach((g=>{g.reject(new ft(st.CANCELLED,c))}))})),u.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Tu(s,r.Ls)}}function xR(n,t){const s=Ct(n),r=s.Au.get(t);if(r&&r.hu)return Ut().add(r.key);{let o=Ut();const u=s.Iu.get(t);if(!u)return o;for(const c of u){const d=s.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function rT(n){const t=Ct(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=eT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pR.bind(null,t),t.Pu.H_=sR.bind(null,t.eventManager),t.Pu.yu=iR.bind(null,t.eventManager),t}function _R(n){const t=Ct(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yR.bind(null,t),t}class zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=hf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,s){return null}Mu(t,s){return null}vu(t){return SC(this.persistence,new TC,t.initialUser,this.serializer)}Cu(t){return new z2(fg.mi,this.serializer)}Du(t){return new VC}async terminate(){var t,s;(t=this.gcScheduler)==null||t.stop(),(s=this.indexBackfillerScheduler)==null||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zh.provider={build:()=>new zh};class TR extends zh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,s){Qt(this.persistence.referenceDelegate instanceof Uh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oC(r,t.asyncQueue,s)}Cu(t){const s=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new z2((r=>Uh.mi(r,s)),this.serializer)}}class Ep{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bR.bind(null,this.syncEngine),await tR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new nR})()}createDatastore(t){const s=hf(t.databaseInfo.databaseId),r=(function(u){return new PC(u)})(t.databaseInfo);return(function(u,c,d,g){return new zC(u,c,d,g)})(t.authCredentials,t.appCheckCredentials,r,s)}createRemoteStore(t){return(function(r,o,u,c,d){return new qC(r,o,u,c,d)})(this.localStore,this.datastore,t.asyncQueue,(s=>Hx(this.syncEngine,s,0)),(function(){return Lx.v()?new Lx:new MC})())}createSyncEngine(t,s){return(function(o,u,c,d,g,y,b){const _=new lR(o,u,c,d,g,y);return b&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){var t,s;await(async function(o){const u=Ct(o);dt(ua,"RemoteStore shutting down."),u.Ea.add(5),await _u(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(s=this.eventManager)==null||s.terminate()}}Ep.provider={build:()=>new Ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):xi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,s){setTimeout((()=>{this.muted||t(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="FirestoreClient";class ER{constructor(t,s,r,o,u){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=tg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{dt(gr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(dt(gr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const r=xg(s,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Lm(n,t){n.asyncQueue.verifyOperationInProgress(),dt(gr,"Initializing OfflineComponentProvider");const s=n.configuration;await t.initialize(s);let r=s.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await F2(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function Yx(n,t){n.asyncQueue.verifyOperationInProgress();const s=await wR(n);dt(gr,"Initializing OnlineComponentProvider"),await t.initialize(s,n.configuration),n.setCredentialChangeListener((r=>Bx(t.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>Bx(t.remoteStore,o))),n._onlineComponents=t}async function wR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){dt(gr,"Using user provided OfflineComponentProvider");try{await Lm(n,n._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!(function(o){return o.name==="FirebaseError"?o.code===st.FAILED_PRECONDITION||o.code===st.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;vo("Error using user provided cache. Falling back to memory cache: "+s),await Lm(n,new zh)}}else dt(gr,"Using default OfflineComponentProvider"),await Lm(n,new TR(void 0));return n._offlineComponents}async function aT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(dt(gr,"Using user provided OnlineComponentProvider"),await Yx(n,n._uninitializedComponentsProvider._online)):(dt(gr,"Using default OnlineComponentProvider"),await Yx(n,new Ep))),n._onlineComponents}function SR(n){return aT(n).then((t=>t.syncEngine))}async function Fh(n){const t=await aT(n),s=t.eventManager;return s.onListen=uR.bind(null,t.syncEngine),s.onUnlisten=fR.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=cR.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=dR.bind(null,t.syncEngine),s}function AR(n,t,s={}){const r=new vi;return n.asyncQueue.enqueueAndForget((async()=>(function(u,c,d,g,y){const b=new Ng({next:T=>{b.Nu(),c.enqueueAndForget((()=>Tg(u,_)));const j=T.docs.has(d);!j&&T.fromCache?y.reject(new ft(st.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&T.fromCache&&g&&g.source==="server"?y.reject(new ft(st.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new wg(rf(d.path),b,{includeMetadataChanges:!0,qa:!0});return _g(u,_)})(await Fh(n),n.asyncQueue,t,s,r))),r.promise}function NR(n,t,s={}){const r=new vi;return n.asyncQueue.enqueueAndForget((async()=>(function(u,c,d,g,y){const b=new Ng({next:T=>{b.Nu(),c.enqueueAndForget((()=>Tg(u,_))),T.fromCache&&g.source==="server"?y.reject(new ft(st.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new wg(d,b,{includeMetadataChanges:!0,qa:!0});return _g(u,_)})(await Fh(n),n.asyncQueue,t,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firestore.googleapis.com",Qx=!0;class Xx{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ft(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lT,this.ssl=Qx}else this.host=t.host,this.ssl=t.ssl??Qx;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=B2;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<rC)throw new ft(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oT(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ft(st.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ft(st.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ft(st.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class mf{constructor(t,s,r,o){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ft(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xx(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new MN;switch(r.type){case"firstParty":return new PN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ft(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Kx.get(s);r&&(dt("ComponentProvider","Removing Datastore"),Kx.delete(s),r.terminate())})(this),Promise.resolve()}}function CR(n,t,s,r={}){var y;n=En(n,mf);const o=Jh(t),u=n._getSettings(),c={...u,emulatorOptions:n._getEmulatorOptions()},d=`${t}:${s}`;o&&(j1(`https://${d}`),M1("Firestore",!0)),u.host!==lT&&u.host!==d&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:d,ssl:o,emulatorOptions:r};if(!Rh(g,c)&&(n._setSettings(g),r.mockUserToken)){let b,_;if(typeof r.mockUserToken=="string")b=r.mockUserToken,_=an.MOCK_USER;else{b=V1(r.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ft(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new an(T)}n._authCredentials=new IN(new W1(b,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new da(this.firestore,t,this._query)}}class ye{constructor(t,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ye(this.firestore,t,this._key)}toJSON(){return{type:ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,s,r){if(yu(s,ye._jsonSchema))return new ye(t,r||null,new _t(ie.fromString(s.referencePath)))}}ye._jsonSchemaVersion="firestore/documentReference/1.0",ye._jsonSchema={type:ke("string",ye._jsonSchemaVersion),referencePath:ke("string")};class cr extends da{constructor(t,s,r){super(t,s,rf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ye(this.firestore,null,new _t(t))}withConverter(t){return new cr(this.firestore,t,this._path)}}function Zs(n,t,...s){if(n=ms(n),J1("collection","path",t),n instanceof mf){const r=ie.fromString(t,...s);return lx(r),new cr(n,null,r)}{if(!(n instanceof ye||n instanceof cr))throw new ft(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ie.fromString(t,...s));return lx(r),new cr(n.firestore,null,r)}}function Sn(n,t,...s){if(n=ms(n),arguments.length===1&&(t=tg.newId()),J1("doc","path",t),n instanceof mf){const r=ie.fromString(t,...s);return ox(r),new ye(n,null,new _t(r))}{if(!(n instanceof ye||n instanceof cr))throw new ft(st.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ie.fromString(t,...s));return ox(r),new ye(n.firestore,n instanceof cr?n.converter:null,new _t(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="AsyncQueue";class Zx{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new H2(this,"async_queue_retry"),this._c=()=>{const r=Pm();r&&dt($x,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const s=Pm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const s=Pm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new vi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Co(t))throw t;dt($x,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const s=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,xi("INTERNAL UNHANDLED ERROR: ",Wx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(t,s,r){this.uc(),this.oc.indexOf(t)>-1&&(s=0);const o=bg.createAndSchedule(this,t,s,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Et(47125,{Pc:Wx(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const s of this.tc)if(s.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const s=this.tc.indexOf(t);this.tc.splice(s,1)}}function Wx(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(n){return(function(s,r){if(typeof s!="object"||s===null)return!1;const o=s;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(n,["next","error","complete"])}class Ti extends mf{constructor(t,s,r,o){super(t,s,r,o),this.type="firestore",this._queue=new Zx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Zx(t),this._firestoreClient=void 0,await t}}}function RR(n,t){const s=typeof n=="object"?n:F1(),r=typeof n=="string"?n:Vh,o=L1(s,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=R1("firestore");u&&CR(o,...u)}return o}function pf(n){if(n._terminated)throw new ft(st.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||DR(n),n._firestoreClient}function DR(n){var r,o,u;const t=n._freezeSettings(),s=(function(d,g,y,b){return new t4(d,g,y,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,oT(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new ER(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $n(nn.fromBase64String(t))}catch(s){throw new ft(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new $n(nn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(yu(t,$n._jsonSchema))return $n.fromBase64String(t.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:ke("string",$n._jsonSchemaVersion),bytes:ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new ft(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new ft(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new ft(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Lt(this._lat,t._lat)||Lt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fs._jsonSchemaVersion}}static fromJSON(t){if(yu(t,Fs._jsonSchema))return new Fs(t.latitude,t.longitude)}}Fs._jsonSchemaVersion="firestore/geoPoint/1.0",Fs._jsonSchema={type:ke("string",Fs._jsonSchemaVersion),latitude:ke("number"),longitude:ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t){this._values=(t||[]).map((s=>s))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(yu(t,qs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((s=>typeof s=="number")))return new qs(t.vectorValues);throw new ft(st.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qs._jsonSchemaVersion="firestore/vectorValue/1.0",qs._jsonSchema={type:ke("string",qs._jsonSchemaVersion),vectorValues:ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=/^__.*__$/;class VR{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return this.fieldMask!==null?new br(t,this.data,this.fieldMask,s,this.fieldTransforms):new bu(t,this.data,s,this.fieldTransforms)}}class uT{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return new br(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function cT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:n})}}class Rg{constructor(t,s,r,o,u,c){this.settings=t,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Rg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const s=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:s,fc:!1});return r.gc(t),r}yc(t){var o;const s=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:s,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return qh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((s=>t.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>t.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(cT(this.Ac)&&jR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class MR{constructor(t,s,r){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=r||hf(t)}Cc(t,s,r,o=!1){return new Rg({Ac:t,methodName:s,Dc:r,path:tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(n){const t=n._freezeSettings(),s=hf(n._databaseId);return new MR(n._databaseId,!!t.ignoreUndefinedProperties,s)}function hT(n,t,s,r,o,u={}){const c=n.Cc(u.merge||u.mergeFields?2:0,t,s,o);Dg("Data must be an object, but it was:",c,r);const d=fT(r,c);let g,y;if(u.merge)g=new kn(c.fieldMask),y=c.fieldTransforms;else if(u.mergeFields){const b=[];for(const _ of u.mergeFields){const T=wp(t,_,s);if(!c.contains(T))throw new ft(st.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);mT(b,T)||b.push(T)}g=new kn(b),y=c.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,y=c.fieldTransforms;return new VR(new _n(d),g,y)}class vf extends Cg{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof vf}}function IR(n,t,s,r){const o=n.Cc(1,t,s);Dg("Data must be an object, but it was:",o,r);const u=[],c=_n.empty();vr(r,((g,y)=>{const b=jg(t,g,s);y=ms(y);const _=o.yc(b);if(y instanceof vf)u.push(b);else{const T=Eu(y,_);T!=null&&(u.push(b),c.set(b,T))}}));const d=new kn(u);return new uT(c,d,o.fieldTransforms)}function kR(n,t,s,r,o,u){const c=n.Cc(1,t,s),d=[wp(t,r,s)],g=[o];if(u.length%2!=0)throw new ft(st.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)d.push(wp(t,u[T])),g.push(u[T+1]);const y=[],b=_n.empty();for(let T=d.length-1;T>=0;--T)if(!mT(y,d[T])){const j=d[T];let k=g[T];k=ms(k);const L=c.yc(j);if(k instanceof vf)y.push(j);else{const U=Eu(k,L);U!=null&&(y.push(j),b.set(j,U))}}const _=new kn(y);return new uT(b,_,c.fieldTransforms)}function OR(n,t,s,r=!1){return Eu(s,n.Cc(r?4:3,t))}function Eu(n,t){if(dT(n=ms(n)))return Dg("Unsupported field value:",t,n),fT(n,t);if(n instanceof Cg)return(function(r,o){if(!cT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const d of r){let g=Eu(d,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(n,t)}return(function(r,o){if((r=ms(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return E4(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=oe.fromDate(r);return{timestampValue:Lh(o.serializer,u)}}if(r instanceof oe){const u=new oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lh(o.serializer,u)}}if(r instanceof Fs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:M2(o.serializer,r._byteString)};if(r instanceof ye){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:cg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof qs)return(function(c,d){return{mapValue:{fields:{[l2]:{stringValue:u2},[Mh]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw d.Sc("VectorValues must only contain numeric values.");return ag(d.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${tf(r)}`)})(n,t)}function fT(n,t){const s={};return n2(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vr(n,((r,o)=>{const u=Eu(o,t.mc(r));u!=null&&(s[r]=u)})),{mapValue:{fields:s}}}function dT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof oe||n instanceof Fs||n instanceof $n||n instanceof ye||n instanceof Cg||n instanceof qs)}function Dg(n,t,s){if(!dT(s)||!t2(s)){const r=tf(s);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function wp(n,t,s){if((t=ms(t))instanceof gf)return t._internalPath;if(typeof t=="string")return jg(n,t);throw qh("Field path arguments must be of type string or ",n,!1,void 0,s)}const PR=new RegExp("[~\\*/\\[\\]]");function jg(n,t,s){if(t.search(PR)>=0)throw qh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,s);try{return new gf(...t.split("."))._internalPath}catch{throw qh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,s)}}function qh(n,t,s,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${t}() called with invalid data`;s&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new ft(st.INVALID_ARGUMENT,d+n+g)}function mT(n,t){return n.some((s=>s.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(t,s,r,o,u){this._firestore=t,this._userDataWriter=s,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new LR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const s=this._document.data.field(Vg("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class LR extends pT{data(){return super.data()}}function Vg(n,t){return typeof t=="string"?jg(n,t):t instanceof gf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ft(st.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mg{}class UR extends Mg{}function bf(n,t,...s){let r=[];t instanceof Mg&&r.push(t),r=r.concat(s),(function(u){const c=u.filter((g=>g instanceof Ig)).length,d=u.filter((g=>g instanceof xf)).length;if(c>1||c>0&&d>0)throw new ft(st.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)n=o._apply(n);return n}class xf extends UR{constructor(t,s,r){super(),this._field=t,this._op=s,this._value=r,this.type="where"}static _create(t,s,r){return new xf(t,s,r)}_apply(t){const s=this._parse(t);return vT(t._query,s),new da(t.firestore,t.converter,dp(t._query,s))}_parse(t){const s=yf(t.firestore);return(function(u,c,d,g,y,b,_){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ft(st.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){e_(_,b);const k=[];for(const L of _)k.push(t_(g,u,L));T={arrayValue:{values:k}}}else T=t_(g,u,_)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||e_(_,b),T=OR(d,c,_,b==="in"||b==="not-in");return Ie.create(y,b,T)})(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}function yT(n,t,s){const r=t,o=Vg("where",n);return xf._create(o,r,s)}class Ig extends Mg{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new Ig(t,s)}_parse(t){const s=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:ps.create(s,this._getOperator())}_apply(t){const s=this._parse(t);return s.getFilters().length===0?t:((function(o,u){let c=o;const d=u.getFlattenedFilters();for(const g of d)vT(c,g),c=dp(c,g)})(t._query,s),new da(t.firestore,t.converter,dp(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function t_(n,t,s){if(typeof(s=ms(s))=="string"){if(s==="")throw new ft(st.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y2(t)&&s.indexOf("/")!==-1)throw new ft(st.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=t.path.child(ie.fromString(s));if(!_t.isDocumentKey(r))throw new ft(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gx(n,new _t(r))}if(s instanceof ye)return gx(n,s._key);throw new ft(st.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tf(s)}.`)}function e_(n,t){if(!Array.isArray(n)||n.length===0)throw new ft(st.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function vT(n,t){const s=(function(o,u){for(const c of o)for(const d of c.getFlattenedFilters())if(u.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(s!==null)throw s===t.op?new ft(st.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ft(st.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}class BR{convertValue(t,s="none"){switch(mr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Te(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(dr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){const r={};return vr(t,((o,u)=>{r[o]=this.convertValue(u,s)})),r}convertVectorValue(t){var r,o,u;const s=(u=(o=(r=t.fields)==null?void 0:r[Mh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((c=>Te(c.doubleValue)));return new qs(s)}convertGeoPoint(t){return new Fs(Te(t.latitude),Te(t.longitude))}convertArray(t,s){return(t.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(t,s){switch(s){case"previous":const r=sf(t);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(ru(t));default:return null}}convertTimestamp(t){const s=fr(t);return new oe(s.seconds,s.nanos)}convertDocumentKey(t,s){const r=ie.fromString(t);Qt(U2(r),9688,{name:t});const o=new au(r.get(1),r.get(3)),u=new _t(r.popFirst(5));return o.isEqual(s)||xi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n,t,s){let r;return r=n?n.toFirestore(t):t,r}class Hl{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ia extends pT{constructor(t,s,r,o,u,c){super(t,s,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const r=this._document.data.field(Vg("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(st.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,s={};return s.type=ia._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}ia._jsonSchemaVersion="firestore/documentSnapshot/1.0",ia._jsonSchema={type:ke("string",ia._jsonSchemaVersion),bundleSource:ke("string","DocumentSnapshot"),bundleName:ke("string"),bundle:ke("string")};class _h extends ia{data(t={}){return super.data(t)}}class ra{constructor(t,s,r,o){this._firestore=t,this._userDataWriter=s,this._snapshot=o,this.metadata=new Hl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((s=>t.push(s))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach((r=>{t.call(s,new _h(this._firestore,this._userDataWriter,r.key,r,new Hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new ft(st.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const g=new _h(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Hl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>u||d.type!==3)).map((d=>{const g=new _h(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Hl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return d.type!==0&&(y=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),b=c.indexOf(d.doc.key)),{type:zR(d.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(st.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ra._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=tg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(s.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function zR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(n){n=En(n,ye);const t=En(n.firestore,Ti);return AR(pf(t),n._key).then((s=>ET(t,n,s)))}ra._jsonSchemaVersion="firestore/querySnapshot/1.0",ra._jsonSchema={type:ke("string",ra._jsonSchemaVersion),bundleSource:ke("string","QuerySnapshot"),bundleName:ke("string"),bundle:ke("string")};class kg extends BR{constructor(t){super(),this.firestore=t}convertBytes(t){return new $n(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new ye(this.firestore,null,s)}}function xT(n){n=En(n,da);const t=En(n.firestore,Ti),s=pf(t),r=new kg(t);return gT(n._query),NR(s,n._query).then((o=>new ra(t,r,n,o)))}function _T(n,t,s){n=En(n,ye);const r=En(n.firestore,Ti),o=bT(n.converter,t);return _f(r,[hT(yf(r),"setDoc",n._key,o,n.converter!==null,s).toMutation(n._key,Wn.none())])}function cu(n,t,s,...r){n=En(n,ye);const o=En(n.firestore,Ti),u=yf(o);let c;return c=typeof(t=ms(t))=="string"||t instanceof gf?kR(u,"updateDoc",n._key,t,s,r):IR(u,"updateDoc",n._key,t),_f(o,[c.toMutation(n._key,Wn.exists(!0))])}function TT(n){return _f(En(n.firestore,Ti),[new og(n._key,Wn.none())])}function wu(n,t){const s=En(n.firestore,Ti),r=Sn(n),o=bT(n.converter,t);return _f(s,[hT(yf(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,Wn.exists(!1))]).then((()=>r))}function Su(n,...t){var g,y,b;n=ms(n);let s={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||Jx(t[r])||(s=t[r++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Jx(t[r])){const _=t[r];t[r]=(g=_.next)==null?void 0:g.bind(_),t[r+1]=(y=_.error)==null?void 0:y.bind(_),t[r+2]=(b=_.complete)==null?void 0:b.bind(_)}let u,c,d;if(n instanceof ye)c=En(n.firestore,Ti),d=rf(n._key.path),u={next:_=>{t[r]&&t[r](ET(c,n,_))},error:t[r+1],complete:t[r+2]};else{const _=En(n,da);c=En(_.firestore,Ti),d=_._query;const T=new kg(c);u={next:j=>{t[r]&&t[r](new ra(c,T,_,j))},error:t[r+1],complete:t[r+2]},gT(n._query)}return(function(T,j,k,L){const U=new Ng(L),G=new wg(j,U,k);return T.asyncQueue.enqueueAndForget((async()=>_g(await Fh(T),G))),()=>{U.Nu(),T.asyncQueue.enqueueAndForget((async()=>Tg(await Fh(T),G)))}})(pf(c),d,o,u)}function _f(n,t){return(function(r,o){const u=new vi;return r.asyncQueue.enqueueAndForget((async()=>mR(await SR(r),o,u))),u.promise})(pf(n),t)}function ET(n,t,s){const r=s.docs.get(t._key),o=new kg(n);return new ia(n,o,t._key,r,new Hl(s.hasPendingWrites,s.fromCache),t.converter)}(function(t,s=!0){(function(o){Ao=o})(B1),nu(new yo("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),d=new Ti(new kN(r.getProvider("auth-internal")),new LN(c,r.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ft(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(y.options.projectId,b)})(c,o),c);return u={useFetchStreams:s,...u},d._setSettings(u),d}),"PUBLIC").setMultipleInstances(!0)),lr(sx,ix,t),lr(sx,ix,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="firebasestorage.googleapis.com",FR="storageBucket",qR=120*1e3,HR=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends ca{constructor(t,s,r=0){super(Um(t),`Firebase Storage: ${s} (${Um(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ws.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Um(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ks;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ks||(Ks={}));function Um(n){return"storage/"+n}function GR(){const n="An unknown error occurred, please check the error payload for server response.";return new Ws(Ks.UNKNOWN,n)}function YR(){return new Ws(Ks.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KR(){return new Ws(Ks.CANCELED,"User canceled the upload/download.")}function QR(n){return new Ws(Ks.INVALID_URL,"Invalid URL '"+n+"'.")}function XR(n){return new Ws(Ks.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function n_(n){return new Ws(Ks.INVALID_ARGUMENT,n)}function ST(){return new Ws(Ks.APP_DELETED,"The Firebase app was deleted.")}function $R(n){return new Ws(Ks.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t,s){this.bucket=t,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,s){let r;try{r=ds.makeFromUrl(t,s)}catch{return new ds(t,"")}if(r.path==="")return r;throw XR(t)}static makeFromUrl(t,s){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(at){at.path.charAt(at.path.length-1)==="/"&&(at.path_=at.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+o+c,"i"),g={bucket:1,path:3};function y(at){at.path_=decodeURIComponent(at.path)}const b="v[A-Za-z0-9_]+",_=s.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",j=new RegExp(`^https?://${_}/${b}/b/${o}/o${T}`,"i"),k={bucket:1,path:3},L=s===wT?"(?:storage.googleapis.com|storage.cloud.google.com)":s,U="([^?#]*)",G=new RegExp(`^https?://${L}/${o}/${U}`,"i"),Q=[{regex:d,indices:g,postModify:u},{regex:j,indices:k,postModify:y},{regex:G,indices:{bucket:1,path:2},postModify:y}];for(let at=0;at<Q.length;at++){const tt=Q[at],Z=tt.regex.exec(t);if(Z){const D=Z[tt.indices.bucket];let N=Z[tt.indices.path];N||(N=""),r=new ds(D,N),tt.postModify(r);break}}if(r==null)throw QR(t);return r}}class ZR{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(n,t,s){let r=1,o=null,u=null,c=!1,d=0;function g(){return d===2}let y=!1;function b(...U){y||(y=!0,t.apply(null,U))}function _(U){o=setTimeout(()=>{o=null,n(j,g())},U)}function T(){u&&clearTimeout(u)}function j(U,...G){if(y){T();return}if(U){T(),b.call(null,U,...G);return}if(g()||c){T(),b.call(null,U,...G);return}r<64&&(r*=2);let Q;d===1?(d=2,Q=0):Q=(r+Math.random())*1e3,_(Q)}let k=!1;function L(U){k||(k=!0,T(),!y&&(o!==null?(U||(d=2),clearTimeout(o),_(0)):U||(d=1)))}return _(0),u=setTimeout(()=>{c=!0,L(!0)},s),L}function JR(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(n){return n!==void 0}function s_(n,t,s,r){if(r<t)throw n_(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>s)throw n_(`Invalid value for '${n}'. Expected ${s} or less.`)}function eD(n){const t=encodeURIComponent;let s="?";for(const r in n)if(n.hasOwnProperty(r)){const o=t(r)+"="+t(n[r]);s=s+o+"&"}return s=s.slice(0,-1),s}var Gh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Gh||(Gh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(n,t){const s=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,u=t.indexOf(n)!==-1;return s||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(t,s,r,o,u,c,d,g,y,b,_,T=!0,j=!1){this.url_=t,this.method_=s,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=_,this.retry=T,this.isUsingEmulator=j,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,L)=>{this.resolve_=k,this.reject_=L,this.start_()})}start_(){const t=(r,o)=>{if(o){r(!1,new hh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const c=d=>{const g=d.loaded,y=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const d=u.getErrorCode()===Gh.NO_ERROR,g=u.getStatus();if(!d||nD(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Gh.ABORT;r(!1,new hh(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;r(!0,new hh(y,u))})},s=(r,o)=>{const u=this.resolve_,c=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());tD(g)?u(g):u()}catch(g){c(g)}else if(d!==null){const g=GR();g.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,g)):c(g)}else if(o.canceled){const g=this.appDelete_?ST():KR();c(g)}else{const g=YR();c(g)}};this.canceled_?s(!1,new hh(!1,null,!0)):this.backoffId_=WR(t,s,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&JR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hh{constructor(t,s,r){this.wasSuccessCode=t,this.connection=s,this.canceled=!!r}}function iD(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function rD(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function aD(n,t){t&&(n["X-Firebase-GMPID"]=t)}function oD(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function lD(n,t,s,r,o,u,c=!0,d=!1){const g=eD(n.urlParams),y=n.url+g,b=Object.assign({},n.headers);return aD(b,t),iD(b,s),rD(b,u),oD(b,r),new sD(y,n.method,b,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(n){if(n.length===0)return null;const t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function cD(n){const t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t,s){this._service=t,s instanceof ds?this._location=s:this._location=ds.makeFromUrl(s,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,s){return new Yh(t,s)}get root(){const t=new ds(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cD(this._location.path)}get storage(){return this._service}get parent(){const t=uD(this._location.path);if(t===null)return null;const s=new ds(this._location.bucket,t);return new Yh(this._service,s)}_throwIfRoot(t){if(this._location.path==="")throw $R(t)}}function i_(n,t){const s=t==null?void 0:t[FR];return s==null?null:ds.makeFromBucketSpec(s,n)}function hD(n,t,s,r={}){n.host=`${t}:${s}`;const o=Jh(t);o&&(j1(`https://${n.host}/b`),M1("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:u}=r;u&&(n._overrideAuthToken=typeof u=="string"?u:V1(u,n.app.options.projectId))}class fD{constructor(t,s,r,o,u,c=!1){this.app=t,this._authProvider=s,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=c,this._bucket=null,this._host=wT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qR,this._maxUploadRetryTime=HR,this._requests=new Set,o!=null?this._bucket=ds.makeFromBucketSpec(o,this._host):this._bucket=i_(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ds.makeFromBucketSpec(this._url,t):this._bucket=i_(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){s_("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){s_("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const s=await t.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(U1(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Yh(this,t)}_makeRequest(t,s,r,o,u=!0){if(this._deleted)return new ZR(ST());{const c=lD(t,this._appId,r,o,s,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,s){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,s,r,o).getPromise()}}const r_="@firebase/storage",a_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="storage";function dD(n=F1(),t){n=ms(n);const r=L1(n,AT).getImmediate({identifier:t}),o=R1("storage");return o&&mD(r,...o),r}function mD(n,t,s,r={}){hD(n,t,s,r)}function pD(n,{instanceIdentifier:t}){const s=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new fD(s,r,o,t,B1)}function gD(){nu(new yo(AT,pD,"PUBLIC").setMultipleInstances(!0)),lr(r_,a_,""),lr(r_,a_,"esm2020")}gD();var yD="firebase",vD="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(yD,vD,"app");const Gl={apiKey:"AIzaSyDMP1qs_egJbyS2rWiZihynlbA_HBbiMi0",authDomain:"manas-nidar-trip.firebaseapp.com",projectId:"manas-nidar-trip",storageBucket:"manas-nidar-trip.firebasestorage.app",messagingSenderId:"268881524512",appId:"1:268881524512:web:f66e24a451fb51b537c945",measurementId:"G-BVBR6CN7JG"},bD=()=>Gl.apiKey&&!Gl.apiKey.includes("YOUR_")&&Gl.projectId&&!Gl.projectId.includes("YOUR_"),NT=z1(Gl),de=RR(NT);dD(NT);const hu="trips",Og="expenses",Tf="settlements",Qs="ps_boards",Au="products",xD=async(n,t,s)=>{try{console.log(" Creating trip with:",{name:n,participants:t,hasAvatars:!!s});const r={name:n,participants:t,memberAvatars:s||{},createdAt:Date.now()};console.log(" Sending to Firestore:",r);const o=await wu(Zs(de,hu),r);return console.log(" Trip created with ID:",o.id),o.id}catch(r){throw console.error(" Create trip error details:",{code:r.code,message:r.message,stack:r.stack}),r}},_D=async(n,t,s,r)=>{try{const o=n.trim();if(!o)throw new Error("Custom ID is required");if(!/^[a-zA-Z0-9_-]+$/.test(o))throw new Error("ID can only contain letters, numbers, hyphens, and underscores");if((await Hh(Sn(de,hu,o))).exists())throw new Error("ID already exists. Choose a different one.");const c={name:t,participants:s,memberAvatars:r||{},createdAt:Date.now()};return await _T(Sn(de,hu,o),c),console.log(" Trip created with custom ID:",o),o}catch(o){throw console.error(" Create trip with custom ID error:",o),o}},TD=async(n,t,s,r)=>{try{const o=n.trim();if(!o)throw new Error("Custom ID is required");if(!/^[a-zA-Z0-9_-]+$/.test(o))throw new Error("ID can only contain letters, numbers, hyphens, and underscores");if((await Hh(Sn(de,Qs,o))).exists())throw new Error("ID already exists. Choose a different one.");const c={name:t,participants:s,memberAvatars:r||{},createdAt:Date.now()};return await _T(Sn(de,Qs,o),c),console.log(" PS board created with custom ID:",o),o}catch(o){throw console.error(" Create PS board with custom ID error:",o),o}},ED=async(n,t,s)=>{try{console.log(" Creating PS board with:",{name:n,participants:t,hasAvatars:!!s});const r={name:n,participants:t,memberAvatars:s||{},createdAt:Date.now()},o=await wu(Zs(de,Qs),r);return console.log(" PS board created with ID:",o.id),o.id}catch(r){throw console.error(" Create PS board error:",r),r}},wD=(n,t)=>Su(Sn(de,Qs,n),s=>{s.exists()?t({id:s.id,...s.data()}):t(null)},s=>{console.error("PS Board Subscribe Error:",s),t(null)}),SD=(n,t)=>Su(Sn(de,hu,n),s=>{s.exists()?t({id:s.id,...s.data()}):t(null)},s=>{console.error("Firestore Subscribe Error:",s),t(null)}),AD=(n,t)=>{const s=bf(Zs(de,Og),yT("tripId","==",n));return Su(s,r=>{const o=r.docs.map(u=>({id:u.id,...u.data()}));o.sort((u,c)=>c.createdAt-u.createdAt),t(o)},r=>{console.error("Firestore Expenses Subscribe Error:",r),t([])})},ND=async(n,t)=>{console.log(" Creating expense:",{tripId:n,...t});const s=await wu(Zs(de,Og),{...t,tripId:n,createdAt:Date.now()});return console.log(" Expense created with ID:",s.id),s},CD=async(n,t)=>{const s=Sn(de,Og,n);await cu(s,t),console.log(" Expense updated with ID:",n)},o_=async(n,t,s,r,o)=>(await wu(Zs(de,Tf),{tripId:n,from:t,to:s,amount:r,isPaid:!1,proofImageUrl:null,createdAt:Date.now()})).id,RD=async(n,t)=>{const s=Sn(de,Tf,n),r={isPaid:t,paidAt:t?Date.now():null};await cu(s,r)},DD=async n=>{const t=Sn(de,Tf,n);await TT(t)},l_=async(n,t,s)=>{try{console.log(" Updating members for trip/PS:",n);const r=Sn(de,hu,n);if((await Hh(r)).exists()){const d={participants:t};s&&(d.memberAvatars=s),await cu(r,d),console.log(" Trip members updated successfully");return}const u=Sn(de,Qs,n);if((await Hh(u)).exists()){const d={participants:t};s&&(d.memberAvatars=s),await cu(u,d),console.log(" PS board members updated successfully");return}throw new Error("Trip/PS board not found")}catch(r){throw console.error(" Update members error:",{code:r.code,message:r.message,stack:r.stack}),r}},jD=(n,t)=>{const s=bf(Zs(de,Tf),yT("tripId","==",n));return Su(s,r=>{const o=r.docs.map(u=>({id:u.id,...u.data()}));t(o)},r=>{console.error("Firestore Settlements Subscribe Error:",r),t([])})},VD=async(n,t)=>{console.log(" Creating product in PS board:",{psId:n,...t});const s={...t,tripId:n,createdAt:Date.now(),updatedAt:Date.now()},r=await wu(Zs(de,Qs,n,Au),s);return console.log(" Product created in PS board with ID:",r.id),r},MD=(n,t)=>{const s=bf(Zs(de,Qs,n,Au));return Su(s,r=>{const o=r.docs.map(u=>({id:u.id,...u.data()}));o.sort((u,c)=>u.serialNumber.localeCompare(c.serialNumber)),t(o)},r=>{console.error("PS board products subscribe error:",r),t([])})},Sp=async(n,t,s)=>{if(!s)throw new Error("PS Board ID required for product update");const r=Sn(de,Qs,s,Au,n);await cu(r,{...t,updatedAt:Date.now()}),console.log(" Product updated in PS board with ID:",n)},ID=async(n,t)=>{if(!t)throw new Error("PS Board ID required for product deletion");const s=Sn(de,Qs,t,Au,n);await TT(s),console.log(" Product deleted from PS board with ID:",n)},kD=async n=>(await xT(bf(Zs(de,Qs,n,Au)))).docs.map(s=>({id:s.id,...s.data()})),OD=async n=>{const t=await kD(n);let s=0;for(const o of t){const u=/PS-(\d+)/i.exec(o.serialNumber||"");if(u){const c=parseInt(u[1],10);isNaN(c)||(s=Math.max(s,c))}}const r=s+1;return`PS-${String(r).padStart(3,"0")}`},kt="/manas/",en=[{id:"manas",image:`${kt}pics/manas.png`},{id:"avatar1",image:`${kt}pics/Screenshot 2026-01-05 184222.png`},{id:"avatar2",image:`${kt}pics/Screenshot 2026-01-05 184242.png`},{id:"avatar3",image:`${kt}pics/Screenshot 2026-01-05 184251.png`},{id:"avatar4",image:`${kt}pics/Screenshot 2026-01-05 184317.png`},{id:"avatar5",image:`${kt}pics/Screenshot 2026-01-05 184328.png`},{id:"avatar6",image:`${kt}pics/Screenshot 2026-01-05 184347.png`},{id:"avatar7",image:`${kt}pics/Screenshot 2026-01-05 184406.png`},{id:"avatar8",image:`${kt}pics/Screenshot 2026-01-05 184426.png`},{id:"avatar9",image:`${kt}pics/Screenshot 2026-01-05 184453.png`},{id:"avatar10",image:`${kt}pics/Screenshot 2026-01-05 184505.png`},{id:"avatar11",image:`${kt}pics/Screenshot 2026-01-08 150317.png`},{id:"avatar12",image:`${kt}pics/Screenshot 2026-01-08 150327.png`},{id:"avatar13",image:`${kt}pics/Screenshot 2026-01-08 150341.png`},{id:"avatar14",image:`${kt}pics/Screenshot 2026-01-08 150350.png`},{id:"avatar15",image:`${kt}pics/Screenshot 2026-01-08 150401.png`},{id:"avatar16",image:`${kt}pics/Screenshot 2026-01-08 150421.png`},{id:"avatar17",image:`${kt}pics/Screenshot 2026-01-08 150432.png`},{id:"avatar18",image:`${kt}pics/Screenshot 2026-01-08 150443.png`},{id:"avatar19",image:`${kt}pics/Screenshot 2026-01-08 150503.png`},{id:"avatar20",image:`${kt}pics/Screenshot 2026-01-08 150513.png`},{id:"avatar21",image:`${kt}pics/Screenshot 2026-01-08 150524.png`},{id:"avatar22",image:`${kt}pics/Screenshot 2026-01-08 150533.png`},{id:"avatar23",image:`${kt}pics/Screenshot 2026-01-08 150554.png`},{id:"avatar24",image:`${kt}pics/Screenshot 2026-01-08 150604.png`},{id:"avatar25",image:`${kt}pics/Screenshot 2026-01-08 150625.png`},{id:"avatar26",image:`${kt}pics/Screenshot 2026-01-08 150647.png`},{id:"avatar27",image:`${kt}pics/Screenshot 2026-01-08 150703.png`},{id:"avatar28",image:`${kt}pics/Screenshot 2026-01-08 150711.png`},{id:"avatar29",image:`${kt}pics/Screenshot 2026-01-08 150725.png`},{id:"avatar30",image:`${kt}pics/Screenshot 2026-01-08 150735.png`},{id:"avatar31",image:`${kt}pics/Screenshot 2026-01-08 150745.png`},{id:"avatar32",image:`${kt}pics/Screenshot 2026-01-08 150804.png`},{id:"avatar33",image:`${kt}pics/Screenshot 2026-01-08 150834.png`},{id:"avatar34",image:`${kt}pics/Screenshot 2026-01-08 150845.png`},{id:"avatar35",image:`${kt}pics/Screenshot 2026-01-08 150855.png`},{id:"avatar36",image:`${kt}pics/Screenshot 2026-01-08 150908.png`}],Je=({className:n=""})=>p.jsx("i",{className:`fa fa-inr ${n}`}),PD=({onJoin:n})=>{const[t,s]=K.useState(""),[r,o]=K.useState(!1),u=async c=>{if(c.preventDefault(),!!t.trim()){o(!0);try{localStorage.setItem("trip_user_name",t.trim()),n(t.trim())}catch(d){console.error("Error joining:",d),alert("Error saving your name. Please try again.")}finally{o(!1)}}};return p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center p-6 z-50",children:p.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-md p-12 text-center border-4 border-[#f49221]",children:[p.jsx("div",{className:"w-24 h-24 bg-[#f49221] rounded-[2rem] flex items-center justify-center mx-auto mb-8 shadow-2xl shadow-[#f49221]/30 rotate-3",children:p.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),p.jsx("h1",{className:"text-4xl font-bold text-black mb-2 font-pt tracking-tighter uppercase",children:"Manas"}),p.jsx("p",{className:"text-gray-500 mb-10 font-medium",children:"Smart expense tracking for your crew."}),p.jsxs("form",{onSubmit:u,className:"space-y-8 text-left",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 ml-1",children:"Identify Yourself"}),p.jsx("input",{type:"text",required:!0,value:t,onChange:c=>s(c.target.value),placeholder:"Your Full Name",className:"w-full px-6 py-5 rounded-2xl border-2 border-gray-100 focus:outline-none focus:border-[#f49221] transition-all text-lg font-bold text-black"})]}),p.jsx("button",{type:"submit",disabled:r,className:"w-full bg-[#f49221] hover:bg-[#d97e1a] text-white font-bold py-5 rounded-2xl transition-all shadow-xl shadow-[#f49221]/30 disabled:opacity-50 uppercase tracking-widest",children:r?"Authenticating...":"Enter Dashboard"})]})]})})},LD=({onTripSelected:n,onBack:t})=>{const[s,r]=K.useState("selection"),[o,u]=K.useState(""),[c,d]=K.useState(["",""]),[g,y]=K.useState(""),[b,_]=K.useState({}),[T,j]=K.useState(null),[k,L]=K.useState(""),[U,G]=K.useState(!1),[W,Q]=K.useState(""),at=async()=>{try{console.log("Testing Firebase connection...");const Z=Zs(de,"trips"),D=await xT(Z);return console.log(" Firebase connected successfully. Found",D.size,"trips"),{success:!0,error:null}}catch(Z){console.error(" Firebase connection error:",Z);let D="Unknown error";return Z.code==="permission-denied"?D=" PERMISSION DENIED - Firebase security rules are NOT allowing access. Your rules may not have been saved properly.":Z.code==="unavailable"?D="Firebase service unavailable. Check your internet connection.":Z.message&&(D=Z.message),console.error("Detailed error:",Z),{success:!1,error:D}}},tt=async Z=>{Z.preventDefault();const D=c.filter(A=>A.trim()!=="");if(!o||D.length<2)return alert("Trip name and 2+ people needed.");Q(""),console.log("Creating trip with:",{tripName:o,participants:D});const N=await at();if(!N.success){Q(`Firebase Error: ${N.error}`);return}G(!0);const S=setTimeout(()=>{G(!1),Q("Connection timeout after 8 seconds. Firebase security rules may be blocking writes.")},8e3);try{console.log(" Starting trip creation...");const A=g.trim()?await _D(g.trim(),o,D,b):await xD(o,D,b);clearTimeout(S),console.log(" Trip created successfully with ID:",A),n(A)}catch(A){clearTimeout(S),G(!1),console.error(" Create trip error:",A);let V="Error creating trip: ";A.code==="permission-denied"?V+=" Permission denied. Firebase rules are STILL not set correctly. Please check Firebase Console Firestore Rules.":A.message?V+=A.message:V+="Unknown error. Check browser console (F12) for details.",Q(V)}};return s==="create"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"max-w-md mx-auto p-10 bg-white rounded-[2.5rem] shadow-2xl mt-12 border-4 border-black",children:[p.jsx("h2",{className:"text-3xl font-bold mb-8 text-black font-pt uppercase tracking-tight",children:"New Trip"}),W&&p.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-2 border-red-300 rounded-xl text-red-800 text-sm",children:[p.jsx("p",{className:"font-bold mb-2",children:" Error"}),p.jsx("p",{className:"text-xs leading-relaxed",children:W}),W.includes("security rules")&&p.jsxs("p",{className:"mt-3 text-xs",children:[p.jsx("strong",{children:"Fix:"})," Go to Firebase Console  Firestore Database  Rules and set:",p.jsx("br",{}),p.jsx("code",{className:"block mt-1 bg-red-100 p-2 rounded",children:"allow read, write: if true;"})]})]}),p.jsxs("form",{onSubmit:tt,className:"space-y-6",children:[p.jsx("input",{required:!0,className:"w-full px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none font-bold text-black placeholder-gray-400",placeholder:"Destination Name",value:o,onChange:Z=>u(Z.target.value)}),p.jsx("input",{className:"w-full px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none font-bold text-black placeholder-gray-400",placeholder:"Custom Trip ID (optional)",value:g,onChange:Z=>y(Z.target.value)}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Participants"}),c.map((Z,D)=>{var N;return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex gap-2 items-center",children:[Z.trim()&&b[Z]&&p.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full overflow-hidden border-2 border-[#f49221]",children:p.jsx("img",{src:((N=en.find(S=>S.id===b[Z]))==null?void 0:N.image)||"",alt:Z,className:"w-full h-full object-cover"})}),p.jsx("input",{required:!0,className:"flex-1 px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none text-black placeholder-gray-400 font-bold",placeholder:`Friend ${D+1}`,value:Z,onChange:S=>{const A=[...c];A[D]=S.target.value,d(A)}})]}),Z.trim()&&p.jsx("button",{type:"button",onClick:()=>j(Z),className:"ml-2 text-xs text-[#f49221] font-bold hover:underline",children:b[Z]?" Change Avatar":"+ Add Avatar (Optional)"})]},D)})]}),p.jsx("button",{type:"button",onClick:()=>d([...c,""]),className:"text-xs text-[#f49221] font-bold uppercase tracking-wider hover:underline ml-1",children:"+ Add Participant"}),p.jsxs("div",{className:"pt-8 flex flex-col gap-4",children:[p.jsx("button",{type:"submit",disabled:U,className:"w-full py-5 bg-[#f49221] text-white rounded-2xl font-bold shadow-xl shadow-[#f49221]/20 uppercase tracking-widest disabled:opacity-50",children:U?"Creating Trip...":"Launch Trip"}),p.jsx("button",{type:"button",onClick:()=>r("selection"),disabled:U,className:"w-full py-4 px-4 border-2 border-black rounded-2xl font-bold text-black uppercase tracking-widest text-xs disabled:opacity-50",children:"Back"})]})]})]}),T&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 border-2 border-[#f49221]",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h3",{className:"text-2xl font-bold text-black",children:"Choose Avatar"}),p.jsx("button",{onClick:()=>j(null),className:"text-gray-400 hover:text-gray-600",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:en.map(Z=>p.jsx("button",{type:"button",onClick:()=>{_({...b,[T]:Z.id}),j(null)},className:"w-full aspect-square rounded-2xl overflow-hidden hover:scale-110 transition-all border-2 border-transparent hover:border-[#f49221]",children:p.jsx("img",{src:Z.image,alt:"avatar",className:"w-full h-full object-cover"})},Z.id))}),p.jsx("button",{onClick:()=>j(null),className:"w-full py-3 bg-gray-100 text-black rounded-xl font-bold hover:bg-gray-200",children:"Cancel"})]})})]}):s==="join"?p.jsxs("div",{className:"max-w-md mx-auto p-10 bg-white rounded-[2.5rem] shadow-2xl mt-12 border-4 border-black text-center",children:[p.jsx("h2",{className:"text-3xl font-bold mb-8 text-black font-pt uppercase",children:"Join Trip"}),p.jsx("input",{className:"w-full px-6 py-5 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none mb-8 text-center font-mono text-xl text-black placeholder-gray-400",placeholder:"PASTE TRIP ID",value:k,onChange:Z=>L(Z.target.value)}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("button",{onClick:()=>k&&n(k),className:"w-full py-5 bg-black text-white rounded-2xl font-bold shadow-xl uppercase tracking-widest",children:"Connect"}),p.jsx("button",{onClick:()=>r("selection"),className:"w-full py-4 font-bold text-gray-400 uppercase tracking-widest text-xs",children:"Cancel"})]})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"max-w-md mx-auto mt-20 text-center p-12 bg-white rounded-[3.5rem] shadow-2xl border-2 border-gray-50",children:[p.jsx("div",{className:"w-28 h-28 bg-[#f49221] rounded-[2.5rem] flex items-center justify-center mx-auto mb-10 shadow-2xl shadow-[#f49221]/40 -rotate-3 border-4 border-white",children:p.jsx("svg",{className:"w-14 h-14 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),p.jsx("h1",{className:"text-5xl font-bold text-black mb-3 font-pt tracking-tighter uppercase",children:"Manas"}),p.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-[0.2em] text-[10px] mb-14",children:"Simplified Group Finance"}),p.jsxs("div",{className:"space-y-5",children:[p.jsx("button",{onClick:()=>r("create"),className:"w-full py-6 bg-[#f49221] text-white rounded-2xl font-bold hover:scale-[1.02] transition-all shadow-2xl shadow-[#f49221]/30 flex items-center justify-center gap-3 uppercase tracking-widest",children:"New Expedition"}),p.jsx("button",{onClick:()=>r("join"),className:"w-full py-6 bg-black text-white rounded-2xl font-bold hover:scale-[1.02] transition-all flex items-center justify-center gap-3 uppercase tracking-widest",children:"Connect to Trip"}),t&&p.jsx("button",{onClick:t,className:"w-full py-4 text-gray-400 hover:text-gray-600 rounded-2xl font-bold transition-all uppercase tracking-widest text-sm border-2 border-gray-200 hover:border-gray-300",children:" Back to Boards"})]})]}),T&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 border-2 border-[#f49221]",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h3",{className:"text-2xl font-bold text-black",children:"Choose Avatar"}),p.jsx("button",{onClick:()=>j(null),className:"text-gray-400 hover:text-gray-600",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:en.map(Z=>p.jsx("button",{type:"button",onClick:()=>{_({...b,[T]:Z.id}),j(null)},className:"w-full aspect-square rounded-2xl overflow-hidden hover:scale-110 transition-all border-2 border-transparent hover:border-[#f49221]",children:p.jsx("img",{src:Z.image,alt:"avatar",className:"w-full h-full object-cover"})},Z.id))}),p.jsx("button",{onClick:()=>j(null),className:"w-full py-3 bg-gray-100 text-black rounded-xl font-bold hover:bg-gray-200",children:"Cancel"})]})})]})},UD=({onSelect:n})=>p.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-6",children:p.jsxs("div",{className:"w-full max-w-3xl grid grid-cols-1 md:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl border-4 border-black p-10 text-center",children:[p.jsx("div",{className:"w-20 h-20 bg-[#f49221] rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-xl",children:p.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),p.jsx("h2",{className:"text-3xl font-bold text-black mb-2 font-pt uppercase tracking-tight",children:"Trip"}),p.jsx("p",{className:"text-gray-500 mb-8",children:"Track group expenses, balances and settlements."}),p.jsx("button",{onClick:()=>n("trip"),className:"w-full py-5 bg-black text-white rounded-2xl font-bold uppercase tracking-widest",children:"Go"})]}),p.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl border-4 border-[#f49221] p-10 text-center",children:[p.jsx("div",{className:"w-20 h-20 bg-[#f49221] rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-xl",children:p.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h18v4H3V3zm0 6h18v12H3V9zm4 3h5v6H7v-6z"})})}),p.jsx("h2",{className:"text-3xl font-bold text-black mb-2 font-pt uppercase tracking-tight",children:"Purchase Sheet"}),p.jsx("p",{className:"text-gray-500 mb-8",children:"Track product serials, orders and delivery status."}),p.jsx("button",{onClick:()=>n("ps"),className:"w-full py-5 bg-[#f49221] text-white rounded-2xl font-bold uppercase tracking-widest",children:"Go"})]})]})}),BD=({onPsSelected:n,onBack:t})=>{const[s,r]=K.useState("selection"),[o,u]=K.useState(""),[c,d]=K.useState(["",""]),[g,y]=K.useState({}),[b,_]=K.useState(""),[T,j]=K.useState(""),[k,L]=K.useState(!1),[U,G]=K.useState(""),[W,Q]=K.useState(null),at=async tt=>{tt.preventDefault();const Z=c.filter(D=>D.trim()!=="");if(!o||Z.length<1)return alert("PS name and at least 1 person needed.");try{L(!0),G(""),console.log(" Creating PS board with:",{psName:o,participants:Z,customId:b||"auto"});let D;b.trim()?D=await TD(b.trim(),o,Z,g):D=await ED(o,Z,g),console.log(" PS board created:",D),n(D)}catch(D){console.error(" PS board creation error:",D);const N=(D==null?void 0:D.code)||"",S=(D==null?void 0:D.message)||"Unknown error";N==="permission-denied"||S.includes("permission")?G(` Permission Denied

Firestore rules are blocking PS board creation.

 Fix: Go to Firebase Console  Firestore  Rules and add:

match /ps_boards/{psId} {
  allow read, write: if true;
}

Then click Publish.`):G(`Failed to create PS board:
${S}`)}finally{L(!1)}};return s==="create"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"max-w-md mx-auto p-10 bg-white rounded-[2.5rem] shadow-2xl mt-12 border-4 border-[#f49221]",children:[p.jsx("h2",{className:"text-3xl font-bold mb-8 text-black font-pt uppercase tracking-tight",children:"Create Purchase Sheet"}),U&&p.jsx("div",{className:"mb-6 p-4 bg-red-50 border-2 border-red-300 rounded-xl text-red-800 text-sm whitespace-pre-wrap",children:U}),p.jsxs("form",{onSubmit:at,className:"space-y-6",children:[p.jsx("input",{required:!0,className:"w-full px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none font-bold text-black placeholder-gray-400",placeholder:"PS Name (e.g., Sensors Order)",value:o,onChange:tt=>u(tt.target.value)}),p.jsx("input",{className:"w-full px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none font-bold text-black placeholder-gray-400",placeholder:"Custom PS ID (optional)",value:b,onChange:tt=>_(tt.target.value)}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"People"}),c.map((tt,Z)=>{var D;return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex gap-2 items-center",children:[tt.trim()&&g[tt]&&p.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full overflow-hidden border-2 border-[#f49221]",children:p.jsx("img",{src:((D=en.find(N=>N.id===g[tt]))==null?void 0:D.image)||"",alt:tt,className:"w-full h-full object-cover"})}),p.jsx("input",{required:!0,className:"flex-1 px-6 py-4 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none text-black placeholder-gray-400 font-bold",placeholder:`Person ${Z+1}`,value:tt,onChange:N=>{const S=[...c];S[Z]=N.target.value,d(S)}})]}),tt.trim()&&p.jsx("button",{type:"button",onClick:()=>Q(tt),className:"ml-2 text-xs text-[#f49221] font-bold hover:underline",children:g[tt]?" Change Avatar":"+ Add Avatar (Optional)"})]},Z)})]}),p.jsx("button",{type:"button",onClick:()=>d([...c,""]),className:"text-xs text-[#f49221] font-bold uppercase tracking-wider hover:underline ml-1",children:"+ Add Person"}),p.jsxs("div",{className:"pt-8 flex flex-col gap-4",children:[p.jsx("button",{type:"submit",disabled:k,className:"w-full py-5 bg-[#f49221] text-white rounded-2xl font-bold shadow-xl shadow-[#f49221]/20 uppercase tracking-widest disabled:opacity-50",children:k?"Creating PS...":"Create PS"}),p.jsx("button",{type:"button",onClick:()=>r("selection"),disabled:k,className:"w-full py-4 px-4 border-2 border-black rounded-2xl font-bold text-black uppercase tracking-widest text-xs disabled:opacity-50",children:"Back"})]})]})]}),W&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 border-2 border-[#f49221]",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h3",{className:"text-2xl font-bold text-black",children:"Choose Avatar"}),p.jsx("button",{onClick:()=>Q(null),className:"text-gray-400 hover:text-gray-600",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:en.map(tt=>p.jsx("button",{type:"button",onClick:()=>{y({...g,[W]:tt.id}),Q(null)},className:"w-full aspect-square rounded-2xl overflow-hidden hover:scale-110 transition-all border-2 border-transparent hover:border-[#f49221]",children:p.jsx("img",{src:tt.image,alt:"avatar",className:"w-full h-full object-cover"})},tt.id))}),p.jsx("button",{onClick:()=>Q(null),className:"w-full py-3 bg-gray-100 text-black rounded-xl font-bold hover:bg-gray-200",children:"Cancel"})]})})]}):s==="join"?p.jsxs("div",{className:"max-w-md mx-auto p-10 bg-white rounded-[2.5rem] shadow-2xl mt-12 border-4 border-[#f49221] text-center",children:[p.jsx("h2",{className:"text-3xl font-bold mb-8 text-black font-pt uppercase",children:"Access Purchase Sheet"}),p.jsx("input",{className:"w-full px-6 py-5 border-2 border-gray-100 rounded-2xl focus:border-[#f49221] outline-none mb-8 text-center font-mono text-xl text-black placeholder-gray-400",placeholder:"PASTE PS ID",value:T,onChange:tt=>j(tt.target.value)}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("button",{onClick:()=>T&&n(T),className:"w-full py-5 bg-black text-white rounded-2xl font-bold shadow-xl uppercase tracking-widest",children:"Open"}),p.jsx("button",{onClick:()=>r("selection"),className:"w-full py-4 font-bold text-gray-400 uppercase tracking-widest text-xs",children:"Cancel"})]})]}):p.jsxs("div",{className:"max-w-md mx-auto mt-20 text-center p-12 bg-white rounded-[3.5rem] shadow-2xl border-2 border-gray-50",children:[p.jsx("div",{className:"w-28 h-28 bg-[#f49221] rounded-[2.5rem] flex items-center justify-center mx-auto mb-10 shadow-2xl shadow-[#f49221]/40 -rotate-3 border-4 border-white",children:p.jsx("svg",{className:"w-14 h-14 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h18v4H3V3zm0 6h18v12H3V9zm4 3h5v6H7v-6z"})})}),p.jsx("h1",{className:"text-5xl font-bold text-black mb-3 font-pt tracking-tighter uppercase",children:"Purchase Sheet"}),p.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-[0.2em] text-[10px] mb-14",children:"Product Serial Tracking"}),p.jsxs("div",{className:"space-y-5",children:[p.jsx("button",{onClick:()=>r("create"),className:"w-full py-6 bg-[#f49221] text-white rounded-2xl font-bold hover:scale-[1.02] transition-all shadow-2xl shadow-[#f49221]/30 uppercase tracking-widest",children:"Create a PS"}),p.jsx("button",{onClick:()=>r("join"),className:"w-full py-6 bg-black text-white rounded-2xl font-bold hover:scale-[1.02] transition-all uppercase tracking-widest",children:"Access a PS"}),t&&p.jsx("button",{onClick:t,className:"w-full py-4 text-gray-400 hover:text-gray-600 rounded-2xl font-bold transition-all uppercase tracking-widest text-sm border-2 border-gray-200 hover:border-gray-300",children:" Back to Boards"})]})]})},zD=({tripId:n,participants:t,trip:s,onClose:r})=>{const o=(S,A="sm")=>{var lt;const V=A==="sm"?"w-5 h-5 text-[8px]":"w-6 h-6 text-[10px]",R=A==="sm"?"border":"border-2";if((lt=s==null?void 0:s.memberAvatars)!=null&&lt[S]){const vt=en.find(B=>B.id===s.memberAvatars[S]);if(vt)return p.jsx("img",{src:vt.image,alt:S,className:`${V} rounded-full object-cover ${R} border-white flex-shrink-0`,onError:B=>{B.currentTarget.style.display="none"}})}const M=S.split(" ").map(vt=>vt[0]).join("").toUpperCase().slice(0,2);return p.jsx("div",{className:`${V} rounded-full bg-[#f49221]/20 flex items-center justify-center font-bold text-[#f49221] flex-shrink-0`,children:M})},[u,c]=K.useState(""),[d,g]=K.useState(""),[y,b]=K.useState(""),[_,T]=K.useState([]),[j,k]=K.useState("fair"),[L,U]=K.useState({}),[G,W]=K.useState("UPI"),[Q,at]=K.useState(!1),tt=K.useMemo(()=>{if(j==="custom")return 0;const S=parseFloat(d);return isNaN(S)||_.length===0?0:S/_.length},[d,_,j]),Z=K.useMemo(()=>Object.values(L).reduce((S,A)=>S+(parseFloat(A)||0),0),[L]),D=K.useMemo(()=>{const S=parseFloat(d);return isNaN(S)||j!=="custom"?{valid:!0,message:""}:Math.abs(Z-S)>.01?{valid:!1,message:`Custom amounts (${Z.toFixed(2)}) don't match total (${S})`}:{valid:!0,message:" Custom amounts match total"}},[Z,d,j]),N=async S=>{if(S.preventDefault(),!u||!d||!y||_.length===0)return alert("Please fill all required fields.");const A=parseFloat(d);if(isNaN(A)||A<=0)return alert("Please enter a valid amount greater than 0.");if(j==="custom"&&!D.valid)return alert(D.message);at(!0);try{const V={title:u,amount:A,paidBy:y,splitBetween:_,perPersonAmount:tt,splitType:j,paymentMethod:G};j==="custom"&&(V.customSplits=Object.fromEntries(Object.entries(L).map(([R,M])=>[R,parseFloat(M)||0]))),await ND(n,V),r()}catch(V){console.error("Error creating expense:",V),alert("Failed to save transaction. Check your backend/permissions.")}finally{at(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:p.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-xl p-10 border-4 border-[#f49221]",children:[p.jsxs("div",{className:"flex justify-between items-center mb-10",children:[p.jsx("h2",{className:"text-3xl font-bold text-black font-pt uppercase tracking-tight",children:"Add Transaction"}),p.jsx("button",{onClick:r,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:p.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("form",{onSubmit:N,className:"space-y-8",children:[p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Expense Item"}),p.jsx("input",{type:"text",placeholder:"e.g. Flight Tickets",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:u,onChange:S=>c(S.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Amount ()"}),p.jsx("input",{type:"number",placeholder:"0.00",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:d,onChange:S=>g(S.target.value)})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Who Paid?"}),p.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:y,onChange:S=>b(S.target.value),children:[p.jsx("option",{value:"",children:"Select Member"}),t.map(S=>p.jsx("option",{value:S,children:S},S))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Payment Channel"}),p.jsx("div",{className:"flex bg-gray-100 p-1.5 rounded-2xl",children:["UPI","Cash"].map(S=>p.jsx("button",{type:"button",onClick:()=>W(S),className:`flex-1 py-3 text-xs rounded-xl font-bold transition-all uppercase tracking-widest ${G===S?"bg-white shadow-xl text-[#f49221]":"text-gray-400"}`,children:S},S))})]})]}),p.jsx("div",{children:p.jsxs("div",{className:"flex justify-between items-center mb-3",children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Split Type"}),p.jsxs("div",{className:"flex bg-gray-100 p-1.5 rounded-xl",children:[p.jsx("button",{type:"button",onClick:()=>k("fair"),className:`px-4 py-2 text-[10px] rounded-lg font-bold transition-all uppercase tracking-widest ${j==="fair"?"bg-white shadow-lg text-[#f49221]":"text-gray-400"}`,children:"Fair Split"}),p.jsx("button",{type:"button",onClick:()=>k("custom"),className:`px-4 py-2 text-[10px] rounded-lg font-bold transition-all uppercase tracking-widest ${j==="custom"?"bg-white shadow-lg text-[#f49221]":"text-gray-400"}`,children:"Custom Split"})]})]})}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-end mb-3 ml-1",children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Distributed Among"}),p.jsx("button",{type:"button",onClick:()=>T([...t]),className:"text-[10px] font-bold text-[#f49221] uppercase tracking-widest",children:"Select Everyone"})]}),p.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-40 overflow-y-auto pr-2 custom-scrollbar",children:t.map(S=>p.jsxs("label",{className:`flex items-center gap-2 p-4 rounded-2xl border-2 cursor-pointer transition-all ${_.includes(S)?"bg-[#f49221]/10 border-[#f49221]":"bg-white border-gray-100"}`,children:[p.jsx("input",{type:"checkbox",className:"hidden",checked:_.includes(S),onChange:()=>T(A=>A.includes(S)?A.filter(V=>V!==S):[...A,S])}),o(S,"sm"),p.jsx("span",{className:`text-xs font-black uppercase tracking-tight ${_.includes(S)?"text-black":"text-gray-400"}`,children:S})]},S))})]}),j==="custom"&&_.length>0&&p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3 block ml-1",children:"Custom Amounts Per Person"}),p.jsx("div",{className:"space-y-3 max-h-52 overflow-y-auto pr-2",children:_.map(S=>p.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 p-4 rounded-xl",children:[o(S,"md"),p.jsx("span",{className:"text-sm font-bold text-black flex-1",children:S}),p.jsxs("div",{className:"relative",children:[p.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:p.jsx(Je,{})}),p.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",className:"w-28 pl-8 pr-3 py-2 rounded-lg border-2 border-gray-200 focus:border-[#f49221] outline-none font-bold text-sm text-black",value:L[S]||"",onChange:A=>U({...L,[S]:A.target.value})})]})]},S))}),p.jsx("div",{className:`mt-3 p-3 rounded-xl text-xs font-bold ${D.valid?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:D.message||`Total: ${Z.toFixed(2)} / ${d||"0"}`})]}),p.jsx("button",{type:"submit",disabled:Q,className:"w-full bg-[#f49221] text-white font-bold py-6 rounded-2xl shadow-2xl shadow-[#f49221]/40 transition-all uppercase tracking-[0.2em] disabled:opacity-50 text-sm",children:Q?"Processing...":"Secure Transaction"})]})]})})},FD=({expense:n,participants:t,trip:s,onClose:r,onUpdate:o})=>{const[u,c]=K.useState(n.title),[d,g]=K.useState(n.amount.toString()),[y,b]=K.useState(n.paidBy),[_,T]=K.useState(n.splitBetween),[j,k]=K.useState(n.splitType||"fair"),[L,U]=K.useState(n.customSplits?Object.fromEntries(Object.entries(n.customSplits).map(([S,A])=>[S,A.toString()])):{}),[G,W]=K.useState(n.paymentMethod),[Q,at]=K.useState(!1),tt=(S,A="sm")=>{var lt;const V=A==="sm"?"w-5 h-5 text-[8px]":"w-6 h-6 text-[10px]",R=A==="sm"?"border":"border-2";if((lt=s==null?void 0:s.memberAvatars)!=null&&lt[S]){const vt=en.find(B=>B.id===s.memberAvatars[S]);if(vt)return p.jsx("img",{src:vt.image,alt:S,className:`${V} rounded-full object-cover ${R} border-white flex-shrink-0`,onError:B=>{B.currentTarget.style.display="none"}})}const M=S.split(" ").map(vt=>vt[0]).join("").toUpperCase().slice(0,2);return p.jsx("div",{className:`${V} rounded-full bg-[#f49221]/20 flex items-center justify-center font-bold text-[#f49221] flex-shrink-0`,children:M})},Z=j==="custom"?0:parseFloat(d)/_.length||0,D=(S,A)=>{T(A?[..._,S]:_.filter(V=>V!==S))},N=async S=>{if(S.preventDefault(),!u||!d||!y||_.length===0)return alert("Please fill all required fields.");at(!0);try{const A=parseFloat(d),V={title:u,amount:A,paidBy:y,splitBetween:_,perPersonAmount:Z,splitType:j,paymentMethod:G};j==="custom"&&(V.customSplits=Object.fromEntries(Object.entries(L).map(([R,M])=>[R,parseFloat(M)||0]))),await CD(n.id,V),o(),r()}catch(A){console.error("Error updating expense:",A),alert("Failed to update expense.")}finally{at(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:p.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-xl p-10 border-4 border-[#f49221]",children:[p.jsxs("div",{className:"flex justify-between items-center mb-10",children:[p.jsx("h2",{className:"text-3xl font-bold text-black font-pt uppercase tracking-tight",children:"Edit Expense"}),p.jsx("button",{onClick:r,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:p.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("form",{onSubmit:N,className:"space-y-8",children:[p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Expense Item"}),p.jsx("input",{type:"text",placeholder:"e.g. Flight Tickets",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:u,onChange:S=>c(S.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Amount ()"}),p.jsx("input",{type:"number",placeholder:"0.00",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:d,onChange:S=>g(S.target.value)})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Who Paid?"}),p.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:y,onChange:S=>b(S.target.value),children:[p.jsx("option",{value:"",children:"Select Member"}),t.map(S=>p.jsx("option",{value:S,children:S},S))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Payment Channel"}),p.jsx("div",{className:"flex bg-gray-100 p-1.5 rounded-2xl",children:["UPI","Cash"].map(S=>p.jsx("button",{type:"button",onClick:()=>W(S),className:`flex-1 py-3 text-xs rounded-xl font-bold transition-all uppercase tracking-widest ${G===S?"bg-white shadow-xl text-[#f49221]":"text-gray-400"}`,children:S},S))})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3 block ml-1",children:"Split Between:"}),p.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.map(S=>p.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-all",children:[p.jsx("input",{type:"checkbox",checked:_.includes(S),onChange:A=>D(S,A.target.checked),className:"w-5 h-5 rounded accent-[#f49221]"}),p.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[tt(S,"sm"),p.jsx("span",{className:"font-bold text-black",children:S})]})]},S))})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{type:"submit",disabled:Q,className:"flex-1 bg-gradient-to-r from-[#f49221] to-[#e58515] hover:shadow-lg hover:shadow-[#f49221]/50 text-white py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all disabled:opacity-50",children:Q?"Updating...":"Update Expense"}),p.jsx("button",{type:"button",onClick:r,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-black py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all",children:"Cancel"})]})]})]})})},qD=({expenses:n,trip:t,participants:s=[]})=>{const[r,o]=K.useState(null),[u,c]=K.useState(null),d=g=>{var _;const y=(_=t==null?void 0:t.memberAvatars)==null?void 0:_[g],b=en.find(T=>T.id===y);return b!=null&&b.image?p.jsx("img",{src:b.image,alt:g,className:"w-6 h-6 rounded-full object-cover"}):p.jsx("div",{className:"w-6 h-6 bg-[#f49221]/30 rounded-full flex items-center justify-center text-[#f49221] font-bold text-xs",children:g[0]})};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"backdrop-blur-xl bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-3xl overflow-hidden shadow-2xl shadow-[#f49221]/10",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left text-sm",children:[p.jsx("thead",{className:"bg-gradient-to-r from-[#f49221] to-[#e58515] text-white backdrop-blur-xl",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Description"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Value"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Paid By"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Split"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Proof"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Action"})]})}),p.jsx("tbody",{className:"divide-y divide-white/5",children:n.map(g=>p.jsxs("tr",{className:"hover:bg-white/10 transition-all border-l-4 border-transparent hover:border-[#f49221] backdrop-blur-sm group",children:[p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Proof"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Action"}),p.jsxs("td",{className:"px-6 py-5",children:[p.jsx("div",{className:"font-bold text-white text-base",children:g.title}),p.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(g.createdAt).toLocaleDateString()})]}),p.jsxs("td",{className:"px-6 py-5 font-bold text-lg text-white",children:[p.jsx(Je,{className:"mr-1"}),g.amount.toFixed(2)]}),p.jsx("td",{className:"px-6 py-5",children:p.jsxs("div",{className:"flex items-center gap-2",children:[d(g.paidBy),p.jsxs("div",{children:[p.jsx("div",{className:"text-gray-300 font-medium",children:g.paidBy}),p.jsxs("div",{className:"text-xs text-gray-600",children:["(",g.paymentMethod,")"]})]})]})}),p.jsxs("td",{className:"px-6 py-5",children:[p.jsxs("div",{className:"text-gray-300 font-medium text-sm",children:[g.splitBetween.length," person",g.splitBetween.length!==1?"s":""]}),g.splitType==="custom"?p.jsx("div",{className:"text-xs text-purple-400 font-bold mt-1",children:"CUSTOM SPLIT"}):p.jsxs("div",{className:"text-xs text-[#f49221] font-bold mt-1",children:[p.jsx(Je,{}),g.perPersonAmount.toFixed(2)," each"]})]}),p.jsx("td",{className:"px-6 py-5",children:g.proofImageUrl?p.jsx("button",{onClick:()=>o(g.proofImageUrl),className:"bg-[#f49221] hover:bg-[#e58515] text-white px-4 py-2 rounded-lg text-xs font-medium transition-colors",children:"View"}):p.jsx("span",{className:"text-gray-600 text-xs",children:"No proof"})}),p.jsx("td",{className:"px-6 py-5",children:p.jsx("button",{onClick:()=>c(g),className:"bg-[#f49221] hover:bg-[#e58515] text-white px-4 py-2 rounded-lg text-xs font-medium transition-colors",children:"Edit"})})]},g.id))})]})})}),r&&p.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-6 z-[60] backdrop-blur-xl",onClick:()=>o(null),children:p.jsxs("div",{className:"relative max-w-4xl w-full flex flex-col items-center",children:[p.jsx("button",{className:"absolute -top-16 right-0 text-white hover:text-[#f49221] transition-colors p-4",children:p.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),p.jsx("img",{src:r,alt:"Payment Proof",className:"max-h-[80vh] object-contain rounded-3xl shadow-[0_0_100px_rgba(244,146,33,0.3)] border-4 border-white"})]})}),u&&p.jsx(FD,{expense:u,participants:s,trip:t,onClose:()=>c(null),onUpdate:()=>{c(null)}})]})},HD=({tripId:n,participants:t,trip:s,onClose:r})=>{const[o,u]=K.useState(""),[c,d]=K.useState(""),[g,y]=K.useState("1"),[b,_]=K.useState(""),[T,j]=K.useState(""),[k,L]=K.useState(""),[U,G]=K.useState("Pending"),[W,Q]=K.useState(""),[at,tt]=K.useState(""),[Z,D]=K.useState(""),[N,S]=K.useState(!1),A=["PR Sent","Ordered","Delivered","Out of Stock","Pending"],V=["MECH","AI","SNA","MGMT"];K.useEffect(()=>{(async()=>{try{const lt=await OD(n);u(lt)}catch(lt){console.warn("Unable to fetch next serial, defaulting to PS-001",lt),u("PS-001")}})()},[n]),K.useEffect(()=>{const lt=parseInt(g)||1,vt=parseFloat(W);!isNaN(vt)&&lt>0?tt((vt*lt).toFixed(2)):W||tt("")},[W,g]);const R=(lt,vt="sm")=>{var wt;const B=vt==="sm"?"w-5 h-5 text-[8px]":"w-6 h-6 text-[10px]",ot=vt==="sm"?"border":"border-2";if((wt=s==null?void 0:s.memberAvatars)!=null&&wt[lt]){const bt=en.find(O=>O.id===s.memberAvatars[lt]);if(bt)return p.jsx("img",{src:bt.image,alt:lt,className:`${B} rounded-full object-cover ${ot} border-white flex-shrink-0`,onError:O=>{O.currentTarget.style.display="none"}})}const ct=lt.split(" ").map(bt=>bt[0]).join("").toUpperCase().slice(0,2);return p.jsx("div",{className:`${B} rounded-full bg-[#f49221]/20 flex items-center justify-center font-bold text-[#f49221] flex-shrink-0`,children:ct})},M=async lt=>{if(lt.preventDefault(),!o||!c||!k)return alert("Please fill Item Name and Added By.");S(!0);try{const vt={serialNumber:o,itemName:c,quantity:parseInt(g)||1,addedBy:k,status:U};b&&b.trim()&&(vt.link=b.trim()),T&&T.trim()&&(vt.subsystem=T.trim()),Z&&Z.trim()&&(vt.comments=Z.trim()),W&&(vt.pricePerUnit=parseFloat(W)),at&&(vt.totalPrice=parseFloat(at)),console.log(" Submitting product to PS board:",n,vt),await VD(n,vt),console.log(" Product created successfully"),r()}catch(vt){console.error(" Error creating product:",vt);const B=(vt==null?void 0:vt.message)||(vt==null?void 0:vt.code)||"Unknown error";alert(`Failed to add product to PS board.

Error: ${B}

Make sure your Firestore rules allow:
 Write access to ps_boards/${n}/products

Rule example:
match /ps_boards/{psId}/products/{productId} {
  allow read, write: if true;
}`)}finally{S(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:p.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-2xl p-10 border-4 border-[#f49221]",children:[p.jsxs("div",{className:"flex justify-between items-center mb-10",children:[p.jsx("h2",{className:"text-3xl font-bold text-black font-pt uppercase tracking-tight",children:"Add Product"}),p.jsx("button",{onClick:r,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:p.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("form",{onSubmit:M,className:"space-y-8",children:[p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Serial Number (PS)"}),p.jsx("input",{type:"text",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black bg-gray-50",value:o,readOnly:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Item Name"}),p.jsx("input",{type:"text",placeholder:"e.g. Heat Gun",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:c,onChange:lt=>d(lt.target.value)})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Quantity"}),p.jsx("input",{type:"number",min:"1",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:g,onChange:lt=>y(lt.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Status"}),p.jsx("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:U,onChange:lt=>G(lt.target.value),children:A.map(lt=>p.jsx("option",{value:lt,children:lt},lt))})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Added By"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black appearance-none",value:k,onChange:lt=>L(lt.target.value),children:[p.jsx("option",{value:"",children:"Select Person"}),t.map(lt=>p.jsx("option",{value:lt,children:lt},lt))]}),k&&p.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:R(k,"sm")})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Subsystem"}),p.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:T,onChange:lt=>j(lt.target.value),children:[p.jsx("option",{value:"",children:"Select subsystem"}),V.map(lt=>p.jsx("option",{value:lt,children:lt},lt))]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Price Per Unit ()"}),p.jsx("input",{type:"number",step:"0.01",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:W,onChange:lt=>Q(lt.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Total Price ()"}),p.jsx("input",{type:"number",step:"0.01",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black bg-gray-50",value:at,readOnly:!0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Product Link"}),p.jsx("input",{type:"url",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:b,onChange:lt=>_(lt.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Comments"}),p.jsx("textarea",{rows:3,className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:Z,onChange:lt=>D(lt.target.value)})]}),p.jsx("button",{type:"submit",disabled:N,className:"w-full bg-gradient-to-r from-[#f49221] to-[#e58515] hover:shadow-lg hover:shadow-[#f49221]/50 text-white py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Adding...":"Add Product"})]})]})})},GD=({product:n,trip:t,onClose:s,onUpdate:r})=>{var S,A;const[o,u]=K.useState(n.itemName),[c,d]=K.useState(n.quantity.toString()),[g,y]=K.useState(n.link||""),[b,_]=K.useState(n.subsystem||""),[T,j]=K.useState(n.status),[k,L]=K.useState(((S=n.pricePerUnit)==null?void 0:S.toString())||""),[U,G]=K.useState(((A=n.totalPrice)==null?void 0:A.toString())||""),[W,Q]=K.useState(n.comments||""),[at,tt]=K.useState(!1),Z=["PR Sent","Ordered","Delivered","Out of Stock","Pending"],D=["MECH","AI","SNA","MGMT"];K.useEffect(()=>{const V=parseInt(c)||1,R=parseFloat(k);!isNaN(R)&&V>0&&G((R*V).toFixed(2))},[k,c]);const N=async V=>{V.preventDefault(),tt(!0);try{const R={itemName:o,quantity:parseInt(c)||1,status:T};g&&g.trim()&&(R.link=g.trim()),b&&b.trim()&&(R.subsystem=b.trim()),W&&W.trim()&&(R.comments=W.trim()),k&&(R.pricePerUnit=parseFloat(k)),U&&(R.totalPrice=parseFloat(U)),await Sp(n.id,R,t==null?void 0:t.id),r(),s()}catch(R){console.error("Error updating product:",R),alert("Failed to update product.")}finally{tt(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:p.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-2xl p-10 border-4 border-[#f49221]",children:[p.jsxs("div",{className:"flex justify-between items-center mb-10",children:[p.jsx("h2",{className:"text-3xl font-bold text-black font-pt uppercase tracking-tight",children:"Edit Product"}),p.jsx("button",{onClick:s,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:p.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("form",{onSubmit:N,className:"space-y-8",children:[p.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 border-2 border-gray-200",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2 block",children:"Serial Number (PS)"}),p.jsx("div",{className:"text-lg font-bold text-[#f49221]",children:n.serialNumber})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2 block",children:"Added By"}),p.jsx("div",{className:"text-lg font-bold text-black",children:n.addedBy})]})]}),p.jsxs("div",{className:"text-xs text-gray-500 mt-4",children:["Created: ",new Date(n.createdAt).toLocaleString()]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Item Name"}),p.jsx("input",{type:"text",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:o,onChange:V=>u(V.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Quantity"}),p.jsx("input",{type:"number",min:"1",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:c,onChange:V=>d(V.target.value)})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Status"}),p.jsx("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:T,onChange:V=>j(V.target.value),children:Z.map(V=>p.jsx("option",{value:V,children:V},V))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Subsystem"}),p.jsxs("select",{className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none bg-white font-bold text-black",value:b,onChange:V=>_(V.target.value),children:[p.jsx("option",{value:"",children:"Select subsystem"}),D.map(V=>p.jsx("option",{value:V,children:V},V))]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Price Per Unit ()"}),p.jsx("input",{type:"number",step:"0.01",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:k,onChange:V=>L(V.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Total Price ()"}),p.jsx("input",{type:"number",step:"0.01",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black bg-gray-50",value:U,readOnly:!0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Product Link"}),p.jsx("input",{type:"url",placeholder:"https://example.com/product",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:g,onChange:V=>y(V.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Comments"}),p.jsx("textarea",{placeholder:"Add any notes or comments...",rows:3,className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:W,onChange:V=>Q(V.target.value)})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{type:"submit",disabled:at,className:"flex-1 bg-gradient-to-r from-[#f49221] to-[#e58515] hover:shadow-lg hover:shadow-[#f49221]/50 text-white py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:at?"Updating...":"Update Product"}),p.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-black py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all",children:"Cancel"})]})]})]})})},YD=({products:n,trip:t})=>{const[s,r]=K.useState(null),[o,u]=K.useState("PR Sent"),[c,d]=K.useState(!1),[g,y]=K.useState(null),[b,_]=K.useState("All"),[T,j]=K.useState(null),[k,L]=K.useState(null),[U,G]=K.useState(""),W=["PR Sent","Ordered","Delivered","Out of Stock","Pending"],Q=["All","MECH","AI","SNA","MGMT"],at=b==="All"?n:n.filter(A=>{var V;return((V=A.subsystem)==null?void 0:V.toLowerCase())===b.toLowerCase()}),tt=A=>{const V={"PR Sent":"bg-blue-500/20 text-blue-400 border-blue-500",Ordered:"bg-purple-500/20 text-purple-400 border-purple-500",Delivered:"bg-green-500/20 text-green-400 border-green-500","Out of Stock":"bg-red-500/20 text-red-400 border-red-500",Pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500"};return V[A]||V.Pending},Z=A=>{var M;const V=(M=t==null?void 0:t.memberAvatars)==null?void 0:M[A],R=en.find(lt=>lt.id===V);return R!=null&&R.image?p.jsx("img",{src:R.image,alt:A,className:"w-7 h-7 rounded-full object-cover border border-white"}):p.jsx("div",{className:"w-7 h-7 bg-[#f49221]/30 rounded-full flex items-center justify-center text-[#f49221] font-bold text-xs border border-[#f49221]",children:A[0]})},D=async(A,V)=>{d(!0);try{await Sp(A,{status:V},t==null?void 0:t.id),r(null)}catch(R){console.error("Error updating product:",R),alert("Failed to update product status.")}finally{d(!1)}},N=async A=>{if(confirm("Are you sure you want to delete this product?")){d(!0);try{await ID(A,t==null?void 0:t.id)}catch(V){console.error("Error deleting product:",V),alert("Failed to delete product.")}finally{d(!1)}}},S=async()=>{if(!(!k||!U)){d(!0);try{const A=new Date(U).getTime();await Sp(k.id,{deliveryDate:A},t==null?void 0:t.id),L(null),G("")}catch(A){console.error("Error setting delivery date:",A),alert("Failed to set delivery date.")}finally{d(!1)}}};return n.length===0?p.jsxs("div",{className:"text-center py-16",children:[p.jsx("div",{className:"text-6xl mb-4",children:""}),p.jsx("p",{className:"text-gray-400 text-lg",children:"No products added yet"}),p.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Add your first product to get started tracking"})]}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex gap-3 flex-wrap backdrop-blur-xl bg-white/5 border border-white/20 rounded-2xl p-4",children:[p.jsx("span",{className:"text-gray-300 font-bold text-sm mr-2 flex items-center",children:"Filter by Subsystem:"}),Q.map(A=>p.jsx("button",{onClick:()=>_(A),className:`px-4 py-2 rounded-xl font-bold text-xs uppercase tracking-wider transition-all ${b===A?"bg-gradient-to-r from-[#f49221] to-[#e58515] text-white shadow-lg shadow-[#f49221]/50":"bg-white/10 text-gray-300 hover:bg-white/20 border border-white/20"}`,children:A==="All"?`All (${n.length})`:`${A.toUpperCase()} (${n.filter(V=>{var R;return((R=V.subsystem)==null?void 0:R.toLowerCase())===A.toLowerCase()}).length})`},A))]}),p.jsx("div",{className:"backdrop-blur-xl bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-3xl overflow-hidden shadow-2xl shadow-[#f49221]/10",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left text-sm",children:[p.jsx("thead",{className:"bg-gradient-to-r from-[#f49221] to-[#e58515] text-white backdrop-blur-xl sticky top-0",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"PS"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Item Name"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Qty"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Added By"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Subsystem"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Status"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Price"}),p.jsx("th",{className:"px-6 py-5 font-bold uppercase tracking-wider text-xs",children:"Actions"})]})}),p.jsx("tbody",{className:"divide-y divide-white/5",children:at.length===0?p.jsx("tr",{children:p.jsxs("td",{colSpan:8,className:"px-6 py-16 text-center",children:[p.jsxs("div",{className:"text-gray-400 text-lg",children:["No products found in ",b," subsystem"]}),p.jsx("button",{onClick:()=>_("All"),className:"mt-4 px-6 py-2 bg-[#f49221] hover:bg-[#e58515] text-white rounded-xl font-bold text-sm transition-colors",children:"Show All Products"})]})}):at.map(A=>{var V;return p.jsxs($p.Fragment,{children:[p.jsxs("tr",{className:"hover:bg-white/10 transition-all border-l-4 border-transparent hover:border-[#f49221] backdrop-blur-sm group",children:[p.jsx("td",{className:"px-6 py-5",children:p.jsx("div",{className:"font-bold text-[#f49221] bg-[#f49221]/10 px-3 py-1 rounded-lg text-sm border border-[#f49221]/50",children:A.serialNumber})}),p.jsxs("td",{className:"px-6 py-5",children:[p.jsx("div",{className:"font-bold text-white text-base",children:A.itemName}),p.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1",children:[p.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(A.createdAt).toLocaleDateString(),"  ",new Date(A.createdAt).toLocaleTimeString()]}),A.deliveryDate&&p.jsxs("div",{className:"text-xs text-green-400 mt-1 flex items-center gap-1 font-semibold",children:[p.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Delivery: ",new Date(A.deliveryDate).toLocaleDateString()]})]}),p.jsx("td",{className:"px-6 py-5",children:p.jsx("span",{className:"font-bold text-white text-lg",children:A.quantity})}),p.jsx("td",{className:"px-6 py-5",children:p.jsxs("div",{className:"flex items-center gap-2",children:[Z(A.addedBy),p.jsx("span",{className:"text-gray-300 font-medium text-sm",children:A.addedBy})]})}),p.jsx("td",{className:"px-6 py-5",children:p.jsx("span",{className:"text-gray-300 font-medium text-sm",children:A.subsystem||""})}),p.jsx("td",{className:"px-6 py-5",children:s===A.id?p.jsxs("div",{className:"flex gap-2",children:[p.jsx("select",{value:o,onChange:R=>u(R.target.value),className:"px-2 py-1 rounded text-xs bg-black text-white border border-[#f49221] outline-none",children:W.map(R=>p.jsx("option",{value:R,children:R},R))}),p.jsx("button",{onClick:()=>D(A.id,o),disabled:c,className:"px-2 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs font-bold transition-colors disabled:opacity-50",children:""}),p.jsx("button",{onClick:()=>r(null),className:"px-2 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-xs font-bold transition-colors",children:""})]}):p.jsx("button",{onClick:()=>{r(A.id),u(A.status)},className:`px-3 py-1 rounded-lg text-xs font-bold border transition-all cursor-pointer ${tt(A.status)}`,children:A.status})}),p.jsx("td",{className:"px-6 py-5",children:p.jsx("div",{className:"text-gray-300 font-medium",children:A.totalPrice?p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx(Je,{className:"mr-1 inline"}),A.totalPrice.toFixed(2)]}),p.jsxs("div",{className:"text-xs text-gray-500",children:["@ ",p.jsx(Je,{className:"mr-1 inline"}),((V=A.pricePerUnit)==null?void 0:V.toFixed(2))||""]})]}):""})}),p.jsx("td",{className:"px-6 py-5",children:p.jsxs("div",{className:"flex gap-2 flex-wrap",children:[p.jsx("button",{onClick:()=>y(A),className:"bg-[#f49221] hover:bg-[#e58515] text-white px-3 py-1 rounded-lg text-xs font-bold transition-colors",children:"Edit"}),A.link&&p.jsx("a",{href:A.link,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-xs font-bold transition-colors",children:"Link"}),A.comments&&p.jsx("button",{onClick:()=>j(T===A.id?null:A.id),className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-xs font-bold transition-colors",children:T===A.id?"Hide Note":" Note"}),p.jsxs("button",{onClick:()=>{L(A),G(A.deliveryDate?new Date(A.deliveryDate).toISOString().split("T")[0]:"")},className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-lg text-xs font-bold transition-colors",children:[" ",A.deliveryDate?"Update":"Set"," Date"]}),p.jsx("button",{onClick:()=>N(A.id),disabled:c,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-xs font-bold transition-colors disabled:opacity-50",children:"Delete"})]})})]}),T===A.id&&A.comments&&p.jsx("tr",{className:"bg-purple-500/10 border-l-4 border-purple-500",children:p.jsx("td",{colSpan:8,className:"px-6 py-4",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"text-purple-400 mt-1",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-purple-300 text-xs font-bold uppercase tracking-wider mb-1",children:"Product Note"}),p.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:A.comments})]})]})})})]},A.id)})})]})})}),g&&p.jsx(GD,{product:g,trip:t,onClose:()=>y(null),onUpdate:()=>{y(null)}}),k&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 border-4 border-green-500",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h3",{className:"text-2xl font-bold text-black",children:" Set Delivery Date"}),p.jsx("button",{onClick:()=>{L(null),G("")},className:"p-2 hover:bg-gray-100 rounded-xl transition-all",children:p.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 mb-6 border-2 border-gray-200",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("span",{className:"font-bold text-[#f49221] text-sm",children:k.serialNumber}),p.jsx("span",{className:"font-bold text-black",children:k.itemName})]}),k.deliveryDate&&p.jsxs("div",{className:"text-xs text-gray-600",children:["Current: ",new Date(k.deliveryDate).toLocaleDateString()]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block",children:"Expected Delivery Date"}),p.jsx("input",{type:"date",value:U,onChange:A=>G(A.target.value),className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-200 focus:border-green-500 outline-none font-bold text-black"})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:S,disabled:c||!U,className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:shadow-lg hover:shadow-green-500/50 text-white py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Saving...":"Save Date"}),p.jsx("button",{onClick:()=>{L(null),G("")},className:"flex-1 bg-gray-300 hover:bg-gray-400 text-black py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all",children:"Cancel"})]})]})})]})},CT=(n,t)=>{const s=new Map;n.forEach(u=>{const c=u.paidBy,d=g=>u.splitType==="custom"&&u.customSplits?u.customSplits[g]??0:u.perPersonAmount;u.splitBetween.forEach(g=>{if(g===c)return;const y=d(g);if(y>.009){const b=`${g}__${c}`;s.set(b,(s.get(b)||0)+y)}})}),t.forEach(u=>{const c=`${u.from}__${u.to}`;if(!s.has(c))return;const d=(s.get(c)||0)-u.amount;s.set(c,d>.009?d:0)});const r=new Map;s.forEach((u,c)=>{if(u<=.009)return;const[d,g]=c.split("__"),y=d<g?d:g,b=d<g?g:d,_=`${y}__${b}`,T=d===y?u:-u;r.set(_,(r.get(_)||0)+T)});const o=[];return r.forEach((u,c)=>{if(Math.abs(u)<=.009)return;const[d,g]=c.split("__");u>0?o.push({from:d,to:g,amount:u}):o.push({from:g,to:d,amount:Math.abs(u)})}),o.sort((u,c)=>c.amount-u.amount)},KD=({tripId:n,trackedSettlements:t,participants:s,trip:r,expenses:o})=>{const[u,c]=K.useState(null),[d,g]=K.useState(!1),[y,b]=K.useState(""),[_,T]=K.useState(""),[j,k]=K.useState(""),[L,U]=K.useState(!1),[G,W]=K.useState(null),Q=K.useMemo(()=>CT(o,t),[o,t]),at=t.filter(R=>!R.isPaid),tt=t.filter(R=>R.isPaid),Z=R=>{var vt;const M=(vt=r==null?void 0:r.memberAvatars)==null?void 0:vt[R],lt=en.find(B=>B.id===M);return lt!=null&&lt.image?p.jsx("img",{src:lt.image,alt:R,className:"w-10 h-10 rounded-lg object-cover"}):p.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:R[0]})},D=async R=>{const M=`${R.from}-${R.to}`;c(M);try{await o_(n,R.from,R.to,R.amount)}catch(lt){console.error("Error creating settlement",lt),alert("Failed to track this payment.")}finally{c(null)}},N=async(R,M)=>{W(R);try{await RD(R,M)}catch(lt){console.error("Error updating paid status",lt),alert("Failed to update status.")}finally{W(null)}},S=async R=>{try{await DD(R)}catch(M){console.error("Error moving payment back to suggested",M),alert("Failed to move payment back.")}},A=async R=>{R.preventDefault();const M=parseFloat(j);if(!y||!_||Number.isNaN(M)||M<=0){alert("Please fill all fields with a valid amount.");return}if(y===_){alert("Payer and receiver cannot be the same.");return}U(!0);try{await o_(n,y,_,M),g(!1),b(""),T(""),k("")}catch(lt){console.error("Error creating custom settlement",lt),alert("Failed to record payment.")}finally{U(!1)}};return Q.length===0&&at.length===0&&tt.length===0?p.jsxs("div",{className:"mt-8 bg-gradient-to-br from-green-900 to-green-950 rounded-3xl p-8 text-center border-2 border-green-700",children:[p.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),p.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:"All Settled!"}),p.jsx("p",{className:"text-green-300 text-sm",children:"Everyone is balanced. No payments needed."})]}):p.jsxs("div",{className:"mt-8 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-white text-2xl font-bold",children:"Settlements"}),p.jsxs("button",{onClick:()=>g(R=>!R),className:"bg-[#f49221] hover:bg-[#e58515] text-white px-4 py-2 rounded-lg font-medium text-sm flex items-center gap-2 transition-colors",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v12M6 12h12"})}),"Record Payment"]})]}),d&&p.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 border-2 border-[#f49221] rounded-2xl p-6 shadow-2xl shadow-[#f49221]/20",children:[p.jsx("h4",{className:"text-white font-bold text-lg mb-4",children:"Record a Payment"}),p.jsxs("form",{onSubmit:A,className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-gray-400 text-sm font-medium mb-2 block",children:"Who Paid"}),p.jsxs("select",{value:y,onChange:R=>b(R.target.value),className:"w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:border-[#f49221] outline-none",required:!0,children:[p.jsx("option",{value:"",children:"Select person"}),s.map(R=>p.jsx("option",{value:R,children:R},R))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-gray-400 text-sm font-medium mb-2 block",children:"Paid To"}),p.jsxs("select",{value:_,onChange:R=>T(R.target.value),className:"w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:border-[#f49221] outline-none",required:!0,children:[p.jsx("option",{value:"",children:"Select person"}),s.map(R=>p.jsx("option",{value:R,children:R},R))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-gray-400 text-sm font-medium mb-2 block",children:"Amount ()"}),p.jsx("input",{type:"number",step:"0.01",min:"0.01",value:j,onChange:R=>k(R.target.value),placeholder:"0.00",className:"w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:border-[#f49221] outline-none",required:!0})]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{type:"submit",disabled:L,className:"bg-[#f49221] hover:bg-[#e58515] text-white px-6 py-3 rounded-lg font-medium transition-colors disabled:opacity-50 flex-1",children:L?"Saving...":"Save Payment"}),p.jsx("button",{type:"button",onClick:()=>g(!1),className:"bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})]}),at.length>0&&p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h3",{className:"text-white text-xl font-bold",children:"Tracked Payments"}),p.jsxs("span",{className:"bg-red-900 text-red-200 text-xs font-bold px-3 py-1 rounded-full",children:[at.length," Pending"]})]}),p.jsx("div",{className:"space-y-3",children:at.map(R=>p.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-5 border-2 border-red-800",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[Z(R.from),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-white font-bold",children:R.from}),p.jsx("div",{className:"text-red-300 text-xs",children:"should pay"})]})]}),p.jsx("div",{className:"px-6",children:p.jsx("svg",{className:"w-8 h-8 text-[#f49221]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),p.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[p.jsxs("div",{className:"flex-1 text-right",children:[p.jsx("div",{className:"text-white font-bold",children:R.to}),p.jsx("div",{className:"text-red-300 text-xs",children:"receives"})]}),Z(R.to)]}),p.jsxs("div",{className:"ml-6 flex items-center gap-3",children:[p.jsxs("div",{className:"bg-[#f49221] text-white font-bold px-4 py-2 rounded-xl text-lg",children:[p.jsx(Je,{className:"mr-1"}),R.amount.toFixed(2)]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:()=>N(R.id,!0),disabled:G===R.id,className:"w-24 h-9 rounded-full flex items-center px-1 transition-all bg-red-700 text-white text-xs font-bold justify-between",title:"Mark as paid",children:[p.jsx("span",{className:"ml-2",children:"Unpaid"}),p.jsx("span",{className:"w-6 h-6 bg-white rounded-full shadow"})]}),p.jsx("button",{onClick:()=>S(R.id),className:"px-3 py-2 rounded-lg text-xs font-bold bg-gray-700 text-white hover:bg-gray-600 transition-colors",title:"Move back to suggested",children:"Move to Suggested"})]})]})]})},R.id))})]}),Q.length>0&&p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h3",{className:"text-white text-xl font-bold",children:"Suggested Settlements"}),p.jsxs("span",{className:"bg-[#f49221] text-white text-xs font-bold px-3 py-1 rounded-full",children:[Q.length," Suggested"]})]}),p.jsx("div",{className:"space-y-3",children:Q.map((R,M)=>{const lt=`${R.from}-${R.to}`;return p.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-5 border-2 border-[#f49221]/30 hover:border-[#f49221] transition-all hover:shadow-xl hover:shadow-[#f49221]/20",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[Z(R.from),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-white font-bold",children:R.from}),p.jsx("div",{className:"text-gray-400 text-xs",children:"should pay"})]})]}),p.jsx("div",{className:"px-6",children:p.jsx("svg",{className:"w-8 h-8 text-[#f49221]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),p.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[p.jsxs("div",{className:"flex-1 text-right",children:[p.jsx("div",{className:"text-white font-bold",children:R.to}),p.jsx("div",{className:"text-gray-400 text-xs",children:"receives"})]}),Z(R.to)]}),p.jsxs("div",{className:"ml-6 flex items-center gap-3",children:[p.jsxs("div",{className:"bg-[#f49221] text-white font-bold px-4 py-2 rounded-xl text-lg",children:[p.jsx(Je,{className:"mr-1"}),R.amount.toFixed(2)]}),p.jsx("button",{onClick:()=>D(R),disabled:u===lt,className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-xl font-bold text-sm transition-colors disabled:opacity-50",title:"Track this payment",children:u===lt?"Adding...":"Track"})]})]})},lt||M)})})]}),tt.length>0&&p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h3",{className:"text-white text-xl font-bold",children:"Completed Payments"}),p.jsxs("span",{className:"bg-green-900 text-green-300 text-xs font-bold px-3 py-1 rounded-full",children:[tt.length," Completed"]})]}),p.jsx("div",{className:"space-y-3",children:tt.map(R=>p.jsx("div",{className:"bg-gradient-to-r from-green-950 to-green-900 rounded-2xl p-5 border-2 border-green-800 opacity-80",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[Z(R.from),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-white font-bold",children:R.from}),p.jsx("div",{className:"text-green-300 text-xs",children:"paid"})]})]}),p.jsx("div",{className:"px-6",children:p.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),p.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[p.jsxs("div",{className:"flex-1 text-right",children:[p.jsx("div",{className:"text-white font-bold",children:R.to}),p.jsx("div",{className:"text-green-300 text-xs",children:"received"})]}),Z(R.to)]}),p.jsxs("div",{className:"ml-6 flex items-center gap-3",children:[p.jsxs("div",{className:"bg-green-700 text-white font-bold px-4 py-2 rounded-xl text-lg",children:[p.jsx(Je,{className:"mr-1"}),R.amount.toFixed(2)]}),p.jsxs("button",{onClick:()=>N(R.id,!1),disabled:G===R.id,className:"w-24 h-9 rounded-full flex items-center px-1 transition-all bg-green-700 text-white text-xs font-bold justify-between",title:"Mark as unpaid",children:[p.jsx("span",{className:"ml-2",children:"Paid"}),p.jsx("span",{className:"w-6 h-6 bg-white rounded-full shadow"})]})]})]})},R.id))})]})]})},QD=({person:n,balances:t,expenses:s,settlements:r,trip:o,onClose:u})=>{var _;const c=t.find(T=>T.name===n),d=$p.useMemo(()=>CT(s,r).filter(T=>T.from===n||T.to===n),[s,r,n]),g=d.filter(T=>T.from===n),y=d.filter(T=>T.to===n),b=s.filter(T=>T.paidBy===n||T.splitBetween.includes(n));return p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center p-4 z-50 overflow-y-auto",children:p.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl w-full max-w-4xl border-4 border-[#f49221] relative",children:[p.jsx("div",{className:"bg-gradient-to-r from-[#f49221] to-[#e58515] p-8 rounded-t-3xl",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[o.memberAvatars&&o.memberAvatars[n]?p.jsx("img",{src:((_=en.find(T=>T.id===o.memberAvatars[n]))==null?void 0:_.image)||"",alt:n,className:"w-16 h-16 rounded-full object-cover border-4 border-white shadow-lg"}):p.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center text-[#f49221] font-bold text-2xl border-4 border-white shadow-lg",children:n[0]}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-bold text-white",children:n}),p.jsx("p",{className:"text-white/80 text-sm",children:"Payment Dashboard"})]})]}),p.jsx("button",{onClick:u,className:"p-3 hover:bg-white/20 rounded-2xl transition-all",children:p.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),p.jsx("div",{className:"p-8 border-b border-gray-700",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-gradient-to-br from-blue-900/50 to-blue-800/50 rounded-2xl p-6 border border-blue-700/50",children:[p.jsx("div",{className:"text-blue-300 text-xs font-bold uppercase tracking-widest mb-2",children:"Total Paid"}),p.jsxs("div",{className:"text-4xl font-black text-white",children:[p.jsx(Je,{className:"mr-2"}),c==null?void 0:c.paid.toFixed(2)]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-purple-900/50 to-purple-800/50 rounded-2xl p-6 border border-purple-700/50",children:[p.jsx("div",{className:"text-purple-300 text-xs font-bold uppercase tracking-widest mb-2",children:"Fair Share"}),p.jsxs("div",{className:"text-4xl font-black text-white",children:[p.jsx(Je,{className:"mr-2"}),c==null?void 0:c.owed.toFixed(2)]})]}),p.jsxs("div",{className:`bg-gradient-to-br ${c&&c.net<0?"from-red-900/50 to-red-800/50 border-red-700/50":c&&c.net>0?"from-green-900/50 to-green-800/50 border-green-700/50":"from-gray-700/50 to-gray-600/50 border-gray-600/50"} rounded-2xl p-6 border`,children:[p.jsx("div",{className:`text-xs font-bold uppercase tracking-widest mb-2 ${c&&c.net<0?"text-red-300":c&&c.net>0?"text-green-300":"text-gray-400"}`,children:c&&c.net<0?"You Owe":c&&c.net>0?"You Get Back":"Status"}),p.jsx("div",{className:`text-4xl font-black ${c&&c.net<0?"text-red-400":c&&c.net>0?"text-green-400":"text-gray-400"}`,children:c&&Math.abs(c.net)>.01?p.jsxs(p.Fragment,{children:[p.jsx(Je,{className:"mr-2"}),Math.abs(c.net).toFixed(2)]}):"Settled"})]})]})}),p.jsxs("div",{className:"p-8 space-y-6 max-h-[60vh] overflow-y-auto",children:[g.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),"You Should Pay"]}),p.jsx("div",{className:"space-y-3",children:g.map((T,j)=>{var k;return p.jsx("div",{className:"bg-gradient-to-r from-red-950/50 to-gray-800/50 rounded-2xl p-5 border-2 border-red-700/50 hover:border-red-500/70 transition-all",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"bg-red-500/20 p-3 rounded-xl",children:p.jsx("svg",{className:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),p.jsxs("div",{className:"flex items-center gap-3",children:[o.memberAvatars&&o.memberAvatars[T.to]?p.jsx("img",{src:((k=en.find(L=>L.id===o.memberAvatars[T.to]))==null?void 0:k.image)||"",alt:T.to,className:"w-10 h-10 rounded-full object-cover border-2 border-green-500/50"}):p.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center text-green-400 font-bold border-2 border-green-500/50",children:T.to[0]}),p.jsxs("div",{children:[p.jsxs("div",{className:"text-white font-bold text-lg",children:["Pay ",T.to]}),p.jsx("div",{className:"text-red-300 text-xs",children:"Settlement Required"})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white font-black px-6 py-3 rounded-xl text-2xl shadow-lg",children:[p.jsx(Je,{className:"mr-2"}),T.amount.toFixed(2)]})]})},j)})})]}),y.length>0&&p.jsxs("div",{children:[p.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"You Should Receive"]}),p.jsx("div",{className:"space-y-3",children:y.map((T,j)=>{var k;return p.jsx("div",{className:"bg-gradient-to-r from-green-950/50 to-gray-800/50 rounded-2xl p-5 border-2 border-green-700/50 hover:border-green-500/70 transition-all",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"bg-green-500/20 p-3 rounded-xl",children:p.jsx("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})})}),p.jsxs("div",{className:"flex items-center gap-3",children:[o.memberAvatars&&o.memberAvatars[T.from]?p.jsx("img",{src:((k=en.find(L=>L.id===o.memberAvatars[T.from]))==null?void 0:k.image)||"",alt:T.from,className:"w-10 h-10 rounded-full object-cover border-2 border-red-500/50"}):p.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center text-red-400 font-bold border-2 border-red-500/50",children:T.from[0]}),p.jsxs("div",{children:[p.jsxs("div",{className:"text-white font-bold text-lg",children:["From ",T.from]}),p.jsx("div",{className:"text-green-300 text-xs",children:"Pending Payment"})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white font-black px-6 py-3 rounded-xl text-2xl shadow-lg",children:[p.jsx(Je,{className:"mr-2"}),T.amount.toFixed(2)]})]})},j)})})]}),g.length===0&&y.length===0&&p.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/30 rounded-2xl p-8 text-center border-2 border-green-700/50",children:[p.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),p.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:"All Settled!"}),p.jsx("p",{className:"text-green-300 text-sm",children:"You're all balanced. No payments needed."})]}),b.length>0&&p.jsxs("div",{className:"mt-8",children:[p.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 bg-[#f49221] rounded-full"}),"Your Expense Activity"]}),p.jsx("div",{className:"bg-gray-800/50 rounded-2xl border border-gray-700 overflow-hidden",children:p.jsx("div",{className:"divide-y divide-gray-700",children:b.slice(0,10).map((T,j)=>p.jsx("div",{className:"p-4 hover:bg-gray-700/30 transition-colors",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("span",{className:"text-white font-bold",children:T.title}),T.paidBy===n&&p.jsx("span",{className:"bg-blue-500/20 text-blue-300 text-xs px-2 py-0.5 rounded font-bold",children:"You Paid"}),T.splitBetween.includes(n)&&T.paidBy!==n&&p.jsx("span",{className:"bg-purple-500/20 text-purple-300 text-xs px-2 py-0.5 rounded font-bold",children:"You Split"})]}),p.jsxs("div",{className:"text-gray-400 text-xs",children:[new Date(T.createdAt).toLocaleDateString(),"  Paid by ",T.paidBy]})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("div",{className:"text-white font-bold",children:[p.jsx(Je,{className:"mr-1"}),T.amount.toFixed(2)]}),T.splitBetween.includes(n)&&p.jsxs("div",{className:"text-[#f49221] text-xs font-bold",children:["Your share: ",p.jsx(Je,{className:"mr-1"}),(T.splitType==="custom"&&T.customSplits&&T.customSplits[n]?T.customSplits[n]:T.perPersonAmount).toFixed(2)]})]})]})},j))})}),b.length>10&&p.jsxs("p",{className:"text-gray-400 text-xs text-center mt-2",children:["Showing 10 of ",b.length," expenses"]})]})]}),p.jsx("div",{className:"p-6 bg-gray-900/50 rounded-b-3xl border-t border-gray-700",children:p.jsx("button",{onClick:u,className:"w-full bg-gradient-to-r from-[#f49221] to-[#e58515] hover:from-[#e58515] hover:to-[#f49221] text-white font-bold py-4 rounded-xl transition-all shadow-lg hover:shadow-xl",children:"Close"})})]})})},RT=K.createContext({});function DT(n){const t=K.useRef(null);return t.current===null&&(t.current=n()),t.current}const Pg=typeof window<"u",jT=Pg?K.useLayoutEffect:K.useEffect,Lg=K.createContext(null);function Ug(n,t){n.indexOf(t)===-1&&n.push(t)}function Bg(n,t){const s=n.indexOf(t);s>-1&&n.splice(s,1)}const Xs=(n,t,s)=>s>t?t:s<n?n:s;let fu=()=>{};const Ei={},VT=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function MT(n){return typeof n=="object"&&n!==null}const IT=n=>/^0[^.\s]+$/u.test(n);function zg(n){let t;return()=>(t===void 0&&(t=n()),t)}const wn=n=>n,XD=(n,t)=>s=>t(n(s)),Nu=(...n)=>n.reduce(XD),wo=(n,t,s)=>{const r=t-n;return r===0?1:(s-n)/r};class Fg{constructor(){this.subscriptions=[]}add(t){return Ug(this.subscriptions,t),()=>Bg(this.subscriptions,t)}notify(t,s,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,s,r);else for(let u=0;u<o;u++){const c=this.subscriptions[u];c&&c(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hs=n=>n*1e3,Zn=n=>n/1e3;function qg(n,t){return t?n*(1e3/t):0}const kT=(n,t,s)=>(((1-3*s+3*t)*n+(3*s-6*t))*n+3*t)*n,$D=1e-7,ZD=12;function WD(n,t,s,r,o){let u,c,d=0;do c=t+(s-t)/2,u=kT(c,r,o)-n,u>0?s=c:t=c;while(Math.abs(u)>$D&&++d<ZD);return c}function Cu(n,t,s,r){if(n===t&&s===r)return wn;const o=u=>WD(u,0,1,n,s);return u=>u===0||u===1?u:kT(o(u),t,r)}const OT=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,PT=n=>t=>1-n(1-t),LT=Cu(.33,1.53,.69,.99),Hg=PT(LT),UT=OT(Hg),BT=n=>(n*=2)<1?.5*Hg(n):.5*(2-Math.pow(2,-10*(n-1))),Gg=n=>1-Math.sin(Math.acos(n)),zT=PT(Gg),FT=OT(Gg),JD=Cu(.42,0,1,1),tj=Cu(0,0,.58,1),qT=Cu(.42,0,.58,1),ej=n=>Array.isArray(n)&&typeof n[0]!="number",HT=n=>Array.isArray(n)&&typeof n[0]=="number",nj={linear:wn,easeIn:JD,easeInOut:qT,easeOut:tj,circIn:Gg,circInOut:FT,circOut:zT,backIn:Hg,backInOut:UT,backOut:LT,anticipate:BT},sj=n=>typeof n=="string",u_=n=>{if(HT(n)){fu(n.length===4);const[t,s,r,o]=n;return Cu(t,s,r,o)}else if(sj(n))return nj[n];return n},fh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ij(n,t){let s=new Set,r=new Set,o=!1,u=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function g(b){c.has(b)&&(y.schedule(b),n()),b(d)}const y={schedule:(b,_=!1,T=!1)=>{const k=T&&o?s:r;return _&&c.add(b),k.has(b)||k.add(b),b},cancel:b=>{r.delete(b),c.delete(b)},process:b=>{if(d=b,o){u=!0;return}o=!0,[s,r]=[r,s],s.forEach(g),s.clear(),o=!1,u&&(u=!1,y.process(b))}};return y}const rj=40;function GT(n,t){let s=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},u=()=>s=!0,c=fh.reduce((Q,at)=>(Q[at]=ij(u),Q),{}),{setup:d,read:g,resolveKeyframes:y,preUpdate:b,update:_,preRender:T,render:j,postRender:k}=c,L=()=>{const Q=Ei.useManualTiming?o.timestamp:performance.now();s=!1,Ei.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(Q-o.timestamp,rj),1)),o.timestamp=Q,o.isProcessing=!0,d.process(o),g.process(o),y.process(o),b.process(o),_.process(o),T.process(o),j.process(o),k.process(o),o.isProcessing=!1,s&&t&&(r=!1,n(L))},U=()=>{s=!0,r=!0,o.isProcessing||n(L)};return{schedule:fh.reduce((Q,at)=>{const tt=c[at];return Q[at]=(Z,D=!1,N=!1)=>(s||U(),tt.schedule(Z,D,N)),Q},{}),cancel:Q=>{for(let at=0;at<fh.length;at++)c[fh[at]].cancel(Q)},state:o,steps:c}}const{schedule:ne,cancel:$s,state:He,steps:Bm}=GT(typeof requestAnimationFrame<"u"?requestAnimationFrame:wn,!0);let Th;function aj(){Th=void 0}const Tn={now:()=>(Th===void 0&&Tn.set(He.isProcessing||Ei.useManualTiming?He.timestamp:performance.now()),Th),set:n=>{Th=n,queueMicrotask(aj)}},YT=n=>t=>typeof t=="string"&&t.startsWith(n),KT=YT("--"),oj=YT("var(--"),Yg=n=>oj(n)?lj.test(n.split("/*")[0].trim()):!1,lj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Do={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},du={...Do,transform:n=>Xs(0,1,n)},dh={...Do,default:1},Wl=n=>Math.round(n*1e5)/1e5,Kg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uj(n){return n==null}const cj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qg=(n,t)=>s=>!!(typeof s=="string"&&cj.test(s)&&s.startsWith(n)||t&&!uj(s)&&Object.prototype.hasOwnProperty.call(s,t)),QT=(n,t,s)=>r=>{if(typeof r!="string")return r;const[o,u,c,d]=r.match(Kg);return{[n]:parseFloat(o),[t]:parseFloat(u),[s]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},hj=n=>Xs(0,255,n),zm={...Do,transform:n=>Math.round(hj(n))},na={test:Qg("rgb","red"),parse:QT("red","green","blue"),transform:({red:n,green:t,blue:s,alpha:r=1})=>"rgba("+zm.transform(n)+", "+zm.transform(t)+", "+zm.transform(s)+", "+Wl(du.transform(r))+")"};function fj(n){let t="",s="",r="",o="";return n.length>5?(t=n.substring(1,3),s=n.substring(3,5),r=n.substring(5,7),o=n.substring(7,9)):(t=n.substring(1,2),s=n.substring(2,3),r=n.substring(3,4),o=n.substring(4,5),t+=t,s+=s,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Ap={test:Qg("#"),parse:fj,transform:na.transform},Ru=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),sr=Ru("deg"),Gs=Ru("%"),pt=Ru("px"),dj=Ru("vh"),mj=Ru("vw"),c_={...Gs,parse:n=>Gs.parse(n)/100,transform:n=>Gs.transform(n*100)},lo={test:Qg("hsl","hue"),parse:QT("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(n)+", "+Gs.transform(Wl(t))+", "+Gs.transform(Wl(s))+", "+Wl(du.transform(r))+")"},Me={test:n=>na.test(n)||Ap.test(n)||lo.test(n),parse:n=>na.test(n)?na.parse(n):lo.test(n)?lo.parse(n):Ap.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?na.transform(n):lo.transform(n),getAnimatableNone:n=>{const t=Me.parse(n);return t.alpha=0,Me.transform(t)}},pj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gj(n){var t,s;return isNaN(n)&&typeof n=="string"&&(((t=n.match(Kg))==null?void 0:t.length)||0)+(((s=n.match(pj))==null?void 0:s.length)||0)>0}const XT="number",$T="color",yj="var",vj="var(",h_="${}",bj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mu(n){const t=n.toString(),s=[],r={color:[],number:[],var:[]},o=[];let u=0;const d=t.replace(bj,g=>(Me.test(g)?(r.color.push(u),o.push($T),s.push(Me.parse(g))):g.startsWith(vj)?(r.var.push(u),o.push(yj),s.push(g)):(r.number.push(u),o.push(XT),s.push(parseFloat(g))),++u,h_)).split(h_);return{values:s,split:d,indexes:r,types:o}}function ZT(n){return mu(n).values}function WT(n){const{split:t,types:s}=mu(n),r=t.length;return o=>{let u="";for(let c=0;c<r;c++)if(u+=t[c],o[c]!==void 0){const d=s[c];d===XT?u+=Wl(o[c]):d===$T?u+=Me.transform(o[c]):u+=o[c]}return u}}const xj=n=>typeof n=="number"?0:Me.test(n)?Me.getAnimatableNone(n):n;function _j(n){const t=ZT(n);return WT(n)(t.map(xj))}const yr={test:gj,parse:ZT,createTransformer:WT,getAnimatableNone:_j};function Fm(n,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?n+(t-n)*6*s:s<1/2?t:s<2/3?n+(t-n)*(2/3-s)*6:n}function Tj({hue:n,saturation:t,lightness:s,alpha:r}){n/=360,t/=100,s/=100;let o=0,u=0,c=0;if(!t)o=u=c=s;else{const d=s<.5?s*(1+t):s+t-s*t,g=2*s-d;o=Fm(g,d,n+1/3),u=Fm(g,d,n),c=Fm(g,d,n-1/3)}return{red:Math.round(o*255),green:Math.round(u*255),blue:Math.round(c*255),alpha:r}}function Kh(n,t){return s=>s>0?t:n}const he=(n,t,s)=>n+(t-n)*s,qm=(n,t,s)=>{const r=n*n,o=s*(t*t-r)+r;return o<0?0:Math.sqrt(o)},Ej=[Ap,na,lo],wj=n=>Ej.find(t=>t.test(n));function f_(n){const t=wj(n);if(!t)return!1;let s=t.parse(n);return t===lo&&(s=Tj(s)),s}const d_=(n,t)=>{const s=f_(n),r=f_(t);if(!s||!r)return Kh(n,t);const o={...s};return u=>(o.red=qm(s.red,r.red,u),o.green=qm(s.green,r.green,u),o.blue=qm(s.blue,r.blue,u),o.alpha=he(s.alpha,r.alpha,u),na.transform(o))},Np=new Set(["none","hidden"]);function Sj(n,t){return Np.has(n)?s=>s<=0?n:t:s=>s>=1?t:n}function Aj(n,t){return s=>he(n,t,s)}function Xg(n){return typeof n=="number"?Aj:typeof n=="string"?Yg(n)?Kh:Me.test(n)?d_:Rj:Array.isArray(n)?JT:typeof n=="object"?Me.test(n)?d_:Nj:Kh}function JT(n,t){const s=[...n],r=s.length,o=n.map((u,c)=>Xg(u)(u,t[c]));return u=>{for(let c=0;c<r;c++)s[c]=o[c](u);return s}}function Nj(n,t){const s={...n,...t},r={};for(const o in s)n[o]!==void 0&&t[o]!==void 0&&(r[o]=Xg(n[o])(n[o],t[o]));return o=>{for(const u in r)s[u]=r[u](o);return s}}function Cj(n,t){const s=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const u=t.types[o],c=n.indexes[u][r[u]],d=n.values[c]??0;s[o]=d,r[u]++}return s}const Rj=(n,t)=>{const s=yr.createTransformer(t),r=mu(n),o=mu(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?Np.has(n)&&!o.values.length||Np.has(t)&&!r.values.length?Sj(n,t):Nu(JT(Cj(r,o),o.values),s):Kh(n,t)};function tE(n,t,s){return typeof n=="number"&&typeof t=="number"&&typeof s=="number"?he(n,t,s):Xg(n)(n,t)}const Dj=n=>{const t=({timestamp:s})=>n(s);return{start:(s=!0)=>ne.update(t,s),stop:()=>$s(t),now:()=>He.isProcessing?He.timestamp:Tn.now()}},eE=(n,t,s=10)=>{let r="";const o=Math.max(Math.round(t/s),2);for(let u=0;u<o;u++)r+=Math.round(n(u/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Qh=2e4;function $g(n){let t=0;const s=50;let r=n.next(t);for(;!r.done&&t<Qh;)t+=s,r=n.next(t);return t>=Qh?1/0:t}function jj(n,t=100,s){const r=s({...n,keyframes:[0,t]}),o=Math.min($g(r),Qh);return{type:"keyframes",ease:u=>r.next(o*u).value/t,duration:Zn(o)}}const Vj=5;function nE(n,t,s){const r=Math.max(t-Vj,0);return qg(s-n(r),t-r)}const ge={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hm=.001;function Mj({duration:n=ge.duration,bounce:t=ge.bounce,velocity:s=ge.velocity,mass:r=ge.mass}){let o,u,c=1-t;c=Xs(ge.minDamping,ge.maxDamping,c),n=Xs(ge.minDuration,ge.maxDuration,Zn(n)),c<1?(o=y=>{const b=y*c,_=b*n,T=b-s,j=Cp(y,c),k=Math.exp(-_);return Hm-T/j*k},u=y=>{const _=y*c*n,T=_*s+s,j=Math.pow(c,2)*Math.pow(y,2)*n,k=Math.exp(-_),L=Cp(Math.pow(y,2),c);return(-o(y)+Hm>0?-1:1)*((T-j)*k)/L}):(o=y=>{const b=Math.exp(-y*n),_=(y-s)*n+1;return-Hm+b*_},u=y=>{const b=Math.exp(-y*n),_=(s-y)*(n*n);return b*_});const d=5/n,g=kj(o,u,d);if(n=Hs(n),isNaN(g))return{stiffness:ge.stiffness,damping:ge.damping,duration:n};{const y=Math.pow(g,2)*r;return{stiffness:y,damping:c*2*Math.sqrt(r*y),duration:n}}}const Ij=12;function kj(n,t,s){let r=s;for(let o=1;o<Ij;o++)r=r-n(r)/t(r);return r}function Cp(n,t){return n*Math.sqrt(1-t*t)}const Oj=["duration","bounce"],Pj=["stiffness","damping","mass"];function m_(n,t){return t.some(s=>n[s]!==void 0)}function Lj(n){let t={velocity:ge.velocity,stiffness:ge.stiffness,damping:ge.damping,mass:ge.mass,isResolvedFromDuration:!1,...n};if(!m_(n,Pj)&&m_(n,Oj))if(n.visualDuration){const s=n.visualDuration,r=2*Math.PI/(s*1.2),o=r*r,u=2*Xs(.05,1,1-(n.bounce||0))*Math.sqrt(o);t={...t,mass:ge.mass,stiffness:o,damping:u}}else{const s=Mj(n);t={...t,...s,mass:ge.mass},t.isResolvedFromDuration=!0}return t}function Xh(n=ge.visualDuration,t=ge.bounce){const s=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:r,restDelta:o}=s;const u=s.keyframes[0],c=s.keyframes[s.keyframes.length-1],d={done:!1,value:u},{stiffness:g,damping:y,mass:b,duration:_,velocity:T,isResolvedFromDuration:j}=Lj({...s,velocity:-Zn(s.velocity||0)}),k=T||0,L=y/(2*Math.sqrt(g*b)),U=c-u,G=Zn(Math.sqrt(g/b)),W=Math.abs(U)<5;r||(r=W?ge.restSpeed.granular:ge.restSpeed.default),o||(o=W?ge.restDelta.granular:ge.restDelta.default);let Q;if(L<1){const tt=Cp(G,L);Q=Z=>{const D=Math.exp(-L*G*Z);return c-D*((k+L*G*U)/tt*Math.sin(tt*Z)+U*Math.cos(tt*Z))}}else if(L===1)Q=tt=>c-Math.exp(-G*tt)*(U+(k+G*U)*tt);else{const tt=G*Math.sqrt(L*L-1);Q=Z=>{const D=Math.exp(-L*G*Z),N=Math.min(tt*Z,300);return c-D*((k+L*G*U)*Math.sinh(N)+tt*U*Math.cosh(N))/tt}}const at={calculatedDuration:j&&_||null,next:tt=>{const Z=Q(tt);if(j)d.done=tt>=_;else{let D=tt===0?k:0;L<1&&(D=tt===0?Hs(k):nE(Q,tt,Z));const N=Math.abs(D)<=r,S=Math.abs(c-Z)<=o;d.done=N&&S}return d.value=d.done?c:Z,d},toString:()=>{const tt=Math.min($g(at),Qh),Z=eE(D=>at.next(tt*D).value,tt,30);return tt+"ms "+Z},toTransition:()=>{}};return at}Xh.applyToOptions=n=>{const t=jj(n,100,Xh);return n.ease=t.ease,n.duration=Hs(t.duration),n.type="keyframes",n};function Rp({keyframes:n,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:u=500,modifyTarget:c,min:d,max:g,restDelta:y=.5,restSpeed:b}){const _=n[0],T={done:!1,value:_},j=N=>d!==void 0&&N<d||g!==void 0&&N>g,k=N=>d===void 0?g:g===void 0||Math.abs(d-N)<Math.abs(g-N)?d:g;let L=s*t;const U=_+L,G=c===void 0?U:c(U);G!==U&&(L=G-_);const W=N=>-L*Math.exp(-N/r),Q=N=>G+W(N),at=N=>{const S=W(N),A=Q(N);T.done=Math.abs(S)<=y,T.value=T.done?G:A};let tt,Z;const D=N=>{j(T.value)&&(tt=N,Z=Xh({keyframes:[T.value,k(T.value)],velocity:nE(Q,N,T.value),damping:o,stiffness:u,restDelta:y,restSpeed:b}))};return D(0),{calculatedDuration:null,next:N=>{let S=!1;return!Z&&tt===void 0&&(S=!0,at(N),D(N)),tt!==void 0&&N>=tt?Z.next(N-tt):(!S&&at(N),T)}}}function Uj(n,t,s){const r=[],o=s||Ei.mix||tE,u=n.length-1;for(let c=0;c<u;c++){let d=o(n[c],n[c+1]);if(t){const g=Array.isArray(t)?t[c]||wn:t;d=Nu(g,d)}r.push(d)}return r}function sE(n,t,{clamp:s=!0,ease:r,mixer:o}={}){const u=n.length;if(fu(u===t.length),u===1)return()=>t[0];if(u===2&&t[0]===t[1])return()=>t[1];const c=n[0]===n[1];n[0]>n[u-1]&&(n=[...n].reverse(),t=[...t].reverse());const d=Uj(t,r,o),g=d.length,y=b=>{if(c&&b<n[0])return t[0];let _=0;if(g>1)for(;_<n.length-2&&!(b<n[_+1]);_++);const T=wo(n[_],n[_+1],b);return d[_](T)};return s?b=>y(Xs(n[0],n[u-1],b)):y}function Bj(n,t){const s=n[n.length-1];for(let r=1;r<=t;r++){const o=wo(0,t,r);n.push(he(s,1,o))}}function iE(n){const t=[0];return Bj(t,n.length-1),t}function zj(n,t){return n.map(s=>s*t)}function Fj(n,t){return n.map(()=>t||qT).splice(0,n.length-1)}function Jl({duration:n=300,keyframes:t,times:s,ease:r="easeInOut"}){const o=ej(r)?r.map(u_):u_(r),u={done:!1,value:t[0]},c=zj(s&&s.length===t.length?s:iE(t),n),d=sE(c,t,{ease:Array.isArray(o)?o:Fj(t,o)});return{calculatedDuration:n,next:g=>(u.value=d(g),u.done=g>=n,u)}}const qj=n=>n!==null;function Zg(n,{repeat:t,repeatType:s="loop"},r,o=1){const u=n.filter(qj),d=o<0||t&&s!=="loop"&&t%2===1?0:u.length-1;return!d||r===void 0?u[d]:r}const Hj={decay:Rp,inertia:Rp,tween:Jl,keyframes:Jl,spring:Xh};function rE(n){typeof n.type=="string"&&(n.type=Hj[n.type])}class Wg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const Gj=n=>n/100;class Jg extends Wg{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,o;const{motionValue:s}=this.options;s&&s.updatedAt!==Tn.now()&&this.tick(Tn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;rE(t);const{type:s=Jl,repeat:r=0,repeatDelay:o=0,repeatType:u,velocity:c=0}=t;let{keyframes:d}=t;const g=s||Jl;g!==Jl&&typeof d[0]!="number"&&(this.mixKeyframes=Nu(Gj,tE(d[0],d[1])),d=[0,100]);const y=g({...t,keyframes:d});u==="mirror"&&(this.mirroredGenerator=g({...t,keyframes:[...d].reverse(),velocity:-c})),y.calculatedDuration===null&&(y.calculatedDuration=$g(y));const{calculatedDuration:b}=y;this.calculatedDuration=b,this.resolvedDuration=b+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=y}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:r,totalDuration:o,mixKeyframes:u,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:g}=this;if(this.startTime===null)return r.next(0);const{delay:y=0,keyframes:b,repeat:_,repeatType:T,repeatDelay:j,type:k,onUpdate:L,finalKeyframe:U}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const G=this.currentTime-y*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?G<0:G>o;this.currentTime=Math.max(G,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let Q=this.currentTime,at=r;if(_){const N=Math.min(this.currentTime,o)/d;let S=Math.floor(N),A=N%1;!A&&N>=1&&(A=1),A===1&&S--,S=Math.min(S,_+1),!!(S%2)&&(T==="reverse"?(A=1-A,j&&(A-=j/d)):T==="mirror"&&(at=c)),Q=Xs(0,1,A)*d}const tt=W?{done:!1,value:b[0]}:at.next(Q);u&&(tt.value=u(tt.value));let{done:Z}=tt;!W&&g!==null&&(Z=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return D&&k!==Rp&&(tt.value=Zg(b,this.options,U,this.speed)),L&&L(tt.value),D&&this.finish(),tt}then(t,s){return this.finished.then(t,s)}get duration(){return Zn(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Zn(t)}get time(){return Zn(this.currentTime)}set time(t){var s;t=Hs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Tn.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=Zn(this.currentTime))}play(){var o,u;if(this.isStopped)return;const{driver:t=Dj,startTime:s}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),(u=(o=this.options).onPlay)==null||u.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Tn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(t=this.options).onComplete)==null||s.call(t)}cancel(){var t,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(t=this.options).onCancel)==null||s.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),t.observe(this)}}function Yj(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const sa=n=>n*180/Math.PI,Dp=n=>{const t=sa(Math.atan2(n[1],n[0]));return jp(t)},Kj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Dp,rotateZ:Dp,skewX:n=>sa(Math.atan(n[1])),skewY:n=>sa(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},jp=n=>(n=n%360,n<0&&(n+=360),n),p_=Dp,g_=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),y_=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Qj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:g_,scaleY:y_,scale:n=>(g_(n)+y_(n))/2,rotateX:n=>jp(sa(Math.atan2(n[6],n[5]))),rotateY:n=>jp(sa(Math.atan2(-n[2],n[0]))),rotateZ:p_,rotate:p_,skewX:n=>sa(Math.atan(n[4])),skewY:n=>sa(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Vp(n){return n.includes("scale")?1:0}function Mp(n,t){if(!n||n==="none")return Vp(t);const s=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(s)r=Qj,o=s;else{const d=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Kj,o=d}if(!o)return Vp(t);const u=r[t],c=o[1].split(",").map($j);return typeof u=="function"?u(c):c[u]}const Xj=(n,t)=>{const{transform:s="none"}=getComputedStyle(n);return Mp(s,t)};function $j(n){return parseFloat(n.trim())}const jo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vo=new Set(jo),v_=n=>n===Do||n===pt,Zj=new Set(["x","y","z"]),Wj=jo.filter(n=>!Zj.has(n));function Jj(n){const t=[];return Wj.forEach(s=>{const r=n.getValue(s);r!==void 0&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t}const aa={width:({x:n},{paddingLeft:t="0",paddingRight:s="0"})=>n.max-n.min-parseFloat(t)-parseFloat(s),height:({y:n},{paddingTop:t="0",paddingBottom:s="0"})=>n.max-n.min-parseFloat(t)-parseFloat(s),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>Mp(t,"x"),y:(n,{transform:t})=>Mp(t,"y")};aa.translateX=aa.x;aa.translateY=aa.y;const oa=new Set;let Ip=!1,kp=!1,Op=!1;function aE(){if(kp){const n=Array.from(oa).filter(r=>r.needsMeasurement),t=new Set(n.map(r=>r.element)),s=new Map;t.forEach(r=>{const o=Jj(r);o.length&&(s.set(r,o),r.render())}),n.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=s.get(r);o&&o.forEach(([u,c])=>{var d;(d=r.getValue(u))==null||d.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}kp=!1,Ip=!1,oa.forEach(n=>n.complete(Op)),oa.clear()}function oE(){oa.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(kp=!0)})}function tV(){Op=!0,oE(),aE(),Op=!1}class ty{constructor(t,s,r,o,u,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=r,this.motionValue=o,this.element=u,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(oa.add(this),Ip||(Ip=!0,ne.read(oE),ne.resolveKeyframes(aE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:r,motionValue:o}=this;if(t[0]===null){const u=o==null?void 0:o.get(),c=t[t.length-1];if(u!==void 0)t[0]=u;else if(r&&s){const d=r.readValue(s,c);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=c),o&&u===void 0&&o.set(t[0])}Yj(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),oa.delete(this)}cancel(){this.state==="scheduled"&&(oa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const eV=n=>n.startsWith("--");function nV(n,t,s){eV(t)?n.style.setProperty(t,s):n.style[t]=s}const lE=zg(()=>window.ScrollTimeline!==void 0),sV={};function iV(n,t){const s=zg(n);return()=>sV[t]??s()}const uE=iV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yl=([n,t,s,r])=>`cubic-bezier(${n}, ${t}, ${s}, ${r})`,b_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yl([0,.65,.55,1]),circOut:Yl([.55,0,1,.45]),backIn:Yl([.31,.01,.66,-.59]),backOut:Yl([.33,1.53,.69,.99])};function cE(n,t){if(n)return typeof n=="function"?uE()?eE(n,t):"ease-out":HT(n)?Yl(n):Array.isArray(n)?n.map(s=>cE(s,t)||b_.easeOut):b_[n]}function rV(n,t,s,{delay:r=0,duration:o=300,repeat:u=0,repeatType:c="loop",ease:d="easeOut",times:g}={},y=void 0){const b={[t]:s};g&&(b.offset=g);const _=cE(d,o);Array.isArray(_)&&(b.easing=_);const T={delay:r,duration:o,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:u+1,direction:c==="reverse"?"alternate":"normal"};return y&&(T.pseudoElement=y),n.animate(b,T)}function hE(n){return typeof n=="function"&&"applyToOptions"in n}function aV({type:n,...t}){return hE(n)&&uE()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class oV extends Wg{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:r,keyframes:o,pseudoElement:u,allowFlatten:c=!1,finalKeyframe:d,onComplete:g}=t;this.isPseudoElement=!!u,this.allowFlatten=c,this.options=t,fu(typeof t.type!="string");const y=aV(t);this.animation=rV(s,r,o,y,u),y.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const b=Zg(o,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(b):nV(s,r,b),this.animation.cancel()}g==null||g(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,s;(s=(t=this.animation).finish)==null||s.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,s;this.isPseudoElement||(s=(t=this.animation).commitStyles)==null||s.call(t)}get duration(){var s,r;const t=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return Zn(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Zn(t)}get time(){return Zn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Hs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&lE()?(this.animation.timeline=t,wn):s(this)}}const fE={anticipate:BT,backInOut:UT,circInOut:FT};function lV(n){return n in fE}function uV(n){typeof n.ease=="string"&&lV(n.ease)&&(n.ease=fE[n.ease])}const x_=10;class cV extends oV{constructor(t){uV(t),rE(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:r,onComplete:o,element:u,...c}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const d=new Jg({...c,autoplay:!1}),g=Hs(this.finishedTime??this.time);s.setWithVelocity(d.sample(g-x_).value,d.sample(g).value,x_),d.stop()}}const __=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(yr.test(n)||n==="0")&&!n.startsWith("url("));function hV(n){const t=n[0];if(n.length===1)return!0;for(let s=0;s<n.length;s++)if(n[s]!==t)return!0}function fV(n,t,s,r){const o=n[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const u=n[n.length-1],c=__(o,t),d=__(u,t);return!c||!d?!1:hV(n)||(s==="spring"||hE(s))&&r}function Pp(n){n.duration=0,n.type="keyframes"}const dV=new Set(["opacity","clipPath","filter","transform"]),mV=zg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function pV(n){var b;const{motionValue:t,name:s,repeatDelay:r,repeatType:o,damping:u,type:c}=n;if(!(((b=t==null?void 0:t.owner)==null?void 0:b.current)instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:y}=t.owner.getProps();return mV()&&s&&dV.has(s)&&(s!=="transform"||!y)&&!g&&!r&&o!=="mirror"&&u!==0&&c!=="inertia"}const gV=40;class yV extends Wg{constructor({autoplay:t=!0,delay:s=0,type:r="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:c="loop",keyframes:d,name:g,motionValue:y,element:b,..._}){var k;super(),this.stop=()=>{var L,U;this._animation&&(this._animation.stop(),(L=this.stopTimeline)==null||L.call(this)),(U=this.keyframeResolver)==null||U.cancel()},this.createdAt=Tn.now();const T={autoplay:t,delay:s,type:r,repeat:o,repeatDelay:u,repeatType:c,name:g,motionValue:y,element:b,..._},j=(b==null?void 0:b.KeyframeResolver)||ty;this.keyframeResolver=new j(d,(L,U,G)=>this.onKeyframesResolved(L,U,T,!G),g,y,b),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(t,s,r,o){this.keyframeResolver=void 0;const{name:u,type:c,velocity:d,delay:g,isHandoff:y,onUpdate:b}=r;this.resolvedAt=Tn.now(),fV(t,u,c,d)||((Ei.instantAnimations||!g)&&(b==null||b(Zg(t,r,s))),t[0]=t[t.length-1],Pp(r),r.repeat=0);const T={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>gV?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:t},j=!y&&pV(T)?new cV({...T,element:T.motionValue.owner.current}):new Jg(T);j.finished.then(()=>this.notifyFinished()).catch(wn),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),tV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const vV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bV(n){const t=vV.exec(n);if(!t)return[,];const[,s,r,o]=t;return[`--${s??r}`,o]}function dE(n,t,s=1){const[r,o]=bV(n);if(!r)return;const u=window.getComputedStyle(t).getPropertyValue(r);if(u){const c=u.trim();return VT(c)?parseFloat(c):c}return Yg(o)?dE(o,t,s+1):o}function ey(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const mE=new Set(["width","height","top","left","right","bottom",...jo]),xV={test:n=>n==="auto",parse:n=>n},pE=n=>t=>t.test(n),gE=[Do,pt,Gs,sr,mj,dj,xV],T_=n=>gE.find(pE(n));function _V(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||IT(n):!0}const TV=new Set(["brightness","contrast","saturate","opacity"]);function EV(n){const[t,s]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[r]=s.match(Kg)||[];if(!r)return n;const o=s.replace(r,"");let u=TV.has(t)?1:0;return r!==s&&(u*=100),t+"("+u+o+")"}const wV=/\b([a-z-]*)\(.*?\)/gu,Lp={...yr,getAnimatableNone:n=>{const t=n.match(wV);return t?t.map(EV).join(" "):n}},E_={...Do,transform:Math.round},SV={rotate:sr,rotateX:sr,rotateY:sr,rotateZ:sr,scale:dh,scaleX:dh,scaleY:dh,scaleZ:dh,skew:sr,skewX:sr,skewY:sr,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:du,originX:c_,originY:c_,originZ:pt},ny={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,inset:pt,insetBlock:pt,insetBlockStart:pt,insetBlockEnd:pt,insetInline:pt,insetInlineStart:pt,insetInlineEnd:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,paddingBlock:pt,paddingBlockStart:pt,paddingBlockEnd:pt,paddingInline:pt,paddingInlineStart:pt,paddingInlineEnd:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,marginBlock:pt,marginBlockStart:pt,marginBlockEnd:pt,marginInline:pt,marginInlineStart:pt,marginInlineEnd:pt,backgroundPositionX:pt,backgroundPositionY:pt,...SV,zIndex:E_,fillOpacity:du,strokeOpacity:du,numOctaves:E_},AV={...ny,color:Me,backgroundColor:Me,outlineColor:Me,fill:Me,stroke:Me,borderColor:Me,borderTopColor:Me,borderRightColor:Me,borderBottomColor:Me,borderLeftColor:Me,filter:Lp,WebkitFilter:Lp},yE=n=>AV[n];function vE(n,t){let s=yE(n);return s!==Lp&&(s=yr),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const NV=new Set(["auto","none","0"]);function CV(n,t,s){let r=0,o;for(;r<n.length&&!o;){const u=n[r];typeof u=="string"&&!NV.has(u)&&mu(u).values.length&&(o=n[r]),r++}if(o&&s)for(const u of t)n[u]=vE(s,o)}class RV extends ty{constructor(t,s,r,o,u){super(t,s,r,o,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let g=0;g<t.length;g++){let y=t[g];if(typeof y=="string"&&(y=y.trim(),Yg(y))){const b=dE(y,s.current);b!==void 0&&(t[g]=b),g===t.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!mE.has(r)||t.length!==2)return;const[o,u]=t,c=T_(o),d=T_(u);if(c!==d)if(v_(c)&&v_(d))for(let g=0;g<t.length;g++){const y=t[g];typeof y=="string"&&(t[g]=parseFloat(y))}else aa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,r=[];for(let o=0;o<t.length;o++)(t[o]===null||_V(t[o]))&&r.push(o);r.length&&CV(t,r,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=aa[r](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const o=s[s.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){var d;const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(s);o&&o.jump(this.measuredOrigin,!1);const u=r.length-1,c=r[u];r[u]=aa[s](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([g,y])=>{t.getValue(g).set(y)}),this.resolveNoneKeyframes()}}function bE(n,t,s){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const o=document.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}const xE=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function _E(n){return MT(n)&&"offsetHeight"in n}const w_=30,DV=n=>!isNaN(parseFloat(n));class jV{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var u;const o=Tn.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=Tn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=DV(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Fg);const r=this.events[t].add(s);return t==="change"?()=>{r(),ne.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Tn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>w_)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,w_);return qg(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,s;(t=this.dependents)==null||t.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Us(n,t){return new jV(n,t)}const{schedule:sy}=GT(queueMicrotask,!1),fs={x:!1,y:!1};function TE(){return fs.x||fs.y}function VV(n){return n==="x"||n==="y"?fs[n]?null:(fs[n]=!0,()=>{fs[n]=!1}):fs.x||fs.y?null:(fs.x=fs.y=!0,()=>{fs.x=fs.y=!1})}function EE(n,t){const s=bE(n),r=new AbortController,o={passive:!0,...t,signal:r.signal};return[s,o,()=>r.abort()]}function S_(n){return!(n.pointerType==="touch"||TE())}function MV(n,t,s={}){const[r,o,u]=EE(n,s),c=d=>{if(!S_(d))return;const{target:g}=d,y=t(g,d);if(typeof y!="function"||!g)return;const b=_=>{S_(_)&&(y(_),g.removeEventListener("pointerleave",b))};g.addEventListener("pointerleave",b,o)};return r.forEach(d=>{d.addEventListener("pointerenter",c,o)}),u}const wE=(n,t)=>t?n===t?!0:wE(n,t.parentElement):!1,iy=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,IV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kV(n){return IV.has(n.tagName)||n.tabIndex!==-1}const Eh=new WeakSet;function A_(n){return t=>{t.key==="Enter"&&n(t)}}function Gm(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const OV=(n,t)=>{const s=n.currentTarget;if(!s)return;const r=A_(()=>{if(Eh.has(s))return;Gm(s,"down");const o=A_(()=>{Gm(s,"up")}),u=()=>Gm(s,"cancel");s.addEventListener("keyup",o,t),s.addEventListener("blur",u,t)});s.addEventListener("keydown",r,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),t)};function N_(n){return iy(n)&&!TE()}function PV(n,t,s={}){const[r,o,u]=EE(n,s),c=d=>{const g=d.currentTarget;if(!N_(d))return;Eh.add(g);const y=t(g,d),b=(j,k)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",T),Eh.has(g)&&Eh.delete(g),N_(j)&&typeof y=="function"&&y(j,{success:k})},_=j=>{b(j,g===window||g===document||s.useGlobalTarget||wE(g,j.target))},T=j=>{b(j,!1)};window.addEventListener("pointerup",_,o),window.addEventListener("pointercancel",T,o)};return r.forEach(d=>{(s.useGlobalTarget?window:d).addEventListener("pointerdown",c,o),_E(d)&&(d.addEventListener("focus",y=>OV(y,o)),!kV(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),u}function ry(n){return MT(n)&&"ownerSVGElement"in n}const wh=new WeakMap;let ir;const SE=(n,t,s)=>(r,o)=>o&&o[0]?o[0][n+"Size"]:ry(r)&&"getBBox"in r?r.getBBox()[t]:r[s],LV=SE("inline","width","offsetWidth"),UV=SE("block","height","offsetHeight");function BV({target:n,borderBoxSize:t}){var s;(s=wh.get(n))==null||s.forEach(r=>{r(n,{get width(){return LV(n,t)},get height(){return UV(n,t)}})})}function zV(n){n.forEach(BV)}function FV(){typeof ResizeObserver>"u"||(ir=new ResizeObserver(zV))}function qV(n,t){ir||FV();const s=bE(n);return s.forEach(r=>{let o=wh.get(r);o||(o=new Set,wh.set(r,o)),o.add(t),ir==null||ir.observe(r)}),()=>{s.forEach(r=>{const o=wh.get(r);o==null||o.delete(t),o!=null&&o.size||ir==null||ir.unobserve(r)})}}const Sh=new Set;let uo;function HV(){uo=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};Sh.forEach(t=>t(n))},window.addEventListener("resize",uo)}function GV(n){return Sh.add(n),uo||HV(),()=>{Sh.delete(n),!Sh.size&&typeof uo=="function"&&(window.removeEventListener("resize",uo),uo=void 0)}}function YV(n,t){return typeof n=="function"?GV(n):qV(n,t)}function AE(n,t){let s;const r=()=>{const{currentTime:o}=t,c=(o===null?0:o.value)/100;s!==c&&n(c),s=c};return ne.preUpdate(r,!0),()=>$s(r)}function KV(n){return ry(n)&&n.tagName==="svg"}const ln=n=>!!(n&&n.getVelocity),QV=[...gE,Me,yr],XV=n=>QV.find(pE(n)),NE=K.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function $V(n=!0){const t=K.useContext(Lg);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:o}=t,u=K.useId();K.useEffect(()=>{if(n)return o(u)},[n]);const c=K.useCallback(()=>n&&r&&r(u),[u,r,n]);return!s&&r?[!1,c]:[!0]}const CE=K.createContext({strict:!1}),C_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},So={};for(const n in C_)So[n]={isEnabled:t=>C_[n].some(s=>!!t[s])};function ZV(n){for(const t in n)So[t]={...So[t],...n[t]}}const WV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $h(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||WV.has(n)}let RE=n=>!$h(n);function JV(n){typeof n=="function"&&(RE=t=>t.startsWith("on")?!$h(t):n(t))}try{JV(require("@emotion/is-prop-valid").default)}catch{}function t6(n,t,s){const r={};for(const o in n)o==="values"&&typeof n.values=="object"||(RE(o)||s===!0&&$h(o)||!t&&!$h(o)||n.draggable&&o.startsWith("onDrag"))&&(r[o]=n[o]);return r}const Ef=K.createContext({});function wf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function pu(n){return typeof n=="string"||Array.isArray(n)}const ay=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oy=["initial",...ay];function Sf(n){return wf(n.animate)||oy.some(t=>pu(n[t]))}function DE(n){return!!(Sf(n)||n.variants)}function e6(n,t){if(Sf(n)){const{initial:s,animate:r}=n;return{initial:s===!1||pu(s)?s:void 0,animate:pu(r)?r:void 0}}return n.inherit!==!1?t:{}}function n6(n){const{initial:t,animate:s}=e6(n,K.useContext(Ef));return K.useMemo(()=>({initial:t,animate:s}),[R_(t),R_(s)])}function R_(n){return Array.isArray(n)?n.join(" "):n}function D_(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Ul={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(pt.test(n))n=parseFloat(n);else return n;const s=D_(n,t.target.x),r=D_(n,t.target.y);return`${s}% ${r}%`}},s6={correct:(n,{treeScale:t,projectionDelta:s})=>{const r=n,o=yr.parse(n);if(o.length>5)return r;const u=yr.createTransformer(n),c=typeof o[0]!="number"?1:0,d=s.x.scale*t.x,g=s.y.scale*t.y;o[0+c]/=d,o[1+c]/=g;const y=he(d,g,.5);return typeof o[2+c]=="number"&&(o[2+c]/=y),typeof o[3+c]=="number"&&(o[3+c]/=y),u(o)}},Up={borderRadius:{...Ul,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ul,borderTopRightRadius:Ul,borderBottomLeftRadius:Ul,borderBottomRightRadius:Ul,boxShadow:s6};function jE(n,{layout:t,layoutId:s}){return Vo.has(n)||n.startsWith("origin")||(t||s!==void 0)&&(!!Up[n]||n==="opacity")}const i6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},r6=jo.length;function a6(n,t,s){let r="",o=!0;for(let u=0;u<r6;u++){const c=jo[u],d=n[c];if(d===void 0)continue;let g=!0;if(typeof d=="number"?g=d===(c.startsWith("scale")?1:0):g=parseFloat(d)===0,!g||s){const y=xE(d,ny[c]);if(!g){o=!1;const b=i6[c]||c;r+=`${b}(${y}) `}s&&(t[c]=y)}}return r=r.trim(),s?r=s(t,o?"":r):o&&(r="none"),r}function ly(n,t,s){const{style:r,vars:o,transformOrigin:u}=n;let c=!1,d=!1;for(const g in t){const y=t[g];if(Vo.has(g)){c=!0;continue}else if(KT(g)){o[g]=y;continue}else{const b=xE(y,ny[g]);g.startsWith("origin")?(d=!0,u[g]=b):r[g]=b}}if(t.transform||(c||s?r.transform=a6(t,n.transform,s):r.transform&&(r.transform="none")),d){const{originX:g="50%",originY:y="50%",originZ:b=0}=u;r.transformOrigin=`${g} ${y} ${b}`}}const uy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function VE(n,t,s){for(const r in t)!ln(t[r])&&!jE(r,s)&&(n[r]=t[r])}function o6({transformTemplate:n},t){return K.useMemo(()=>{const s=uy();return ly(s,t,n),Object.assign({},s.vars,s.style)},[t])}function l6(n,t){const s=n.style||{},r={};return VE(r,s,n),Object.assign(r,o6(n,t)),r}function u6(n,t){const s={},r=l6(n,t);return n.drag&&n.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(s.tabIndex=0),s.style=r,s}const c6={offset:"stroke-dashoffset",array:"stroke-dasharray"},h6={offset:"strokeDashoffset",array:"strokeDasharray"};function f6(n,t,s=1,r=0,o=!0){n.pathLength=1;const u=o?c6:h6;n[u.offset]=pt.transform(-r);const c=pt.transform(t),d=pt.transform(s);n[u.array]=`${c} ${d}`}function ME(n,{attrX:t,attrY:s,attrScale:r,pathLength:o,pathSpacing:u=1,pathOffset:c=0,...d},g,y,b){if(ly(n,d,y),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:_,style:T}=n;_.transform&&(T.transform=_.transform,delete _.transform),(T.transform||_.transformOrigin)&&(T.transformOrigin=_.transformOrigin??"50% 50%",delete _.transformOrigin),T.transform&&(T.transformBox=(b==null?void 0:b.transformBox)??"fill-box",delete _.transformBox),t!==void 0&&(_.x=t),s!==void 0&&(_.y=s),r!==void 0&&(_.scale=r),o!==void 0&&f6(_,o,u,c,!1)}const IE=()=>({...uy(),attrs:{}}),kE=n=>typeof n=="string"&&n.toLowerCase()==="svg";function d6(n,t,s,r){const o=K.useMemo(()=>{const u=IE();return ME(u,t,kE(r),n.transformTemplate,n.style),{...u.attrs,style:{...u.style}}},[t]);if(n.style){const u={};VE(u,n.style,n),o.style={...u,...o.style}}return o}const m6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cy(n){return typeof n!="string"||n.includes("-")?!1:!!(m6.indexOf(n)>-1||/[A-Z]/u.test(n))}function p6(n,t,s,{latestValues:r},o,u=!1,c){const g=(c??cy(n)?d6:u6)(t,r,o,n),y=t6(t,typeof n=="string",u),b=n!==K.Fragment?{...y,...g,ref:s}:{},{children:_}=t,T=K.useMemo(()=>ln(_)?_.get():_,[_]);return K.createElement(n,{...b,children:T})}function j_(n){const t=[{},{}];return n==null||n.values.forEach((s,r)=>{t[0][r]=s.get(),t[1][r]=s.getVelocity()}),t}function hy(n,t,s,r){if(typeof t=="function"){const[o,u]=j_(r);t=t(s!==void 0?s:n.custom,o,u)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[o,u]=j_(r);t=t(s!==void 0?s:n.custom,o,u)}return t}function Ah(n){return ln(n)?n.get():n}function g6({scrapeMotionValuesFromProps:n,createRenderState:t},s,r,o){return{latestValues:y6(s,r,o,n),renderState:t()}}function y6(n,t,s,r){const o={},u=r(n,{});for(const T in u)o[T]=Ah(u[T]);let{initial:c,animate:d}=n;const g=Sf(n),y=DE(n);t&&y&&!g&&n.inherit!==!1&&(c===void 0&&(c=t.initial),d===void 0&&(d=t.animate));let b=s?s.initial===!1:!1;b=b||c===!1;const _=b?d:c;if(_&&typeof _!="boolean"&&!wf(_)){const T=Array.isArray(_)?_:[_];for(let j=0;j<T.length;j++){const k=hy(n,T[j]);if(k){const{transitionEnd:L,transition:U,...G}=k;for(const W in G){let Q=G[W];if(Array.isArray(Q)){const at=b?Q.length-1:0;Q=Q[at]}Q!==null&&(o[W]=Q)}for(const W in L)o[W]=L[W]}}}return o}const OE=n=>(t,s)=>{const r=K.useContext(Ef),o=K.useContext(Lg),u=()=>g6(n,t,r,o);return s?u():DT(u)};function fy(n,t,s){var u;const{style:r}=n,o={};for(const c in r)(ln(r[c])||t.style&&ln(t.style[c])||jE(c,n)||((u=s==null?void 0:s.getValue(c))==null?void 0:u.liveStyle)!==void 0)&&(o[c]=r[c]);return o}const v6=OE({scrapeMotionValuesFromProps:fy,createRenderState:uy});function PE(n,t,s){const r=fy(n,t,s);for(const o in n)if(ln(n[o])||ln(t[o])){const u=jo.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[u]=n[o]}return r}const b6=OE({scrapeMotionValuesFromProps:PE,createRenderState:IE}),x6=Symbol.for("motionComponentSymbol");function co(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function _6(n,t,s){return K.useCallback(r=>{r&&n.onMount&&n.onMount(r),t&&(r?t.mount(r):t.unmount()),s&&(typeof s=="function"?s(r):co(s)&&(s.current=r))},[t])}const dy=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),T6="framerAppearId",LE="data-"+dy(T6),UE=K.createContext({});function E6(n,t,s,r,o,u){var U,G;const{visualElement:c}=K.useContext(Ef),d=K.useContext(CE),g=K.useContext(Lg),y=K.useContext(NE).reducedMotion,b=K.useRef(null);r=r||d.renderer,!b.current&&r&&(b.current=r(n,{visualState:t,parent:c,props:s,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:y,isSVG:u}));const _=b.current,T=K.useContext(UE);_&&!_.projection&&o&&(_.type==="html"||_.type==="svg")&&w6(b.current,s,o,T);const j=K.useRef(!1);K.useInsertionEffect(()=>{_&&j.current&&_.update(s,g)});const k=s[LE],L=K.useRef(!!k&&!((U=window.MotionHandoffIsComplete)!=null&&U.call(window,k))&&((G=window.MotionHasOptimisedAnimation)==null?void 0:G.call(window,k)));return jT(()=>{_&&(j.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),_.scheduleRenderMicrotask(),L.current&&_.animationState&&_.animationState.animateChanges())}),K.useEffect(()=>{_&&(!L.current&&_.animationState&&_.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var W;(W=window.MotionHandoffMarkAsComplete)==null||W.call(window,k)}),L.current=!1),_.enteringChildren=void 0)}),_}function w6(n,t,s,r){const{layoutId:o,layout:u,drag:c,dragConstraints:d,layoutScroll:g,layoutRoot:y,layoutCrossfade:b}=t;n.projection=new s(n.latestValues,t["data-framer-portal-id"]?void 0:BE(n.parent)),n.projection.setOptions({layoutId:o,layout:u,alwaysMeasureLayout:!!c||d&&co(d),visualElement:n,animationType:typeof u=="string"?u:"both",initialPromotionConfig:r,crossfade:b,layoutScroll:g,layoutRoot:y})}function BE(n){if(n)return n.options.allowProjection!==!1?n.projection:BE(n.parent)}function Ym(n,{forwardMotionProps:t=!1,type:s}={},r,o){r&&ZV(r);const u=s?s==="svg":cy(n),c=u?b6:v6;function d(y,b){let _;const T={...K.useContext(NE),...y,layoutId:S6(y)},{isStatic:j}=T,k=n6(y),L=c(y,j);if(!j&&Pg){A6();const U=N6(T);_=U.MeasureLayout,k.visualElement=E6(n,L,T,o,U.ProjectionNode,u)}return p.jsxs(Ef.Provider,{value:k,children:[_&&k.visualElement?p.jsx(_,{visualElement:k.visualElement,...T}):null,p6(n,y,_6(L,k.visualElement,b),L,j,t,u)]})}d.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const g=K.forwardRef(d);return g[x6]=n,g}function S6({layoutId:n}){const t=K.useContext(RT).id;return t&&n!==void 0?t+"-"+n:n}function A6(n,t){K.useContext(CE).strict}function N6(n){const{drag:t,layout:s}=So;if(!t&&!s)return{};const r={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(n)||s!=null&&s.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function C6(n,t){if(typeof Proxy>"u")return Ym;const s=new Map,r=(u,c)=>Ym(u,c,n,t),o=(u,c)=>r(u,c);return new Proxy(o,{get:(u,c)=>c==="create"?r:(s.has(c)||s.set(c,Ym(c,void 0,n,t)),s.get(c))})}function zE({top:n,left:t,right:s,bottom:r}){return{x:{min:t,max:s},y:{min:n,max:r}}}function R6({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function D6(n,t){if(!t)return n;const s=t({x:n.left,y:n.top}),r=t({x:n.right,y:n.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function Km(n){return n===void 0||n===1}function Bp({scale:n,scaleX:t,scaleY:s}){return!Km(n)||!Km(t)||!Km(s)}function ta(n){return Bp(n)||FE(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function FE(n){return V_(n.x)||V_(n.y)}function V_(n){return n&&n!=="0%"}function Zh(n,t,s){const r=n-s,o=t*r;return s+o}function M_(n,t,s,r,o){return o!==void 0&&(n=Zh(n,o,r)),Zh(n,s,r)+t}function zp(n,t=0,s=1,r,o){n.min=M_(n.min,t,s,r,o),n.max=M_(n.max,t,s,r,o)}function qE(n,{x:t,y:s}){zp(n.x,t.translate,t.scale,t.originPoint),zp(n.y,s.translate,s.scale,s.originPoint)}const I_=.999999999999,k_=1.0000000000001;function j6(n,t,s,r=!1){const o=s.length;if(!o)return;t.x=t.y=1;let u,c;for(let d=0;d<o;d++){u=s[d],c=u.projectionDelta;const{visualElement:g}=u.options;g&&g.props.style&&g.props.style.display==="contents"||(r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&fo(n,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,qE(n,c)),r&&ta(u.latestValues)&&fo(n,u.latestValues))}t.x<k_&&t.x>I_&&(t.x=1),t.y<k_&&t.y>I_&&(t.y=1)}function ho(n,t){n.min=n.min+t,n.max=n.max+t}function O_(n,t,s,r,o=.5){const u=he(n.min,n.max,o);zp(n,t,s,u,r)}function fo(n,t){O_(n.x,t.x,t.scaleX,t.scale,t.originX),O_(n.y,t.y,t.scaleY,t.scale,t.originY)}function HE(n,t){return zE(D6(n.getBoundingClientRect(),t))}function V6(n,t,s){const r=HE(n,s),{scroll:o}=t;return o&&(ho(r.x,o.offset.x),ho(r.y,o.offset.y)),r}const P_=()=>({translate:0,scale:1,origin:0,originPoint:0}),mo=()=>({x:P_(),y:P_()}),L_=()=>({min:0,max:0}),Ue=()=>({x:L_(),y:L_()}),Fp={current:null},GE={current:!1};function M6(){if(GE.current=!0,!!Pg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>Fp.current=n.matches;n.addEventListener("change",t),t()}else Fp.current=!1}const I6=new WeakMap;function k6(n,t,s){for(const r in t){const o=t[r],u=s[r];if(ln(o))n.addValue(r,o);else if(ln(u))n.addValue(r,Us(o,{owner:n}));else if(u!==o)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(o):c.hasAnimated||c.set(o)}else{const c=n.getStaticValue(r);n.addValue(r,Us(c!==void 0?c:o,{owner:n}))}}for(const r in s)t[r]===void 0&&n.removeValue(r);return t}const U_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class O6{scrapeMotionValuesFromProps(t,s,r){return{}}constructor({parent:t,props:s,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:u,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ty,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=Tn.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,ne.render(this.render,!1,!0))};const{latestValues:g,renderState:y}=c;this.latestValues=g,this.baseTarget={...g},this.initialValues=s.initial?{...g}:{},this.renderState=y,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=d,this.blockInitialAnimation=!!u,this.isControllingVariants=Sf(s),this.isVariantNode=DE(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:b,..._}=this.scrapeMotionValuesFromProps(s,{},this);for(const T in _){const j=_[T];g[T]!==void 0&&ln(j)&&j.set(g[T])}}mount(t){var s;this.current=t,I6.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,o)=>this.bindToMotionValue(o,r)),GE.current||M6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fp.current,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),$s(this.notifyUpdate),$s(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const r=this.features[s];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Vo.has(t);r&&this.onBindTransform&&this.onBindTransform();const o=s.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&ne.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{o(),u&&u(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in So){const s=So[t];if(!s)continue;const{isEnabled:r,Feature:o}=s;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ue()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<U_.length;r++){const o=U_[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const u="on"+o,c=t[u];c&&(this.propEventSubscriptions[o]=this.on(o,c))}this.prevMotionValues=k6(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const r=this.values.get(t);s!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&s!==void 0&&(r=Us(s===null?void 0:s,{owner:this}),this.addValue(t,r)),r}readValue(t,s){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(VT(r)||IT(r))?r=parseFloat(r):!XV(r)&&yr.test(s)&&(r=vE(t,s)),this.setBaseTarget(t,ln(r)?r.get():r)),ln(r)?r.get():r}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var u;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const c=hy(this.props,s,(u=this.presenceContext)==null?void 0:u.custom);c&&(r=c[t])}if(s&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!ln(o)?o:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Fg),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){sy.render(this.render)}}class YE extends O6{constructor(){super(...arguments),this.KeyframeResolver=RV}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:r}){delete s[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ln(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function KE(n,{style:t,vars:s},r,o){const u=n.style;let c;for(c in t)u[c]=t[c];o==null||o.applyProjectionStyles(u,r);for(c in s)u.setProperty(c,s[c])}function P6(n){return window.getComputedStyle(n)}class L6 extends YE{constructor(){super(...arguments),this.type="html",this.renderInstance=KE}readValueFromInstance(t,s){var r;if(Vo.has(s))return(r=this.projection)!=null&&r.isProjecting?Vp(s):Xj(t,s);{const o=P6(t),u=(KT(s)?o.getPropertyValue(s):o[s])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:s}){return HE(t,s)}build(t,s,r){ly(t,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,s,r){return fy(t,s,r)}}const QE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function U6(n,t,s,r){KE(n,t,void 0,r);for(const o in t.attrs)n.setAttribute(QE.has(o)?o:dy(o),t.attrs[o])}class B6 extends YE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ue}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Vo.has(s)){const r=yE(s);return r&&r.default||0}return s=QE.has(s)?s:dy(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,r){return PE(t,s,r)}build(t,s,r){ME(t,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,s,r,o){U6(t,s,r,o)}mount(t){this.isSVGTag=kE(t.tagName),super.mount(t)}}const z6=(n,t)=>t.isSVG??cy(n)?new B6(t):new L6(t,{allowProjection:n!==K.Fragment});function go(n,t,s){const r=n.getProps();return hy(r,t,s!==void 0?s:r.custom,n)}const qp=n=>Array.isArray(n);function F6(n,t,s){n.hasValue(t)?n.getValue(t).set(s):n.addValue(t,Us(s))}function q6(n){return qp(n)?n[n.length-1]||0:n}function H6(n,t){const s=go(n,t);let{transitionEnd:r={},transition:o={},...u}=s||{};u={...u,...r};for(const c in u){const d=q6(u[c]);F6(n,c,d)}}function G6(n){return!!(ln(n)&&n.add)}function Hp(n,t){const s=n.getValue("willChange");if(G6(s))return s.add(t);if(!s&&Ei.WillChange){const r=new Ei.WillChange("auto");n.addValue("willChange",r),r.add(t)}}function XE(n){return n.props[LE]}const Y6=n=>n!==null;function K6(n,{repeat:t,repeatType:s="loop"},r){const o=n.filter(Y6),u=t&&s!=="loop"&&t%2===1?0:o.length-1;return o[u]}const Q6={type:"spring",stiffness:500,damping:25,restSpeed:10},X6=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),$6={type:"keyframes",duration:.8},Z6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},W6=(n,{keyframes:t})=>t.length>2?$6:Vo.has(n)?n.startsWith("scale")?X6(t[1]):Q6:Z6;function J6({when:n,delay:t,delayChildren:s,staggerChildren:r,staggerDirection:o,repeat:u,repeatType:c,repeatDelay:d,from:g,elapsed:y,...b}){return!!Object.keys(b).length}const my=(n,t,s,r={},o,u)=>c=>{const d=ey(r,n)||{},g=d.delay||r.delay||0;let{elapsed:y=0}=r;y=y-Hs(g);const b={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...d,delay:-y,onUpdate:T=>{t.set(T),d.onUpdate&&d.onUpdate(T)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:n,motionValue:t,element:u?void 0:o};J6(d)||Object.assign(b,W6(n,b)),b.duration&&(b.duration=Hs(b.duration)),b.repeatDelay&&(b.repeatDelay=Hs(b.repeatDelay)),b.from!==void 0&&(b.keyframes[0]=b.from);let _=!1;if((b.type===!1||b.duration===0&&!b.repeatDelay)&&(Pp(b),b.delay===0&&(_=!0)),(Ei.instantAnimations||Ei.skipAnimations)&&(_=!0,Pp(b),b.delay=0),b.allowFlatten=!d.type&&!d.ease,_&&!u&&t.get()!==void 0){const T=K6(b.keyframes,d);if(T!==void 0){ne.update(()=>{b.onUpdate(T),b.onComplete()});return}}return d.isSync?new Jg(b):new yV(b)};function tM({protectedKeys:n,needsAnimating:t},s){const r=n.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,r}function $E(n,t,{delay:s=0,transitionOverride:r,type:o}={}){let{transition:u=n.getDefaultTransition(),transitionEnd:c,...d}=t;r&&(u=r);const g=[],y=o&&n.animationState&&n.animationState.getState()[o];for(const b in d){const _=n.getValue(b,n.latestValues[b]??null),T=d[b];if(T===void 0||y&&tM(y,b))continue;const j={delay:s,...ey(u||{},b)},k=_.get();if(k!==void 0&&!_.isAnimating&&!Array.isArray(T)&&T===k&&!j.velocity)continue;let L=!1;if(window.MotionHandoffAnimation){const G=XE(n);if(G){const W=window.MotionHandoffAnimation(G,b,ne);W!==null&&(j.startTime=W,L=!0)}}Hp(n,b),_.start(my(b,_,T,n.shouldReduceMotion&&mE.has(b)?{type:!1}:j,n,L));const U=_.animation;U&&g.push(U)}return c&&Promise.all(g).then(()=>{ne.update(()=>{c&&H6(n,c)})}),g}function ZE(n,t,s,r=0,o=1){const u=Array.from(n).sort((y,b)=>y.sortNodePosition(b)).indexOf(t),c=n.size,d=(c-1)*r;return typeof s=="function"?s(u,c):o===1?u*r:d-u*r}function Gp(n,t,s={}){var g;const r=go(n,t,s.type==="exit"?(g=n.presenceContext)==null?void 0:g.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(o=s.transitionOverride);const u=r?()=>Promise.all($E(n,r,s)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(y=0)=>{const{delayChildren:b=0,staggerChildren:_,staggerDirection:T}=o;return eM(n,t,y,b,_,T,s)}:()=>Promise.resolve(),{when:d}=o;if(d){const[y,b]=d==="beforeChildren"?[u,c]:[c,u];return y().then(()=>b())}else return Promise.all([u(),c(s.delay)])}function eM(n,t,s=0,r=0,o=0,u=1,c){const d=[];for(const g of n.variantChildren)g.notify("AnimationStart",t),d.push(Gp(g,t,{...c,delay:s+(typeof r=="function"?0:r)+ZE(n.variantChildren,g,r,o,u)}).then(()=>g.notify("AnimationComplete",t)));return Promise.all(d)}function nM(n,t,s={}){n.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(u=>Gp(n,u,s));r=Promise.all(o)}else if(typeof t=="string")r=Gp(n,t,s);else{const o=typeof t=="function"?go(n,t,s.custom):t;r=Promise.all($E(n,o,s))}return r.then(()=>{n.notify("AnimationComplete",t)})}function WE(n,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==n.length)return!1;for(let r=0;r<s;r++)if(t[r]!==n[r])return!1;return!0}const sM=oy.length;function JE(n){if(!n)return;if(!n.isControllingVariants){const s=n.parent?JE(n.parent)||{}:{};return n.props.initial!==void 0&&(s.initial=n.props.initial),s}const t={};for(let s=0;s<sM;s++){const r=oy[s],o=n.props[r];(pu(o)||o===!1)&&(t[r]=o)}return t}const iM=[...ay].reverse(),rM=ay.length;function aM(n){return t=>Promise.all(t.map(({animation:s,options:r})=>nM(n,s,r)))}function oM(n){let t=aM(n),s=B_(),r=!0;const o=g=>(y,b)=>{var T;const _=go(n,b,g==="exit"?(T=n.presenceContext)==null?void 0:T.custom:void 0);if(_){const{transition:j,transitionEnd:k,...L}=_;y={...y,...L,...k}}return y};function u(g){t=g(n)}function c(g){const{props:y}=n,b=JE(n.parent)||{},_=[],T=new Set;let j={},k=1/0;for(let U=0;U<rM;U++){const G=iM[U],W=s[G],Q=y[G]!==void 0?y[G]:b[G],at=pu(Q),tt=G===g?W.isActive:null;tt===!1&&(k=U);let Z=Q===b[G]&&Q!==y[G]&&at;if(Z&&r&&n.manuallyAnimateOnMount&&(Z=!1),W.protectedKeys={...j},!W.isActive&&tt===null||!Q&&!W.prevProp||wf(Q)||typeof Q=="boolean")continue;const D=lM(W.prevProp,Q);let N=D||G===g&&W.isActive&&!Z&&at||U>k&&at,S=!1;const A=Array.isArray(Q)?Q:[Q];let V=A.reduce(o(G),{});tt===!1&&(V={});const{prevResolvedValues:R={}}=W,M={...R,...V},lt=ot=>{N=!0,T.has(ot)&&(S=!0,T.delete(ot)),W.needsAnimating[ot]=!0;const ct=n.getValue(ot);ct&&(ct.liveStyle=!1)};for(const ot in M){const ct=V[ot],wt=R[ot];if(j.hasOwnProperty(ot))continue;let bt=!1;qp(ct)&&qp(wt)?bt=!WE(ct,wt):bt=ct!==wt,bt?ct!=null?lt(ot):T.add(ot):ct!==void 0&&T.has(ot)?lt(ot):W.protectedKeys[ot]=!0}W.prevProp=Q,W.prevResolvedValues=V,W.isActive&&(j={...j,...V}),r&&n.blockInitialAnimation&&(N=!1);const vt=Z&&D;N&&(!vt||S)&&_.push(...A.map(ot=>{const ct={type:G};if(typeof ot=="string"&&r&&!vt&&n.manuallyAnimateOnMount&&n.parent){const{parent:wt}=n,bt=go(wt,ot);if(wt.enteringChildren&&bt){const{delayChildren:O}=bt.transition||{};ct.delay=ZE(wt.enteringChildren,n,O)}}return{animation:ot,options:ct}}))}if(T.size){const U={};if(typeof y.initial!="boolean"){const G=go(n,Array.isArray(y.initial)?y.initial[0]:y.initial);G&&G.transition&&(U.transition=G.transition)}T.forEach(G=>{const W=n.getBaseTarget(G),Q=n.getValue(G);Q&&(Q.liveStyle=!0),U[G]=W??null}),_.push({animation:U})}let L=!!_.length;return r&&(y.initial===!1||y.initial===y.animate)&&!n.manuallyAnimateOnMount&&(L=!1),r=!1,L?t(_):Promise.resolve()}function d(g,y){var _;if(s[g].isActive===y)return Promise.resolve();(_=n.variantChildren)==null||_.forEach(T=>{var j;return(j=T.animationState)==null?void 0:j.setActive(g,y)}),s[g].isActive=y;const b=c(g);for(const T in s)s[T].protectedKeys={};return b}return{animateChanges:c,setActive:d,setAnimateFunction:u,getState:()=>s,reset:()=>{s=B_()}}}function lM(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!WE(t,n):!1}function Wr(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function B_(){return{animate:Wr(!0),whileInView:Wr(),whileHover:Wr(),whileTap:Wr(),whileDrag:Wr(),whileFocus:Wr(),exit:Wr()}}class xr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class uM extends xr{constructor(t){super(t),t.animationState||(t.animationState=oM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();wf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let cM=0;class hM extends xr{constructor(){super(...arguments),this.id=cM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);s&&!t&&o.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const fM={animation:{Feature:uM},exit:{Feature:hM}};function gu(n,t,s,r={passive:!0}){return n.addEventListener(t,s,r),()=>n.removeEventListener(t,s)}function Du(n){return{point:{x:n.pageX,y:n.pageY}}}const dM=n=>t=>iy(t)&&n(t,Du(t));function tu(n,t,s,r){return gu(n,t,dM(s),r)}const tw=1e-4,mM=1-tw,pM=1+tw,ew=.01,gM=0-ew,yM=0+ew;function fn(n){return n.max-n.min}function vM(n,t,s){return Math.abs(n-t)<=s}function z_(n,t,s,r=.5){n.origin=r,n.originPoint=he(t.min,t.max,n.origin),n.scale=fn(s)/fn(t),n.translate=he(s.min,s.max,n.origin)-n.originPoint,(n.scale>=mM&&n.scale<=pM||isNaN(n.scale))&&(n.scale=1),(n.translate>=gM&&n.translate<=yM||isNaN(n.translate))&&(n.translate=0)}function eu(n,t,s,r){z_(n.x,t.x,s.x,r?r.originX:void 0),z_(n.y,t.y,s.y,r?r.originY:void 0)}function F_(n,t,s){n.min=s.min+t.min,n.max=n.min+fn(t)}function bM(n,t,s){F_(n.x,t.x,s.x),F_(n.y,t.y,s.y)}function q_(n,t,s){n.min=t.min-s.min,n.max=n.min+fn(t)}function Wh(n,t,s){q_(n.x,t.x,s.x),q_(n.y,t.y,s.y)}function Xn(n){return[n("x"),n("y")]}const nw=({current:n})=>n?n.ownerDocument.defaultView:null,H_=(n,t)=>Math.abs(n-t);function xM(n,t){const s=H_(n.x,t.x),r=H_(n.y,t.y);return Math.sqrt(s**2+r**2)}class sw{constructor(t,s,{transformPagePoint:r,contextWindow:o=window,dragSnapToOrigin:u=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Xm(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,k=xM(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!k)return;const{point:L}=T,{timestamp:U}=He;this.history.push({...L,timestamp:U});const{onStart:G,onMove:W}=this.handlers;j||(G&&G(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,T)},this.handlePointerMove=(T,j)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=Qm(j,this.transformPagePoint),ne.update(this.updatePoint,!0)},this.handlePointerUp=(T,j)=>{this.end();const{onEnd:k,onSessionEnd:L,resumeAnimation:U}=this.handlers;if(this.dragSnapToOrigin&&U&&U(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const G=Xm(T.type==="pointercancel"?this.lastMoveEventInfo:Qm(j,this.transformPagePoint),this.history);this.startEvent&&k&&k(T,G),L&&L(T,G)},!iy(t))return;this.dragSnapToOrigin=u,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=o||window;const d=Du(t),g=Qm(d,this.transformPagePoint),{point:y}=g,{timestamp:b}=He;this.history=[{...y,timestamp:b}];const{onSessionStart:_}=s;_&&_(t,Xm(g,this.history)),this.removeListeners=Nu(tu(this.contextWindow,"pointermove",this.handlePointerMove),tu(this.contextWindow,"pointerup",this.handlePointerUp),tu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),$s(this.updatePoint)}}function Qm(n,t){return t?{point:t(n.point)}:n}function G_(n,t){return{x:n.x-t.x,y:n.y-t.y}}function Xm({point:n},t){return{point:n,delta:G_(n,iw(t)),offset:G_(n,_M(t)),velocity:TM(t,.1)}}function _M(n){return n[0]}function iw(n){return n[n.length-1]}function TM(n,t){if(n.length<2)return{x:0,y:0};let s=n.length-1,r=null;const o=iw(n);for(;s>=0&&(r=n[s],!(o.timestamp-r.timestamp>Hs(t)));)s--;if(!r)return{x:0,y:0};const u=Zn(o.timestamp-r.timestamp);if(u===0)return{x:0,y:0};const c={x:(o.x-r.x)/u,y:(o.y-r.y)/u};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function EM(n,{min:t,max:s},r){return t!==void 0&&n<t?n=r?he(t,n,r.min):Math.max(n,t):s!==void 0&&n>s&&(n=r?he(s,n,r.max):Math.min(n,s)),n}function Y_(n,t,s){return{min:t!==void 0?n.min+t:void 0,max:s!==void 0?n.max+s-(n.max-n.min):void 0}}function wM(n,{top:t,left:s,bottom:r,right:o}){return{x:Y_(n.x,s,o),y:Y_(n.y,t,r)}}function K_(n,t){let s=t.min-n.min,r=t.max-n.max;return t.max-t.min<n.max-n.min&&([s,r]=[r,s]),{min:s,max:r}}function SM(n,t){return{x:K_(n.x,t.x),y:K_(n.y,t.y)}}function AM(n,t){let s=.5;const r=fn(n),o=fn(t);return o>r?s=wo(t.min,t.max-r,n.min):r>o&&(s=wo(n.min,n.max-o,t.min)),Xs(0,1,s)}function NM(n,t){const s={};return t.min!==void 0&&(s.min=t.min-n.min),t.max!==void 0&&(s.max=t.max-n.min),s}const Yp=.35;function CM(n=Yp){return n===!1?n=0:n===!0&&(n=Yp),{x:Q_(n,"left","right"),y:Q_(n,"top","bottom")}}function Q_(n,t,s){return{min:X_(n,t),max:X_(n,s)}}function X_(n,t){return typeof n=="number"?n:n[t]||0}const RM=new WeakMap;class DM{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ue(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const u=_=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Du(_).point)},c=(_,T)=>{const{drag:j,dragPropagation:k,onDragStart:L}=this.getProps();if(j&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=VV(j),!this.openDragLock))return;this.latestPointerEvent=_,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xn(G=>{let W=this.getAxisMotionValue(G).get()||0;if(Gs.test(W)){const{projection:Q}=this.visualElement;if(Q&&Q.layout){const at=Q.layout.layoutBox[G];at&&(W=fn(at)*(parseFloat(W)/100))}}this.originPoint[G]=W}),L&&ne.postRender(()=>L(_,T)),Hp(this.visualElement,"transform");const{animationState:U}=this.visualElement;U&&U.setActive("whileDrag",!0)},d=(_,T)=>{this.latestPointerEvent=_,this.latestPanInfo=T;const{dragPropagation:j,dragDirectionLock:k,onDirectionLock:L,onDrag:U}=this.getProps();if(!j&&!this.openDragLock)return;const{offset:G}=T;if(k&&this.currentDirection===null){this.currentDirection=jM(G),this.currentDirection!==null&&L&&L(this.currentDirection);return}this.updateAxis("x",T.point,G),this.updateAxis("y",T.point,G),this.visualElement.render(),U&&U(_,T)},g=(_,T)=>{this.latestPointerEvent=_,this.latestPanInfo=T,this.stop(_,T),this.latestPointerEvent=null,this.latestPanInfo=null},y=()=>Xn(_=>{var T;return this.getAnimationState(_)==="paused"&&((T=this.getAxisMotionValue(_).animation)==null?void 0:T.play())}),{dragSnapToOrigin:b}=this.getProps();this.panSession=new sw(t,{onSessionStart:u,onStart:c,onMove:d,onSessionEnd:g,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:b,distanceThreshold:r,contextWindow:nw(this.visualElement)})}stop(t,s){const r=t||this.latestPointerEvent,o=s||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!o||!r)return;const{velocity:c}=o;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&ne.postRender(()=>d(r,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,r){const{drag:o}=this.getProps();if(!r||!mh(t,o,this.currentDirection))return;const u=this.getAxisMotionValue(t);let c=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(c=EM(c,this.constraints[t],this.elastic[t])),u.set(c)}resolveConstraints(){var u;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,o=this.constraints;t&&co(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=wM(r.layoutBox,t):this.constraints=!1,this.elastic=CM(s),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Xn(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=NM(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!co(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const u=V6(r,o.root,this.visualElement.getTransformPagePoint());let c=SM(o.layout.layoutBox,u);if(s){const d=s(R6(c));this.hasMutatedConstraints=!!d,d&&(c=zE(d))}return c}startAnimation(t){const{drag:s,dragMomentum:r,dragElastic:o,dragTransition:u,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),g=this.constraints||{},y=Xn(b=>{if(!mh(b,s,this.currentDirection))return;let _=g&&g[b]||{};c&&(_={min:0,max:0});const T=o?200:1e6,j=o?40:1e7,k={type:"inertia",velocity:r?t[b]:0,bounceStiffness:T,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...u,..._};return this.startAxisValueAnimation(b,k)});return Promise.all(y).then(d)}startAxisValueAnimation(t,s){const r=this.getAxisMotionValue(t);return Hp(this.visualElement,t),r.start(my(t,r,0,s,this.visualElement,!1))}stopAnimation(){Xn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Xn(t=>{var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[s];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Xn(s=>{const{drag:r}=this.getProps();if(!mh(s,r,this.currentDirection))return;const{projection:o}=this.visualElement,u=this.getAxisMotionValue(s);if(o&&o.layout){const{min:c,max:d}=o.layout.layoutBox[s];u.set(t[s]-he(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!co(s)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Xn(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const g=d.get();o[c]=AM({min:g,max:g},this.constraints[c])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Xn(c=>{if(!mh(c,t,null))return;const d=this.getAxisMotionValue(c),{min:g,max:y}=this.constraints[c];d.set(he(g,y,o[c]))})}addListeners(){if(!this.visualElement.current)return;RM.set(this.visualElement,this);const t=this.visualElement.current,s=tu(t,"pointerdown",g=>{const{drag:y,dragListener:b=!0}=this.getProps();y&&b&&this.start(g)}),r=()=>{const{dragConstraints:g}=this.getProps();co(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,u=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),ne.read(r);const c=gu(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",(({delta:g,hasLayoutChanged:y})=>{this.isDragging&&y&&(Xn(b=>{const _=this.getAxisMotionValue(b);_&&(this.originPoint[b]+=g[b].translate,_.set(_.get()+g[b].translate))}),this.visualElement.render())}));return()=>{c(),s(),u(),d&&d()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:u=!1,dragElastic:c=Yp,dragMomentum:d=!0}=t;return{...t,drag:s,dragDirectionLock:r,dragPropagation:o,dragConstraints:u,dragElastic:c,dragMomentum:d}}}function mh(n,t,s){return(t===!0||t===n)&&(s===null||s===n)}function jM(n,t=10){let s=null;return Math.abs(n.y)>t?s="y":Math.abs(n.x)>t&&(s="x"),s}class VM extends xr{constructor(t){super(t),this.removeGroupControls=wn,this.removeListeners=wn,this.controls=new DM(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wn}update(){const{dragControls:t}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};t!==s&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const $_=n=>(t,s)=>{n&&ne.postRender(()=>n(t,s))};class MM extends xr{constructor(){super(...arguments),this.removePointerDownListener=wn}onPointerDown(t){this.session=new sw(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:$_(t),onStart:$_(s),onMove:r,onEnd:(u,c)=>{delete this.session,o&&ne.postRender(()=>o(u,c))}}}mount(){this.removePointerDownListener=tu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Nh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let $m=!1;class IM extends K.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r,layoutId:o}=this.props,{projection:u}=t;u&&(s.group&&s.group.add(u),r&&r.register&&o&&r.register(u),$m&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),Nh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:r,drag:o,isPresent:u}=this.props,{projection:c}=r;return c&&(c.isPresent=u,$m=!0,o||t.layoutDependency!==s||s===void 0||t.isPresent!==u?c.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?c.promote():c.relegate()||ne.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),sy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:o}=t;$m=!0,o&&(o.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function rw(n){const[t,s]=$V(),r=K.useContext(RT);return p.jsx(IM,{...n,layoutGroup:r,switchLayoutGroup:K.useContext(UE),isPresent:t,safeToRemove:s})}function kM(n,t,s){const r=ln(n)?n:Us(n);return r.start(my("",r,t,s)),r.animation}const OM=(n,t)=>n.depth-t.depth;class PM{constructor(){this.children=[],this.isDirty=!1}add(t){Ug(this.children,t),this.isDirty=!0}remove(t){Bg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(OM),this.isDirty=!1,this.children.forEach(t)}}function LM(n,t){const s=Tn.now(),r=({timestamp:o})=>{const u=o-s;u>=t&&($s(r),n(u-t))};return ne.setup(r,!0),()=>$s(r)}const aw=["TopLeft","TopRight","BottomLeft","BottomRight"],UM=aw.length,Z_=n=>typeof n=="string"?parseFloat(n):n,W_=n=>typeof n=="number"||pt.test(n);function BM(n,t,s,r,o,u){o?(n.opacity=he(0,s.opacity??1,zM(r)),n.opacityExit=he(t.opacity??1,0,FM(r))):u&&(n.opacity=he(t.opacity??1,s.opacity??1,r));for(let c=0;c<UM;c++){const d=`border${aw[c]}Radius`;let g=J_(t,d),y=J_(s,d);if(g===void 0&&y===void 0)continue;g||(g=0),y||(y=0),g===0||y===0||W_(g)===W_(y)?(n[d]=Math.max(he(Z_(g),Z_(y),r),0),(Gs.test(y)||Gs.test(g))&&(n[d]+="%")):n[d]=y}(t.rotate||s.rotate)&&(n.rotate=he(t.rotate||0,s.rotate||0,r))}function J_(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const zM=ow(0,.5,zT),FM=ow(.5,.95,wn);function ow(n,t,s){return r=>r<n?0:r>t?1:s(wo(n,t,r))}function t1(n,t){n.min=t.min,n.max=t.max}function hs(n,t){t1(n.x,t.x),t1(n.y,t.y)}function e1(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function n1(n,t,s,r,o){return n-=t,n=Zh(n,1/s,r),o!==void 0&&(n=Zh(n,1/o,r)),n}function qM(n,t=0,s=1,r=.5,o,u=n,c=n){if(Gs.test(t)&&(t=parseFloat(t),t=he(c.min,c.max,t/100)-c.min),typeof t!="number")return;let d=he(u.min,u.max,r);n===u&&(d-=t),n.min=n1(n.min,t,s,d,o),n.max=n1(n.max,t,s,d,o)}function s1(n,t,[s,r,o],u,c){qM(n,t[s],t[r],t[o],t.scale,u,c)}const HM=["x","scaleX","originX"],GM=["y","scaleY","originY"];function i1(n,t,s,r){s1(n.x,t,HM,s?s.x:void 0,r?r.x:void 0),s1(n.y,t,GM,s?s.y:void 0,r?r.y:void 0)}function r1(n){return n.translate===0&&n.scale===1}function lw(n){return r1(n.x)&&r1(n.y)}function a1(n,t){return n.min===t.min&&n.max===t.max}function YM(n,t){return a1(n.x,t.x)&&a1(n.y,t.y)}function o1(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function uw(n,t){return o1(n.x,t.x)&&o1(n.y,t.y)}function l1(n){return fn(n.x)/fn(n.y)}function u1(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class KM{constructor(){this.members=[]}add(t){Ug(this.members,t),t.scheduleRender()}remove(t){if(Bg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(o=>t===o);if(s===0)return!1;let r;for(let o=s;o>=0;o--){const u=this.members[o];if(u.isPresent!==!1){r=u;break}}return r?(this.promote(r),!0):!1}promote(t,s){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,s&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:r}=t;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QM(n,t,s){let r="";const o=n.x.translate/t.x,u=n.y.translate/t.y,c=(s==null?void 0:s.z)||0;if((o||u||c)&&(r=`translate3d(${o}px, ${u}px, ${c}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:y,rotate:b,rotateX:_,rotateY:T,skewX:j,skewY:k}=s;y&&(r=`perspective(${y}px) ${r}`),b&&(r+=`rotate(${b}deg) `),_&&(r+=`rotateX(${_}deg) `),T&&(r+=`rotateY(${T}deg) `),j&&(r+=`skewX(${j}deg) `),k&&(r+=`skewY(${k}deg) `)}const d=n.x.scale*t.x,g=n.y.scale*t.y;return(d!==1||g!==1)&&(r+=`scale(${d}, ${g})`),r||"none"}const Zm=["","X","Y","Z"],XM=1e3;let $M=0;function Wm(n,t,s,r){const{latestValues:o}=t;o[n]&&(s[n]=o[n],t.setStaticValue(n,0),r&&(r[n]=0))}function cw(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const s=XE(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:o,layoutId:u}=n.options;window.MotionCancelOptimisedAnimation(s,"transform",ne,!(o||u))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&cw(r)}function hw({attachResizeListener:n,defaultParent:t,measureScroll:s,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(c={},d=t==null?void 0:t()){this.id=$M++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(JM),this.nodes.forEach(sI),this.nodes.forEach(iI),this.nodes.forEach(tI)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new PM)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Fg),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const g=this.eventHandlers.get(c);g&&g.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=ry(c)&&!KV(c),this.instance=c;const{layoutId:d,layout:g,visualElement:y}=this.options;if(y&&!y.current&&y.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||d)&&(this.isLayoutDirty=!0),n){let b,_=0;const T=()=>this.root.updateBlockedByResize=!1;ne.read(()=>{_=window.innerWidth}),n(c,()=>{const j=window.innerWidth;j!==_&&(_=j,this.root.updateBlockedByResize=!0,b&&b(),b=LM(T,250),Nh.hasAnimatedSinceResize&&(Nh.hasAnimatedSinceResize=!1,this.nodes.forEach(f1)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&y&&(d||g)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:_,hasRelativeLayoutChanged:T,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||y.getDefaultTransition()||uI,{onLayoutAnimationStart:L,onLayoutAnimationComplete:U}=y.getProps(),G=!this.targetLayout||!uw(this.targetLayout,j),W=!_&&T;if(this.options.layoutRoot||this.resumeFrom||W||_&&(G||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Q={...ey(k,"layout"),onPlay:L,onComplete:U};(y.shouldReduceMotion||this.options.layoutRoot)&&(Q.delay=0,Q.type=!1),this.startAnimation(Q),this.setAnimationOrigin(b,W)}else _||f1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$s(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rI),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let b=0;b<this.path.length;b++){const _=this.path[b];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:d,layout:g}=this.options;if(d===void 0&&!g)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(c1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(h1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nI),this.nodes.forEach(ZM),this.nodes.forEach(WM)):this.nodes.forEach(h1),this.clearAllSnapshots();const d=Tn.now();He.delta=Xs(0,1e3/60,d-He.timestamp),He.timestamp=d,He.isProcessing=!0,Bm.update.process(He),Bm.preRender.process(He),Bm.render.process(He),He.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(eI),this.sharedNodes.forEach(aI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fn(this.snapshot.measuredBox.x)&&!fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const g=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:g,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!o)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!lw(this.projectionDelta),g=this.getTransformTemplate(),y=g?g(this.latestValues,""):void 0,b=y!==this.prevTransformTemplateValue;c&&this.instance&&(d||ta(this.latestValues)||b)&&(o(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let g=this.removeElementScroll(d);return c&&(g=this.removeTransform(g)),cI(g),{animationId:this.root.animationId,measuredBox:d,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var y;const{visualElement:c}=this.options;if(!c)return Ue();const d=c.measureViewportBox();if(!(((y=this.scroll)==null?void 0:y.wasRoot)||this.path.some(hI))){const{scroll:b}=this.root;b&&(ho(d.x,b.offset.x),ho(d.y,b.offset.y))}return d}removeElementScroll(c){var g;const d=Ue();if(hs(d,c),(g=this.scroll)!=null&&g.wasRoot)return d;for(let y=0;y<this.path.length;y++){const b=this.path[y],{scroll:_,options:T}=b;b!==this.root&&_&&T.layoutScroll&&(_.wasRoot&&hs(d,c),ho(d.x,_.offset.x),ho(d.y,_.offset.y))}return d}applyTransform(c,d=!1){const g=Ue();hs(g,c);for(let y=0;y<this.path.length;y++){const b=this.path[y];!d&&b.options.layoutScroll&&b.scroll&&b!==b.root&&fo(g,{x:-b.scroll.offset.x,y:-b.scroll.offset.y}),ta(b.latestValues)&&fo(g,b.latestValues)}return ta(this.latestValues)&&fo(g,this.latestValues),g}removeTransform(c){const d=Ue();hs(d,c);for(let g=0;g<this.path.length;g++){const y=this.path[g];if(!y.instance||!ta(y.latestValues))continue;Bp(y.latestValues)&&y.updateSnapshot();const b=Ue(),_=y.measurePageBox();hs(b,_),i1(d,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,b)}return ta(this.latestValues)&&i1(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==He.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var j;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==d;if(!(c||g&&this.isSharedProjectionDirty||this.isProjectionDirty||(j=this.parent)!=null&&j.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:b,layoutId:_}=this.options;if(!this.layout||!(b||_))return;this.resolvedRelativeTargetAt=He.timestamp;const T=this.getClosestProjectingParent();T&&this.linkedParentVersion!==T.layoutVersion&&!T.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(T&&T.layout?this.createRelativeTarget(T,this.layout.layoutBox,T.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ue(),this.targetWithTransforms=Ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hs(this.target,this.layout.layoutBox),qE(this.target,this.targetDelta)):hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?this.createRelativeTarget(T,this.target,T.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Bp(this.parent.latestValues)||FE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,d,g){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),Wh(this.relativeTargetOrigin,d,g),hs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let g=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(g=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===He.timestamp&&(g=!1),g)return;const{layout:y,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||b))return;hs(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,T=this.treeScale.y;j6(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Ue());const{target:j}=c;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(e1(this.prevProjectionDelta.x,this.projectionDelta.x),e1(this.prevProjectionDelta.y,this.projectionDelta.y)),eu(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==T||!u1(this.projectionDelta.x,this.prevProjectionDelta.x)||!u1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),c){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mo(),this.projectionDelta=mo(),this.projectionDeltaWithTransform=mo()}setAnimationOrigin(c,d=!1){const g=this.snapshot,y=g?g.latestValues:{},b={...this.latestValues},_=mo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const T=Ue(),j=g?g.source:void 0,k=this.layout?this.layout.source:void 0,L=j!==k,U=this.getStack(),G=!U||U.members.length<=1,W=!!(L&&!G&&this.options.crossfade===!0&&!this.path.some(lI));this.animationProgress=0;let Q;this.mixTargetDelta=at=>{const tt=at/1e3;d1(_.x,c.x,tt),d1(_.y,c.y,tt),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wh(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oI(this.relativeTarget,this.relativeTargetOrigin,T,tt),Q&&YM(this.relativeTarget,Q)&&(this.isProjectionDirty=!1),Q||(Q=Ue()),hs(Q,this.relativeTarget)),L&&(this.animationValues=b,BM(b,y,this.latestValues,tt,W,G)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=tt},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var d,g,y;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(y=(g=this.resumingFrom)==null?void 0:g.currentAnimation)==null||y.stop(),this.pendingAnimation&&($s(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ne.update(()=>{Nh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Us(0)),this.currentAnimation=kM(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:b=>{this.mixTargetDelta(b),c.onUpdate&&c.onUpdate(b)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:g,layout:y,latestValues:b}=c;if(!(!d||!g||!y)){if(this!==c&&this.layout&&y&&fw(this.options.animationType,this.layout.layoutBox,y.layoutBox)){g=this.target||Ue();const _=fn(this.layout.layoutBox.x);g.x.min=c.target.x.min,g.x.max=g.x.min+_;const T=fn(this.layout.layoutBox.y);g.y.min=c.target.y.min,g.y.max=g.y.min+T}hs(d,g),fo(d,b),eu(this.projectionDeltaWithTransform,this.layoutCorrected,d,b)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new KM),this.sharedNodes.get(c).add(d);const y=d.options.initialPromotionConfig;d.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var d;const{layoutId:c}=this.options;return c?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:c}=this.options;return c?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:g}={}){const y=this.getStack();y&&y.promote(this,g),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:g}=c;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(d=!0),!d)return;const y={};g.z&&Wm("z",c,y,this.animationValues);for(let b=0;b<Zm.length;b++)Wm(`rotate${Zm[b]}`,c,y,this.animationValues),Wm(`skew${Zm[b]}`,c,y,this.animationValues);c.render();for(const b in y)c.setStaticValue(b,y[b]),this.animationValues&&(this.animationValues[b]=y[b]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Ah(d==null?void 0:d.pointerEvents)||"",c.transform=g?g(this.latestValues,""):"none";return}const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Ah(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!ta(this.latestValues)&&(c.transform=g?g({},""):"none",this.hasProjected=!1);return}c.visibility="";const b=y.animationValues||y.latestValues;this.applyTransformsToTarget();let _=QM(this.projectionDeltaWithTransform,this.treeScale,b);g&&(_=g(b,_)),c.transform=_;const{x:T,y:j}=this.projectionDelta;c.transformOrigin=`${T.origin*100}% ${j.origin*100}% 0`,y.animationValues?c.opacity=y===this?b.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:b.opacityExit:c.opacity=y===this?b.opacity!==void 0?b.opacity:"":b.opacityExit!==void 0?b.opacityExit:0;for(const k in Up){if(b[k]===void 0)continue;const{correct:L,applyTo:U,isCSSVariable:G}=Up[k],W=_==="none"?b[k]:L(b[k],y);if(U){const Q=U.length;for(let at=0;at<Q;at++)c[U[at]]=W}else G?this.options.visualElement.renderState.vars[k]=W:c[k]=W}this.options.layoutId&&(c.pointerEvents=y===this?Ah(d==null?void 0:d.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var d;return(d=c.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(c1),this.root.sharedNodes.clear()}}}function ZM(n){n.updateLayout()}function WM(n){var s;const t=((s=n.resumeFrom)==null?void 0:s.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=n.layout,{animationType:u}=n.options,c=t.source!==n.layout.source;u==="size"?Xn(_=>{const T=c?t.measuredBox[_]:t.layoutBox[_],j=fn(T);T.min=r[_].min,T.max=T.min+j}):fw(u,t.layoutBox,r)&&Xn(_=>{const T=c?t.measuredBox[_]:t.layoutBox[_],j=fn(r[_]);T.max=T.min+j,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[_].max=n.relativeTarget[_].min+j)});const d=mo();eu(d,r,t.layoutBox);const g=mo();c?eu(g,n.applyTransform(o,!0),t.measuredBox):eu(g,r,t.layoutBox);const y=!lw(d);let b=!1;if(!n.resumeFrom){const _=n.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:T,layout:j}=_;if(T&&j){const k=Ue();Wh(k,t.layoutBox,T.layoutBox);const L=Ue();Wh(L,r,j.layoutBox),uw(k,L)||(b=!0),_.options.layoutRoot&&(n.relativeTarget=L,n.relativeTargetOrigin=k,n.relativeParent=_)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:g,layoutDelta:d,hasLayoutChanged:y,hasRelativeLayoutChanged:b})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function JM(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function tI(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function eI(n){n.clearSnapshot()}function c1(n){n.clearMeasurements()}function h1(n){n.isLayoutDirty=!1}function nI(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function f1(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function sI(n){n.resolveTargetDelta()}function iI(n){n.calcProjection()}function rI(n){n.resetSkewAndRotation()}function aI(n){n.removeLeadSnapshot()}function d1(n,t,s){n.translate=he(t.translate,0,s),n.scale=he(t.scale,1,s),n.origin=t.origin,n.originPoint=t.originPoint}function m1(n,t,s,r){n.min=he(t.min,s.min,r),n.max=he(t.max,s.max,r)}function oI(n,t,s,r){m1(n.x,t.x,s.x,r),m1(n.y,t.y,s.y,r)}function lI(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const uI={duration:.45,ease:[.4,0,.1,1]},p1=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),g1=p1("applewebkit/")&&!p1("chrome/")?Math.round:wn;function y1(n){n.min=g1(n.min),n.max=g1(n.max)}function cI(n){y1(n.x),y1(n.y)}function fw(n,t,s){return n==="position"||n==="preserve-aspect"&&!vM(l1(t),l1(s),.2)}function hI(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const fI=hw({attachResizeListener:(n,t)=>gu(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jm={current:void 0},dw=hw({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Jm.current){const n=new fI({});n.mount(window),n.setOptions({layoutScroll:!0}),Jm.current=n}return Jm.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),dI={pan:{Feature:MM},drag:{Feature:VM,ProjectionNode:dw,MeasureLayout:rw}};function v1(n,t,s){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",s==="Start");const o="onHover"+s,u=r[o];u&&ne.postRender(()=>u(t,Du(t)))}class mI extends xr{mount(){const{current:t}=this.node;t&&(this.unmount=MV(t,(s,r)=>(v1(this.node,r,"Start"),o=>v1(this.node,o,"End"))))}unmount(){}}class pI extends xr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nu(gu(this.node.current,"focus",()=>this.onFocus()),gu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function b1(n,t,s){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",s==="Start");const o="onTap"+(s==="End"?"":s),u=r[o];u&&ne.postRender(()=>u(t,Du(t)))}class gI extends xr{mount(){const{current:t}=this.node;t&&(this.unmount=PV(t,(s,r)=>(b1(this.node,r,"Start"),(o,{success:u})=>b1(this.node,o,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Kp=new WeakMap,tp=new WeakMap,yI=n=>{const t=Kp.get(n.target);t&&t(n)},vI=n=>{n.forEach(yI)};function bI({root:n,...t}){const s=n||document;tp.has(s)||tp.set(s,{});const r=tp.get(s),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(vI,{root:n,...t})),r[o]}function xI(n,t,s){const r=bI(t);return Kp.set(n,s),r.observe(n),()=>{Kp.delete(n),r.unobserve(n)}}const _I={some:0,all:1};class TI extends xr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:r,amount:o="some",once:u}=t,c={root:s?s.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:_I[o]},d=g=>{const{isIntersecting:y}=g;if(this.isInView===y||(this.isInView=y,u&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:b,onViewportLeave:_}=this.node.getProps(),T=y?b:_;T&&T(g)};return xI(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(EI(t,s))&&this.startObserver()}unmount(){}}function EI({viewport:n={}},{viewport:t={}}={}){return s=>n[s]!==t[s]}const wI={inView:{Feature:TI},tap:{Feature:gI},focus:{Feature:pI},hover:{Feature:mI}},SI={layout:{ProjectionNode:dw,MeasureLayout:rw}},AI={...fM,...wI,...dI,...SI},NI=C6(AI,z6),CI=50,x1=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),RI=()=>({time:0,x:x1(),y:x1()}),DI={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function _1(n,t,s,r){const o=s[t],{length:u,position:c}=DI[t],d=o.current,g=s.time;o.current=n[`scroll${c}`],o.scrollLength=n[`scroll${u}`]-n[`client${u}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=wo(0,o.scrollLength,o.current);const y=r-g;o.velocity=y>CI?0:qg(o.current-d,y)}function jI(n,t,s){_1(n,"x",t,s),_1(n,"y",t,s),t.time=s}function VI(n,t){const s={x:0,y:0};let r=n;for(;r&&r!==t;)if(_E(r))s.x+=r.offsetLeft,s.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const o=r.getBoundingClientRect();r=r.parentElement;const u=r.getBoundingClientRect();s.x+=o.left-u.left,s.y+=o.top-u.top}else if(r instanceof SVGGraphicsElement){const{x:o,y:u}=r.getBBox();s.x+=o,s.y+=u;let c=null,d=r.parentNode;for(;!c;)d.tagName==="svg"&&(c=d),d=r.parentNode;r=c}else break;return s}const Qp={start:0,center:.5,end:1};function T1(n,t,s=0){let r=0;if(n in Qp&&(n=Qp[n]),typeof n=="string"){const o=parseFloat(n);n.endsWith("px")?r=o:n.endsWith("%")?n=o/100:n.endsWith("vw")?r=o/100*document.documentElement.clientWidth:n.endsWith("vh")?r=o/100*document.documentElement.clientHeight:n=o}return typeof n=="number"&&(r=t*n),s+r}const MI=[0,0];function II(n,t,s,r){let o=Array.isArray(n)?n:MI,u=0,c=0;return typeof n=="number"?o=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?o=n.split(" "):o=[n,Qp[n]?n:"0"]),u=T1(o[0],s,r),c=T1(o[1],t),u-c}const kI={All:[[0,0],[1,1]]},OI={x:0,y:0};function PI(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function LI(n,t,s){const{offset:r=kI.All}=s,{target:o=n,axis:u="y"}=s,c=u==="y"?"height":"width",d=o!==n?VI(o,n):OI,g=o===n?{width:n.scrollWidth,height:n.scrollHeight}:PI(o),y={width:n.clientWidth,height:n.clientHeight};t[u].offset.length=0;let b=!t[u].interpolate;const _=r.length;for(let T=0;T<_;T++){const j=II(r[T],y[c],g[c],d[u]);!b&&j!==t[u].interpolatorOffsets[T]&&(b=!0),t[u].offset[T]=j}b&&(t[u].interpolate=sE(t[u].offset,iE(r),{clamp:!1}),t[u].interpolatorOffsets=[...t[u].offset]),t[u].progress=Xs(0,1,t[u].interpolate(t[u].current))}function UI(n,t=n,s){if(s.x.targetOffset=0,s.y.targetOffset=0,t!==n){let r=t;for(;r&&r!==n;)s.x.targetOffset+=r.offsetLeft,s.y.targetOffset+=r.offsetTop,r=r.offsetParent}s.x.targetLength=t===n?t.scrollWidth:t.clientWidth,s.y.targetLength=t===n?t.scrollHeight:t.clientHeight,s.x.containerLength=n.clientWidth,s.y.containerLength=n.clientHeight}function BI(n,t,s,r={}){return{measure:o=>{UI(n,r.target,s),jI(n,s,o),(r.offset||r.target)&&LI(n,s,r)},notify:()=>t(s)}}const Bl=new WeakMap,E1=new WeakMap,ep=new WeakMap,w1=n=>n===document.scrollingElement?window:n;function mw(n,{container:t=document.scrollingElement,...s}={}){if(!t)return wn;let r=ep.get(t);r||(r=new Set,ep.set(t,r));const o=RI(),u=BI(t,n,o,s);if(r.add(u),!Bl.has(t)){const d=()=>{for(const _ of r)_.measure(He.timestamp);ne.preUpdate(g)},g=()=>{for(const _ of r)_.notify()},y=()=>ne.read(d);Bl.set(t,y);const b=w1(t);window.addEventListener("resize",y,{passive:!0}),t!==document.documentElement&&E1.set(t,YV(t,y)),b.addEventListener("scroll",y,{passive:!0}),y()}const c=Bl.get(t);return ne.read(c,!1,!0),()=>{var y;$s(c);const d=ep.get(t);if(!d||(d.delete(u),d.size))return;const g=Bl.get(t);Bl.delete(t),g&&(w1(t).removeEventListener("scroll",g),(y=E1.get(t))==null||y(),window.removeEventListener("resize",g))}}const S1=new Map;function zI(n){const t={value:0},s=mw(r=>{t.value=r[n.axis].progress*100},n);return{currentTime:t,cancel:s}}function pw({source:n,container:t,...s}){const{axis:r}=s;n&&(t=n);const o=S1.get(t)??new Map;S1.set(t,o);const u=s.target??"self",c=o.get(u)??{},d=r+(s.offset??[]).join(",");return c[d]||(c[d]=!s.target&&lE()?new ScrollTimeline({source:t,axis:r}):zI({container:t,...s})),c[d]}function FI(n,t){const s=pw(t);return n.attachTimeline({timeline:t.target?void 0:s,observe:r=>(r.pause(),AE(o=>{r.time=r.iterationDuration*o},s))})}function qI(n){return n.length===2}function HI(n,t){return qI(n)?mw(s=>{n(s[t.axis].progress,s)},t):AE(n,pw(t))}function GI(n,{axis:t="y",container:s=document.scrollingElement,...r}={}){if(!s)return wn;const o={axis:t,container:s,...r};return typeof n=="function"?HI(n,o):FI(n,o)}const YI=()=>({scrollX:Us(0),scrollY:Us(0),scrollXProgress:Us(0),scrollYProgress:Us(0)}),ph=n=>n?!n.current:!1;function KI({container:n,target:t,...s}={}){const r=DT(YI),o=K.useRef(null),u=K.useRef(!1),c=K.useCallback(()=>(o.current=GI((d,{x:g,y})=>{r.scrollX.set(g.current),r.scrollXProgress.set(g.progress),r.scrollY.set(y.current),r.scrollYProgress.set(y.progress)},{...s,container:(n==null?void 0:n.current)||void 0,target:(t==null?void 0:t.current)||void 0}),()=>{var d;(d=o.current)==null||d.call(o)}),[n,t,JSON.stringify(s.offset)]);return jT(()=>{if(u.current=!1,ph(n)||ph(t)){u.current=!0;return}else return c()},[c]),K.useEffect(()=>{if(u.current)return fu(!ph(n)),fu(!ph(t)),c()},[c]),r}const QI=()=>{const{scrollYProgress:n}=KI();return p.jsx(NI.div,{style:{scaleX:n,position:"fixed",top:0,left:0,right:0,height:4,originX:0,background:"linear-gradient(90deg, #f49221, #ff6b35)",zIndex:9999}})},XI=({trip:n,mode:t,onClose:s,onUpdate:r})=>{const[o,u]=K.useState(""),[c,d]=K.useState(""),[g,y]=K.useState(!1),b=async T=>{T.preventDefault();const j=o.trim();if(!j)return alert("Please enter a member name.");if(n.participants.includes(j))return alert("This member already exists!");y(!0);try{const k=[...n.participants,j],L={...n.memberAvatars};c&&(L[j]=c),await l_(n.id,k,L),u(""),d(""),r(),alert(`${j} has been added successfully!`)}catch(k){console.error("Error adding member:",k),alert("Failed to add member. Please try again.")}finally{y(!1)}},_=async T=>{if(confirm(`Are you sure you want to remove ${T}?`)){y(!0);try{const j=n.participants.filter(L=>L!==T),k={...n.memberAvatars};delete k[T],await l_(n.id,j,k),r(),alert(`${T} has been removed.`)}catch(j){console.error("Error removing member:",j),alert("Failed to remove member. Please try again.")}finally{y(!1)}}};return p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-3xl p-10 border-4 border-[#f49221] max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-10",children:[p.jsx("h2",{className:"text-3xl font-bold text-black font-pt uppercase tracking-tight",children:" Manage Members"}),p.jsx("button",{onClick:s,className:"p-3 hover:bg-gray-100 rounded-2xl transition-all",children:p.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Current Members"}),p.jsx("div",{className:"space-y-3",children:n.participants.map((T,j)=>{var U;const k=(U=n.memberAvatars)==null?void 0:U[T],L=en.find(G=>G.id===k);return p.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-2xl p-4 border-2 border-gray-200",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[L!=null&&L.image?p.jsx("img",{src:L.image,alt:T,className:"w-10 h-10 rounded-full object-cover border-2 border-[#f49221]"}):p.jsx("div",{className:"w-10 h-10 rounded-full bg-[#f49221]/20 flex items-center justify-center font-bold text-[#f49221]",children:T[0]}),p.jsx("span",{className:"font-bold text-black text-lg",children:T})]}),p.jsx("button",{onClick:()=>_(T),disabled:g||n.participants.length<=1,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-xl font-bold text-xs uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:n.participants.length<=1?"Cannot remove the last member":"Remove member",children:"Remove"})]},j)})})]}),p.jsxs("div",{className:"border-t-2 border-gray-200 pt-8",children:[p.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Add New Member"}),p.jsxs("form",{onSubmit:b,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Member Name"}),p.jsx("input",{type:"text",placeholder:"Enter name",className:"w-full px-6 py-4 rounded-2xl border-2 border-gray-100 focus:border-[#f49221] outline-none font-bold text-black",value:o,onChange:T=>u(T.target.value),disabled:g})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"Avatar (Optional)"}),p.jsx("div",{className:"grid grid-cols-6 gap-3",children:en.map(T=>p.jsx("button",{type:"button",onClick:()=>d(T.id===c?"":T.id),className:`p-2 rounded-xl border-2 transition-all ${c===T.id?"border-[#f49221] bg-[#f49221]/10 scale-110":"border-gray-200 hover:border-[#f49221]/50"}`,disabled:g,children:p.jsx("img",{src:T.image,alt:`Avatar ${T.id}`,className:"w-12 h-12 rounded-full object-cover"})},T.id))})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{type:"submit",disabled:g||!o.trim(),className:"flex-1 bg-gradient-to-r from-[#f49221] to-[#e58515] hover:shadow-lg hover:shadow-[#f49221]/50 text-white py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Adding...":"Add Member"}),p.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-black py-4 rounded-2xl font-bold text-lg uppercase tracking-wider transition-all",children:"Close"})]})]})]})]})})},$I=()=>{var vt;const[n,t]=K.useState(localStorage.getItem("trip_user_name")),[s,r]=K.useState(null),[o,u]=K.useState(null),[c,d]=K.useState([]),[g,y]=K.useState([]),[b,_]=K.useState([]),[T,j]=K.useState(!1),[k,L]=K.useState(!1),[U,G]=K.useState(!1),[W,Q]=K.useState(!1),[at,tt]=K.useState(null),[Z,D]=K.useState(!1),[N,S]=K.useState(null),[A,V]=K.useState("expenses"),[R,M]=K.useState(localStorage.getItem("board_mode")||null),lt=K.useMemo(()=>o?o.participants.map(B=>{let ot=0,ct=0;return c.forEach(bt=>{bt.paidBy===B&&(ot+=bt.amount),bt.splitBetween.includes(B)&&(bt.splitType==="custom"&&bt.customSplits&&bt.customSplits[B]?ct+=bt.customSplits[B]:ct+=bt.perPersonAmount)}),g.filter(bt=>bt.isPaid).forEach(bt=>{bt.from===B&&(ot+=bt.amount),bt.to===B&&(ct+=bt.amount)}),{name:B,paid:ot,owed:ct,net:ot-ct}}):[],[o,c,g]);return K.useEffect(()=>{const B=localStorage.getItem("current_trip_id");B&&r(B)},[]),K.useEffect(()=>{R==="ps"&&V("products")},[R]),K.useEffect(()=>{if(!s){u(null),d([]),D(!1);return}D(!0),tt(null),localStorage.setItem("current_trip_id",s);const B=setTimeout(()=>{D(!1),tt("Connection timeout. Please check your internet connection and try again."),r(null),localStorage.removeItem("current_trip_id")},5e3),ot=R==="ps"?wD(s,O=>{clearTimeout(B),D(!1),O?(u(O),tt(null)):(tt("PS board not found. Verify the PS ID or check if it was deleted."),r(null),localStorage.removeItem("current_trip_id"))}):SD(s,O=>{clearTimeout(B),D(!1),O?(u(O),tt(null)):(tt("Trip not found. Verify the Trip ID or check if it was deleted."),r(null),localStorage.removeItem("current_trip_id"))}),ct=R==="trip"?AD(s,O=>{d(O)}):()=>{},wt=R==="trip"?jD(s,O=>{y(O)}):()=>{},bt=R==="ps"?MD(s,O=>{_(O)}):()=>{};return()=>{clearTimeout(B),ot(),ct(),wt(),bt()}},[s,R]),bD()?n?!s||at?p.jsxs("div",{className:"min-h-screen bg-white pt-10 px-4",children:[at&&p.jsxs("div",{className:"max-w-md mx-auto mb-6 bg-red-50 border-2 border-red-200 text-red-700 px-6 py-4 rounded-2xl text-sm font-bold shadow-sm flex items-center gap-3",children:[p.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),at]}),!R&&p.jsx(UD,{onSelect:B=>{M(B),localStorage.setItem("board_mode",B)}}),R==="trip"&&p.jsx(LD,{onTripSelected:B=>{r(B),localStorage.setItem("board_mode","trip")},onBack:()=>{M(null),localStorage.removeItem("board_mode")}}),R==="ps"&&p.jsx(BD,{onPsSelected:B=>{r(B),localStorage.setItem("board_mode","ps")},onBack:()=>{M(null),localStorage.removeItem("board_mode")}})]}):Z?p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-[#f49221] border-t-transparent mb-4 shadow-lg shadow-[#f49221]/20"}),p.jsx("p",{className:"text-black font-bold uppercase tracking-widest text-[10px] mb-6",children:"Connecting to Firebase..."}),p.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg text-sm font-medium transition-colors",children:"Clear & Restart"})]}):!o&&s?p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-[#f49221] border-t-transparent mb-4 shadow-lg shadow-[#f49221]/20"}),p.jsx("p",{className:"text-black font-bold uppercase tracking-widest text-[10px] mb-6",children:"Loading trip..."})]}):p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-[#1a0a00] to-black pb-20 relative overflow-hidden",children:[p.jsx(QI,{}),p.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[p.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-[#f49221] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),p.jsx("div",{className:"absolute top-1/3 right-1/4 w-96 h-96 bg-[#e58515] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),p.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-96 h-96 bg-[#f49221] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})]}),p.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-gradient-to-r from-[#f49221]/80 to-[#e58515]/80 border-b border-white/10 shadow-2xl shadow-[#f49221]/20",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:"/manas/pics/manas.png",alt:"Manas Logo",className:"w-10 h-10 rounded-xl shadow-lg hover:scale-110 transition-transform object-cover"}),p.jsx("h1",{className:"text-xl font-bold text-white tracking-tight",children:"Manas"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("button",{onClick:()=>{r(null),localStorage.removeItem("current_trip_id"),M(null),localStorage.removeItem("board_mode")},className:"px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-md text-white rounded-lg text-sm font-medium transition-all border border-white/30 hover:border-white/50 flex items-center gap-2",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Boards"]}),p.jsx("div",{className:"w-11 h-11 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center text-white font-bold border-2 border-white/40 shadow-lg hover:scale-110 transition-transform cursor-pointer",children:(vt=n==null?void 0:n[0])==null?void 0:vt.toUpperCase()})]})]})}),p.jsxs("main",{className:"max-w-7xl mx-auto px-6 py-8 relative z-10",children:[p.jsx("div",{className:"mb-8 backdrop-blur-sm bg-white/5 rounded-3xl p-6 border border-white/10",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-white via-[#f49221] to-white bg-clip-text text-transparent mb-3",children:"Dashboard"}),p.jsx("p",{className:"text-gray-300 text-sm",children:"An overview of your group's expenses, products & balances."}),p.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(s),Q(!0),setTimeout(()=>Q(!1),2e3)},className:"mt-3 text-xs text-gray-400 hover:text-[#f49221] transition-colors backdrop-blur-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10 hover:border-[#f49221]/50",children:["Trip: ",o.name,"  ID: ",s.substring(0,12),"... ",W?" Copied":" Copy"]})]}),p.jsxs("button",{onClick:()=>G(!0),className:"px-6 py-3 bg-gradient-to-r from-[#f49221] to-[#e58515] hover:shadow-lg hover:shadow-[#f49221]/50 text-white rounded-2xl font-bold text-sm uppercase tracking-wider transition-all flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Manage Members"]})]})}),p.jsxs("div",{className:"mb-8 flex gap-4 backdrop-blur-sm bg-white/5 rounded-2xl p-2 border border-white/10 w-fit",children:[R==="trip"&&p.jsx("button",{onClick:()=>V("expenses"),className:`px-6 py-3 rounded-xl font-bold text-sm transition-all ${A==="expenses"?"bg-gradient-to-r from-[#f49221] to-[#e58515] text-white shadow-lg shadow-[#f49221]/50":"text-gray-400 hover:text-white"}`,children:" Expenses"}),R==="ps"&&p.jsx("button",{onClick:()=>V("products"),className:`px-6 py-3 rounded-xl font-bold text-sm transition-all ${A==="products"?"bg-gradient-to-r from-[#f49221] to-[#e58515] text-white shadow-lg shadow-[#f49221]/50":"text-gray-400 hover:text-white"}`,children:" Products (PS)"})]}),R!=="ps"&&p.jsxs("div",{className:"mb-8",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[p.jsx("span",{className:"w-1 h-8 bg-gradient-to-b from-[#f49221] to-[#e58515] rounded-full"}),"Balances"]}),p.jsxs("button",{onClick:()=>j(!0),className:"bg-gradient-to-r from-[#f49221] to-[#e58515] hover:from-[#e58515] hover:to-[#f49221] text-white px-6 py-3 rounded-xl font-medium text-sm flex items-center gap-2 transition-all shadow-lg shadow-[#f49221]/50 hover:shadow-xl hover:shadow-[#f49221]/60 hover:scale-105",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Expense"]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:lt.map(B=>{var ot;return p.jsxs("div",{className:"group relative backdrop-blur-xl bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded-2xl p-6 hover:border-[#f49221]/50 transition-all hover:shadow-2xl hover:shadow-[#f49221]/30 hover:scale-105 duration-300 cursor-pointer",onClick:()=>S(B.name),children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#f49221]/10 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),p.jsxs("div",{className:"relative z-10",children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[o.memberAvatars&&o.memberAvatars[B.name]?p.jsx("img",{src:((ot=en.find(ct=>ct.id===o.memberAvatars[B.name]))==null?void 0:ot.image)||"",alt:B.name,className:"w-10 h-10 rounded-full object-cover border-2 border-[#f49221]/50"}):p.jsx("div",{className:"w-10 h-10 bg-[#f49221]/20 rounded-full flex items-center justify-center text-[#f49221] font-bold border-2 border-[#f49221]/50",children:B.name[0]}),p.jsx("h4",{className:"text-white font-bold text-lg",children:B.name})]}),p.jsx("span",{className:`text-xs font-bold px-3 py-1.5 rounded-full backdrop-blur-md ${B.net<-.01?"bg-red-500/30 text-red-200 border border-red-400/30":B.net>.01?"bg-[#f49221]/30 text-[#f49221] border border-[#f49221]/30":"bg-gray-500/30 text-gray-300 border border-gray-400/30"}`,children:B.net<-.01?"Owes":B.net>.01?"Gets Back":"Settled"})]}),p.jsxs("div",{className:"text-4xl font-black bg-gradient-to-r from-[#f49221] via-[#ff9d3d] to-[#e58515] bg-clip-text text-transparent mb-3 drop-shadow-lg",children:[p.jsx(Je,{className:"mr-2"}),Math.abs(B.net).toFixed(2)]}),p.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[p.jsx("span",{className:"w-2 h-2 bg-[#f49221] rounded-full animate-pulse"}),"Paid: ",p.jsxs("span",{className:"text-[#f49221] font-bold",children:[p.jsx(Je,{className:"mr-1"}),B.paid.toFixed(2)]})]})]})]},B.name)})})]}),R!=="ps"&&p.jsx(KD,{expenses:c,tripId:o.id,trackedSettlements:g,participants:o.participants,trip:o}),A==="expenses"&&R!=="ps"?p.jsxs("div",{className:"mt-8",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[p.jsx("span",{className:"w-1 h-8 bg-gradient-to-b from-[#f49221] to-[#e58515] rounded-full"}),"Recent Expenses"]}),p.jsxs("span",{className:"backdrop-blur-md bg-white/10 border border-white/20 text-gray-300 text-sm px-4 py-2 rounded-full font-medium",children:[c.length," transaction",c.length!==1?"s":""]})]}),c.length===0?p.jsxs("div",{className:"backdrop-blur-xl bg-white/5 border-2 border-dashed border-[#f49221]/30 rounded-3xl p-16 text-center",children:[p.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[#f49221]/20 to-[#e58515]/20 rounded-full flex items-center justify-center mx-auto mb-6 backdrop-blur-md border border-[#f49221]/30",children:p.jsx("svg",{className:"w-10 h-10 text-[#f49221]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("p",{className:"text-gray-300 text-xl font-semibold mb-2",children:"No expenses yet"}),p.jsx("p",{className:"text-gray-500 text-sm mb-8",children:"Get started by adding your first expense."}),p.jsxs("button",{onClick:()=>j(!0),className:"bg-gradient-to-r from-[#f49221] to-[#e58515] hover:from-[#e58515] hover:to-[#f49221] text-white px-8 py-3 rounded-xl font-semibold inline-flex items-center gap-2 transition-all shadow-xl shadow-[#f49221]/50 hover:shadow-2xl hover:shadow-[#f49221]/60 hover:scale-105",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Expense"]})]}):p.jsx(qD,{expenses:c,trip:o,participants:o.participants})]}):A==="products"?p.jsxs("div",{className:"mt-8",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[p.jsx("span",{className:"w-1 h-8 bg-gradient-to-b from-[#f49221] to-[#e58515] rounded-full"}),"Product Tracking (PS)"]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("span",{className:"backdrop-blur-md bg-white/10 border border-white/20 text-gray-300 text-sm px-4 py-2 rounded-full font-medium",children:[b.length," product",b.length!==1?"s":""]}),p.jsxs("button",{onClick:()=>L(!0),className:"bg-gradient-to-r from-[#f49221] to-[#e58515] hover:from-[#e58515] hover:to-[#f49221] text-white px-6 py-3 rounded-xl font-medium text-sm flex items-center gap-2 transition-all shadow-lg shadow-[#f49221]/50 hover:shadow-xl hover:shadow-[#f49221]/60 hover:scale-105",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Product"]})]})]}),p.jsx(YD,{products:b,trip:o})]}):null]}),R==="trip"&&p.jsx("button",{onClick:()=>j(!0),className:"fixed bottom-8 right-8 w-16 h-16 bg-[#f49221] text-white rounded-2xl shadow-2xl flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-40 shadow-[#f49221]/40 border-4 border-white",children:p.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),R==="ps"&&p.jsx("button",{onClick:()=>L(!0),className:"fixed bottom-8 right-8 w-16 h-16 bg-[#f49221] text-white rounded-2xl shadow-2xl flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-40 shadow-[#f49221]/40 border-4 border-white",children:p.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),T&&R!=="ps"&&p.jsx(zD,{tripId:o.id,participants:o.participants,trip:o,onClose:()=>j(!1)}),k&&R==="ps"&&p.jsx(HD,{tripId:o.id,participants:o.participants,trip:o,onClose:()=>L(!1)}),N&&o&&p.jsx(QD,{person:N,balances:lt,expenses:c,settlements:g,trip:o,onClose:()=>S(null)}),U&&o&&R&&p.jsx(XI,{trip:o,mode:R,onClose:()=>G(!1),onUpdate:()=>{const B=s;r(null),setTimeout(()=>r(B),100)}})]}):p.jsx(PD,{onJoin:t}):p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white p-6 text-center",children:p.jsxs("div",{className:"max-w-md bg-white p-10 rounded-[2rem] shadow-2xl border-2 border-[#f49221]",children:[p.jsx("div",{className:"w-20 h-20 bg-[#f49221] text-white rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-xl",children:p.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),p.jsx("h1",{className:"text-2xl font-bold text-black mb-4 font-pt",children:"Configuration Required"}),p.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"The application needs valid Firebase credentials to function. Check your setup."})]})})},gw=document.getElementById("root");if(!gw)throw new Error("Could not find root element to mount to");const ZI=sA.createRoot(gw);ZI.render(p.jsx($p.StrictMode,{children:p.jsx($I,{})}));
